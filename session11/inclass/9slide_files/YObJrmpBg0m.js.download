if (self.CavalryLogger) { CavalryLogger.start_js(["bsXkB"]); }

__d("RTISubscriptionData",["ChannelConstants","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ChannelConstants").SUBSCRIPTION_STATE;function a(a,b,c,d,e,f,h){this.$1=a,this.$2=b,this.$7=!0,this.$8=!1,this.$9=g.SUBSCRIBE,this.$10=null,this.$11=Date.now(),this.$3=d,this.$4=e?e:null,this.$5=f?f:null,this.$6=h?h:null,this.$12=c}a.prototype.matchesContext=function(a){return b("areEqual")(this.$3,a)};a.prototype.getCreatedTime=function(){return this.$11};a.prototype.getTopic=function(){return this.$1};a.prototype.getViewId=function(){return this.$12};a.prototype.getSubscribeCallback=function(){return this.$4};a.prototype.setSubscribeCallback=function(a){this.$4=a};a.prototype.getUnsubscribeCallback=function(){return this.$6};a.prototype.setUnsubscribeCallback=function(a){this.$6=a};a.prototype.getUnsubscribeHook=function(){return this.$5};a.prototype.setUnsubscribeHook=function(a){this.$5=a};a.prototype.getMessageListener=function(){return this.$2};a.prototype.setMessageListener=function(a){this.$2=a};a.prototype.getArbiterToken=function(){return this.$10};a.prototype.setArbiterToken=function(a){this.$10=a};a.prototype.isAlive=function(){return this.$9!=g.UNSUBSCRIBE};a.prototype.isMutatingContext=function(){return this.$9==g.MUTATE_CONTEXT};a.prototype.isDirty=function(){return this.$7};a.prototype.setDirty=function(a){this.$7=a};a.prototype.getState=function(){return this.$9};a.prototype.setState=function(a){this.$9=a};a.prototype.getContext=function(){return this.$3};a.prototype.isSent=function(){return this.$8};a.prototype.setSent=function(a){this.$8=a};a.prototype.prepareMutateContext=function(a){this.setState(g.MUTATE_CONTEXT),this.setDirty(!0),this.setSent(!1),this.$3=a};a.prototype.prepareUnsubscribe=function(){this.setState(g.UNSUBSCRIBE),this.setDirty(!0),this.setSent(!1),this.$2=null};e.exports=a}),null);
__d("RTISubscriptionStore",["Arbiter","BanzaiODS","ChannelConstants","CurrentLocale","ErrorUtils","RTISubscriptionData","RTISubscriptionManagerConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ChannelConstants").SUBSCRIPTION_STATE;function a(){this.$1={},this.$2=1}a.prototype.subscribe=function(a,c,d,e,f,h){__p&&__p();d||(d={});Object.assign(d,this.$3());var i=this.$4(a,d);if(i){var j=i.getState()==g.UNSUBSCRIBE&&i.isDirty()&&!i.isSent();i.isAlive()?b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","duplicate_subscription_alive"):j?b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","duplicate_subscription_unflushed_unsubscribe"):b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","duplicate_subscription_unknown");if(i.isAlive()||j){i.setMessageListener(c);i.setSubscribeCallback(e);i.setUnsubscribeHook(f);i.setUnsubscribeCallback(h);if(j){i.setDirty(!1);i.setSent(!0);i.setState(g.SUBSCRIBE);j=b("ChannelConstants").getRTISkywalkerArbiterType(i.getTopic(),i.getViewId());i.setArbiterToken(this.$5(j,i.getTopic(),i))}return i}}j=this.$2;this.$2+=1;i=new(b("RTISubscriptionData"))(a,c,j,d,e,f,h);c=b("ChannelConstants").getRTISkywalkerArbiterType(a,j);i.setArbiterToken(this.$5(c,a,i));a in this.$1||(this.$1[a]=new Set());this.$1[a].add(i);return i};a.prototype.unsubscribe=function(a){if(!this.isSubscribed(a))return;a.prepareUnsubscribe();a.getArbiterToken()&&(b("Arbiter").unsubscribe(a.getArbiterToken()),a.setArbiterToken(null))};a.prototype.mutateContext=function(a,b){if(!this.isSubscribed(a))return;a.prepareMutateContext(b)};a.prototype.isSubscribed=function(a){return a.getTopic()in this.$1&&this.$1[a.getTopic()].has(a)&&a.isAlive()};a.prototype.clearSubscriptions=function(){this.$1={}};a.prototype.deleteSubscriptions=function(a){var b=[];this.forEachSubscription(function(c){a.call(this,c)&&b.push(c)}.bind(this));b.forEach(function(a){if(a.getTopic()in this.$1){var b=this.$1[a.getTopic()];b["delete"](a)}}.bind(this))};a.prototype.forEachSubscription=function(a){__p&&__p();for(var b in this.$1){var c=this.$1[b];for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(a.call(this,f))return}}};a.prototype.$4=function(a,b){__p&&__p();a=this.$1[a];if(!a)return null;for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.matchesContext(b))return e}return null};a.prototype.$5=function(a,c,d){return b("Arbiter").subscribe(a,function(a,event){b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","skywalker_subscription_delivery"),event.obj.forEach(function(a){a={topic:c,payload:a};var e=d.getMessageListener();e&&b("ErrorUtils").applyWithGuard(e,this,[a])}.bind(this))}.bind(this))};a.prototype.$3=function(){var a={};a.locale=b("CurrentLocale").get();if(b("RTISubscriptionManagerConfig").assimilator){var c=b("RTISubscriptionManagerConfig").assimilator;c.tierType&&(a.tierType=c.tierType);c.sandboxIP&&c.sandboxPort&&c.sandboxHostname&&(a.sandboxIP=c.sandboxIP,a.sandboxPort=c.sandboxPort,a.sandboxHostname=c.sandboxHostname)}return a};e.exports=a}),null);
__d("StreamStateMachineConstants",[],(function(a,b,c,d,e,f){"use strict";a={states:{GQLS_STATE_CREATED:"created",GQLS_STATE_ACTIVE:"active",GQLS_STATE_PAUSED:"paused",GQLS_STATE_TERMINATED:"terminated"},events:{GQLS_STATE_TRANSIT_ON_CREATE:"onCreated",GQLS_STATE_TRANSIT_ON_ACTIVE:"onActive",GQLS_STATE_TRANSIT_ON_PAUSE:"onPause",GQLS_STATE_TRANSIT_ON_RESUME:"onResume",GQLS_STATE_TRANSIT_ON_TERMINATE:"onTerminate"}};e.exports=a}),null);
__d("StreamStateMachine",["StreamStateMachineConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("StreamStateMachineConstants").events,h=b("StreamStateMachineConstants").states,i=babelHelpers["extends"]({},g,{GQLS_STATE_TRANSIT_ON_REFRESH:"onRefresh"});function a(a,b){a===void 0&&(a=!1),b===void 0&&(b=1e4),this.$1=b,this.$2=null,this.$3=null,this.$5=a,this.$4=null}a.prototype.start=function(){this.$6(i.GQLS_STATE_TRANSIT_ON_CREATE),this.$5||this.$6(i.GQLS_STATE_TRANSIT_ON_ACTIVE)};a.prototype.ping=function(){switch(this.$4){case h.GQLS_STATE_ACTIVE:this.$6(i.GQLS_STATE_TRANSIT_ON_REFRESH);break;case h.GQLS_STATE_PAUSED:this.$6(i.GQLS_STATE_TRANSIT_ON_RESUME);break;case h.GQLS_STATE_CREATED:this.$6(i.GQLS_STATE_TRANSIT_ON_ACTIVE);break;case h.GQLS_STATE_TERMINATED:break}};a.prototype.kill=function(){this.$6(i.GQLS_STATE_TRANSIT_ON_TERMINATE)};a.prototype.setLifecycleHandler=function(a){this.$3=a};a.prototype.getState=function(){return this.$4};a.prototype.$6=function(event){__p&&__p();switch(event){case i.GQLS_STATE_TRANSIT_ON_CREATE:this.$7();break;case i.GQLS_STATE_TRANSIT_ON_ACTIVE:this.$8();break;case i.GQLS_STATE_TRANSIT_ON_REFRESH:this.$9();break;case i.GQLS_STATE_TRANSIT_ON_PAUSE:this.$10();break;case i.GQLS_STATE_TRANSIT_ON_RESUME:this.$11();break;case i.GQLS_STATE_TRANSIT_ON_TERMINATE:this.$12();break}};a.prototype.$7=function(){this.$4=h.GQLS_STATE_CREATED,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_CREATE)};a.prototype.$8=function(){this.$4=h.GQLS_STATE_ACTIVE,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_ACTIVE),this.$13()};a.prototype.$9=function(){clearTimeout(this.$2),this.$13()};a.prototype.$10=function(){this.$4=h.GQLS_STATE_PAUSED,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_PAUSE)};a.prototype.$11=function(){this.$4=h.GQLS_STATE_ACTIVE,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_RESUME),this.$13()};a.prototype.$12=function(){clearTimeout(this.$2),this.$4=h.GQLS_STATE_TERMINATED};a.prototype.$13=function(){this.$5&&(this.$2=setTimeout(function(){this.$6(g.GQLS_STATE_TRANSIT_ON_PAUSE)}.bind(this),this.$1))};e.exports=a}),null);
__d("RTISubscriptionToken",["StreamStateMachine","gkx"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f){"use strict";__p&&__p();this.$1=a;this.$2=c;this.$4=d;this.$5=e;this.$3=f;this.$6=null;if(b("gkx")("AT5R2c8RV30ACfB-g2mU6TcK4P-_zOijNJNqRwBajAhWM8GWb-fwUePWej8KWj9_IXc7p84bphBbXj-kQGC6BJIz")){a=this.getContext();c=this.hasHeartbeatOption(a);this.$7=new(b("StreamStateMachine"))(c);this.$7.start()}}a.prototype.setFriendFanoutToken=function(a){"use strict";this.$6=a};a.prototype.getFriendFanoutToken=function(){"use strict";return this.$6};a.prototype.getSubscriptionData=function(){"use strict";return this.$1};a.prototype.isSubscribed=function(){"use strict";return this.$3(this.$1)};a.prototype.getContext=function(){"use strict";return this.$1.getContext()};a.prototype.mutateContext=function(a){"use strict";this.$4(this.$1,a)};a.prototype.unsubscribe=function(){"use strict";var a=this.$1.getUnsubscribeHook();a&&a();this.$2(this.$1);this.$6&&this.$6.unsubscribe();b("gkx")("AT5R2c8RV30ACfB-g2mU6TcK4P-_zOijNJNqRwBajAhWM8GWb-fwUePWej8KWj9_IXc7p84bphBbXj-kQGC6BJIz")&&(this.$7&&this.$7.kill())};a.prototype.fastUnsubscribe=function(){"use strict";this.unsubscribe(),this.$5()};a.prototype.hasHeartbeatOption=function(a){"use strict";__p&&__p();if(a&&a.transformContext){a=JSON.parse(a.transformContext);if(a.serializedQueryParameters){a=JSON.parse(a.serializedQueryParameters);if(a&&a["%options"]&&a["%options"].heartbeat)return!0}}return!1};a.prototype.ping=function(){"use strict";b("gkx")("AT5R2c8RV30ACfB-g2mU6TcK4P-_zOijNJNqRwBajAhWM8GWb-fwUePWej8KWj9_IXc7p84bphBbXj-kQGC6BJIz")&&(this.$7&&this.$7.ping())};a.prototype.handleLifecycles=function(a){"use strict";b("gkx")("AT5R2c8RV30ACfB-g2mU6TcK4P-_zOijNJNqRwBajAhWM8GWb-fwUePWej8KWj9_IXc7p84bphBbXj-kQGC6BJIz")&&(this.$7&&this.$7.setLifecycleHandler(a))};e.exports=a}),null);
__d("SkywalkerOracle",["gkx"],(function(a,b,c,d,e,f){"use strict";f.OracleGK=b("gkx")("AT59V6_3CXkJmeopb17WL3lllXAZhhPsl_xZYGU_Fzoz-3upzO1pVrZU-Ep-OtgX-_2D2sag28jt7-3H6BkLpraJ")}),null);
__d("SystemEvents",["ArbiterMixin","Cookie","ErrorGuard","ErrorUtils","SystemEventsInitialData","TimeSlice","UserActivity","UserAgent_DEPRECATED","gkx","mixin","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1e3;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){g.constructor.call(this),this.$SystemEvents12=function(){var a=this.$SystemEvents7();this.$SystemEvents2!=a&&(this.$SystemEvents2=a,this.inform(this.USER,a));this.$SystemEvents13()}.bind(this),this.USER="SystemEvents/USER",this.ONLINE="SystemEvents/ONLINE",this.TIME_TRAVEL="SystemEvents/TIME_TRAVEL",this.$SystemEvents1=b("SystemEventsInitialData").ORIGINAL_USER_ID,this.$SystemEvents2=this.$SystemEvents1,this.$SystemEvents3=navigator.onLine,this.$SystemEvents4=Date.now(),this.$SystemEvents6()}a.prototype.isPageOwner=function(a){return(a||this.$SystemEvents7())==this.$SystemEvents1};a.prototype.isOnline=function(){return!!(b("UserAgent_DEPRECATED").chrome()||this.$SystemEvents3)};a.prototype.checkTimeTravel=function(){var a=Date.now(),b=a-this.$SystemEvents4;this.$SystemEvents4=a;(b<0||b>1e4)&&this.inform(this.TIME_TRAVEL,b)};a.prototype.$SystemEvents6=function(){this.$SystemEvents8(),this.$SystemEvents9(),this.$SystemEvents10(),this.$SystemEvents11()};a.prototype.$SystemEvents8=function(){var a=b("TimeSlice").guard(function(){this.$SystemEvents3||(this.$SystemEvents3=!0,this.inform(this.ONLINE,this.$SystemEvents3))}.bind(this),"SystemEvents onOnline"),c=b("TimeSlice").guard(function(){this.$SystemEvents3&&(this.$SystemEvents3=!1,this.inform(this.ONLINE,this.$SystemEvents3))}.bind(this),"SystemEvents onOffline");b("UserAgent_DEPRECATED").ie()?b("UserAgent_DEPRECATED").ie()>=11?(window.addEventListener("online",a,!1),window.addEventListener("offline",c,!1)):b("UserAgent_DEPRECATED").ie()>=8?window.attachEvent("onload",function(){document.body.ononline=a,document.body.onoffline=c}):b("setIntervalAcrossTransitions")(function(){(navigator.onLine?a:c)()},h):window.addEventListener&&(window.addEventListener("online",a,!1),window.addEventListener("offline",c,!1))};a.prototype.$SystemEvents13=function(){clearTimeout(this.$SystemEvents5),this.$SystemEvents5=b("setTimeoutAcrossTransitions")(this.$SystemEvents12,h)};a.prototype.$SystemEvents9=function(){if(self!==top&&b("gkx")("AT7WkTBxtNvgg_cd28WME4VYYDSKNpQ6HV3ctXAazcEPazpx3HNWlYY_-VsDnRxxrQVwv993oQqldtr2UtEMBK_M9oLZL53MZPvIfc3E35mYU8nK0yCIOLib0JAs2StViz4"))return;b("gkx")("AT72AlgY59EKSOuCUEsuNGbWTW69f1LrBG_LxugpCdh4wELvqVniwX_iqC_4mJ8Vy26mVWILg2OAip_cjALGqTt-n2n6gpyEWH0Q7NvRHBsELlO3gDjVTWbvLiWom5Li7tg")&&b("UserActivity").subscribe(function(){this.$SystemEvents13()}.bind(this));this.$SystemEvents13()};a.prototype.$SystemEvents10=function(){b("setIntervalAcrossTransitions")(this.checkTimeTravel.bind(this),h)};a.prototype.$SystemEvents11=function(){b("setIntervalAcrossTransitions")(function(){window.onerror!=b("ErrorUtils").onerror&&window.onerror!=b("ErrorGuard").onerror&&(window.onerror=b("ErrorUtils").onerror)},h)};a.prototype.$SystemEvents7=function(){return b("Cookie").get("c_user")||"0"};e.exports=new a()}),3);
__d("RTISubscriptionManager",["invariant","Arbiter","BanzaiODS","Bootloader","ChannelConstants","CurrentUser","ErrorUtils","RTIFriendFanoutConfig","RTISubscriptionManagerConfig","RTISubscriptionStore","RTISubscriptionToken","Run","SkywalkerOracle","SystemEvents","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("SkywalkerOracle").OracleGK,i=b("ChannelConstants").SUBSCRIPTION_STATE;function a(){__p&&__p();this.PULL_HINT_DELAY_MILLIS=1e4,this.$1=new(b("RTISubscriptionStore"))(),this.$2=!1,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=!1,this.$7=!0,this.$8=0,this.$9=document.readyState==="complete",b("Run").onAfterLoad(function(){this.$9=!0,this.flush()}.bind(this)),this.$10=null,b("Arbiter").subscribe(b("ChannelConstants").ON_ENTER_STATE,function(a,c){if(!this.$10)return;a=/pull/.test(c.state);!this.$2&&a?(this.$3=!0,this.$4||(this.$4=!0,b("setTimeoutAcrossTransitions")(function(){this.$2=this.$3,this.$4=!1,this.$2&&this.flush()}.bind(this),this.PULL_HINT_DELAY_MILLIS))):!a?(this.$3=!1,this.$2=!1):a&&(this.$2=!0,this.flush())}.bind(this)),b("SystemEvents").subscribe(b("SystemEvents").ONLINE,function(a,b){b||(this.$2=!1,this.$3=!1)}.bind(this)),b("SystemEvents").subscribe(b("SystemEvents").USER,function(a,b){this.$2=!1,this.$3=!1,this.$1.clearSubscriptions()}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").RTI_SESSION,function(a,b){!this.$10&&b&&this.deleteSubscriptions(function(a){return a.getState()===i.UNSUBSCRIBE}),this.$10=b,this.$10&&(this.$2=!0,this.flush())}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").ON_INVALID_HISTORY,function(){this.$2=!0,this.forEachSubscription(function(a){return a.setDirty(!0)}),this.getCurrentSession()}.bind(this)),this.getCurrentSession(),b("Arbiter").subscribe(b("ChannelConstants").SKYWALKER,function(a,c){b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","skywalker_delivery");a=c.obj.topic;var d=c.obj.view_id,e={};c.obj.payloads===undefined?e.obj=[c.obj.payload]:e.obj=c.obj.payloads;c=b("ChannelConstants").getRTISkywalkerArbiterType(a,d);b("Arbiter").inform(c,e)}),this.$11()}a.prototype.subscribe=function(a,c,d,e,f,h){__p&&__p();a||g(0,undefined);c||g(0,undefined);b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","subscribe_attempt");e=this.$1.subscribe(a,function(a){b("gkx")("AT5R2c8RV30ACfB-g2mU6TcK4P-_zOijNJNqRwBajAhWM8GWb-fwUePWej8KWj9_IXc7p84bphBbXj-kQGC6BJIz")?(this.isHeartbeat(a.payload)||c(a),i.ping()):c(a)}.bind(this),d,e,f,h);var i=this.$12(e);f=a.substr(0,a.lastIndexOf("/"));if(b("RTIFriendFanoutConfig").passFriendFanoutSubscribeGK&&b("RTIFriendFanoutConfig").topicPrefixes.indexOf(f)>=0){h=a+"_user_id_"+b("CurrentUser").getID();f=this.$1.subscribe(h,c,d);a=this.$12(f);i.setFriendFanoutToken(a)}e.isDirty()&&this.flush();return i};a.prototype.mutateContext=function(a,c){b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","mutate_context_attempt"),this.$1.isSubscribed(a)&&(this.$1.mutateContext(a,c),this.flush())};a.prototype.isHeartbeat=function(a){try{a=JSON.parse(a);if(a.heartbeat)return!0}catch(a){}return!1};a.prototype.unsubscribe=function(a){b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","unsubscribe_attempt"),this.$1.unsubscribe(a)};a.prototype.unsubscribeAll=function(a){if(!this.isReady()||this.$10==null)return;var c=this.$10;b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","unsubscribe_all");var d={reset:"t"};a=a!=null?a:function(a){};c.issueRequest("/sub",d,{},a)};a.prototype.activePing=function(){if(!this.isReady()||this.$10==null)return;var a={state:"active"};this.$10.issueRequest("/active_ping",a,{},function(a){})};a.prototype.flush=function(){__p&&__p();if(!this.isReady()||this.$10==null||this.$5){this.$6=!0;this.$10==null&&this.getCurrentSession();return}var a=this.$10;this.$5=!0;this.$6=!1;var c=this.getMaxConsecutiveFlushFailures();if(this.$8>=c){b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","reset_state");this.$8=0;this.$1.clearSubscriptions();this.unsubscribeAll(function(){this.$5=!1}.bind(this));return}var d=[],e={};c=!0;var f=0,g=function(a){__p&&__p();if(f>=this.getMaxFlushBatchSize()){this.$6=!0;return!0}if(a.isDirty()){a.getState()===i.MUTATE_CONTEXT&&(c=!1);var b="subscriptions",g=e[b];g||(g=[],e[b]=g);d.push(a);a.setDirty(!1);a.setSent(!1);b={topic:a.getTopic(),state:a.getState(),context:a.getContext(),viewId:a.getViewId()};f+=1;g.push(b)}else c=!1;return!1}.bind(this);this.forEachSubscription(g);if(c&&e.subscriptions&&e.subscriptions.length>0){g=[];for(var h=0;h<e.subscriptions.length;h++)e.subscriptions[h].state===i.SUBSCRIBE&&g.push(e.subscriptions[h]);e.subscriptions=g;this.$7=!0}h=function(a){__p&&__p();var c=a.data!=null;this.$8=c?0:this.$8+1;this.$7&&c&&(this.$7=!1);for(var e=0;e<d.length;e++){var f=d[e];f.isDirty()||(f.setSent(c),f.setDirty(!c));if(f.getState()===i.SUBSCRIBE){c?b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","subscribe_success"):b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","subscribe_failure");var g=f.getSubscribeCallback();g&&b("ErrorUtils").applyWithGuard(g,this,[a])}else if(f.getState()===i.MUTATE_CONTEXT)c?(b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","mutate_context_success"),f.setState(i.SUBSCRIBE)):b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","mutate_context_failure");else if(f.getState()===i.UNSUBSCRIBE){c?b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","unsubscribe_success"):b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","unsubscribe_failure");g=f.getUnsubscribeCallback();g&&b("ErrorUtils").applyWithGuard(g,this,[a])}}this.deleteSubscriptions(function(a){return a.getState()===i.UNSUBSCRIBE&&a.isSent()&&!a.isDirty()});this.$5=!1;this.$6&&(b("BanzaiODS").bumpEntityKey("RTISubscriptionManager","repeated_flush"),this.$6=!1,this.flush())}.bind(this);if(Object.keys(e).length<=0){this.$5=!1;return}g={};this.$7&&(g.reset="t");a.issueRequest("/sub",g,e,h)};a.prototype.deleteSubscriptions=function(a){this.$1.deleteSubscriptions(a)};a.prototype.forEachSubscription=function(a){this.$1.forEachSubscription(a)};a.prototype.isFlushInProgress=function(){return this.$5};a.prototype.getSubscriptions=function(){var a=[];this.forEachSubscription(function(b){return a.push(b)});return a};a.prototype.isSubscribed=function(a){return this.$1.isSubscribed(a)};a.prototype.isReady=function(){return this.$10!=null&&this.$2&&this.$9};a.prototype.getCurrentSession=function(){b("Arbiter").inform(b("ChannelConstants").GET_RTI_SESSION_REQUEST)};a.prototype.getMaxConsecutiveFlushFailures=function(){return b("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(b("RTISubscriptionManagerConfig").config,"max_consecutive_flush_failures")?Number(b("RTISubscriptionManagerConfig").config.max_consecutive_flush_failures):b("ChannelConstants").DEFAULT_MAX_CONSECUTIVE_FLUSH_FAILURES};a.prototype.getMaxFlushBatchSize=function(){return b("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(b("RTISubscriptionManagerConfig").config,"max_subscription_flush_batch_size")?Number(b("RTISubscriptionManagerConfig").config.max_subscription_flush_batch_size):b("ChannelConstants").DEFAULT_MAX_SUBSCRIPTION_FLUSH_BATCH_SIZE};a.prototype.$12=function(a){return new(b("RTISubscriptionToken"))(a,function(a){return this.unsubscribe(a)}.bind(this),function(a,b){return this.mutateContext(a,b)}.bind(this),function(){return this.flush()}.bind(this),function(a){return this.isSubscribed(a)}.bind(this))};a.prototype.$11=function(){if(!h)return;b("Bootloader").loadModules(["SkywalkerOracleManager"],function(a){new a(function(a,b){this.subscribe(a,b)}.bind(this)).startOracle()}.bind(this),"RTISubscriptionManager")};var j=new a();b("Run").onUnload(function(){return j.unsubscribeAll()});e.exports=j}),null);