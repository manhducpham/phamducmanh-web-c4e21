if (self.CavalryLogger) { CavalryLogger.start_js(["K0T+6"]); }

__d("FrameEditorSupportedGeneratedText",[],(function(a,b,c,d,e,f){e.exports={"%City_Name%":"City name","%CITY_NAME%":"City name (all caps)"}}),null);
__d("FXProductVisibilityPolicyTypeLabels",[],(function(a,b,c,d,e,f){e.exports={ALL_PRODUCTS:"All products",OWNING_PRODUCT_ONLY:"Owning product only",SPECIFIC_PRODUCTS:"Specific products",ALL_EXCEPT_PRODUCTS:"All products except specific products",ANY_FACEBOOK_UNIVERSE:"Only Facebook-universe products"}}),null);
__d("LegacyMapUtils",["clamp","mod"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={MIN_LATITUDE:-85.05112878,MAX_LATITUDE:85.05112878,MIN_LONGITUDE:-180,MAX_LONGITUDE:180,pows:{},MAX_ZOOM:20,BING_MAP_ZOOM_LEVEL_CITY:10,BING_MAP_ZOOM_LEVEL_REGION:6,EARTH_CIRCUMFERENCE_METERS:40074784,scale:function(a,b){b=b-a;g.pows[b]||(g.pows[b]=Math.pow(2,b));return g.pows[b]},mapSize:function(a){return 512*g.scale(1,a)},latLongToXY:function(a,c){var d=b("clamp")(a.latitude,g.MIN_LATITUDE,g.MAX_LATITUDE);a=(a.longitude+180)/360;d=Math.sin(d*Math.PI/180);d=.5-Math.log((1+d)/(1-d))/(4*Math.PI);c=g.mapSize(c);return{x:Math.floor(a*(c-1)+.5),y:Math.floor(d*(c-1)+.5)}},xyToLatLong:function(a,c){c=g.mapSize(c);var d=b("mod")(a.x,c)/c-.5;a=.5-b("clamp")(a.y,0,c-1)/c;c=90-360*Math.atan(Math.exp(-a*2*Math.PI))/Math.PI;a=360*d;return{latitude:c,longitude:a}},getViewForLatLongs:function(a,b,c,d,e,f){__p&&__p();if(!c.length)throw new Error("the proper view for zero point(s) is completely ambiguous");d=d||{t:0,r:0,b:0,l:0};e=e||1;f=f||Infinity;var h=g._getBoundingBox(c),i=d.l+d.r,j=d.t+d.b,k=g.MAX_ZOOM;if(c.length>1){c=g.mapSize(k);while(k>e&&(g._getWidth(h,c)>a-i||h.b-h.t>b-j)||k>f)h=g._rectScale(h,1,2),k--,c=g.mapSize(k)}else while(k!==g.BING_MAP_ZOOM_LEVEL_CITY)k--,h=g._rectScale(h,1,2);c=h.l-d.l;f=h.r+d.r;f<c&&(f+=g.mapSize(k));e={t:h.t-d.t,r:f,b:h.b+d.b,l:c};g.mapSize(k);i={x:(e.l+e.r)/2,y:(e.t+e.b)/2};j=g.xyToLatLong(i,k);return{center:j,width:a,height:b,zoom:k}},_getWidth:function(a,b){return g._calculateRightDistanceAToB(a.l,a.r,b)},_getBoundingBox:function(a){__p&&__p();var b=[],c=g.mapSize(g.MAX_ZOOM);for(var d=0;d<a.length;d++){var e=a[d];b.push(g.latLongToXY(e,g.MAX_ZOOM))}b.sort(function(a,b){return a.x-b.x});e=b.length-1;d=g._calculateRightDistanceAToB(b[e].x,b[0].x,c);a=0;e=e;var f=[b[0].y];for(var h=1;h<b.length;h++){f.push(b[h].y);var i=g._calculateRightDistanceAToB(b[h-1].x,b[h].x,c);i>d&&(d=i,a=h,e=h-1)}i={t:Math.min.apply(null,f),r:b[e].x,b:Math.max.apply(null,f),l:b[a].x};return i},_calculateRightDistanceAToB:function(a,b,c){if(!c)throw new Error("zero or null map width not allowed");return(c+b-a)%c},_rectScale:function(a,b,c){return{t:a.t*b/c,r:a.r*b/c,b:a.b*b/c,l:a.l*b/c}}};e.exports=g}),null);
__d("LegacyMapCoordinate",["LegacyMapUtils","Vector","mod"],(function(a,b,c,d,e,f){__p&&__p();function g(){"use strict";this.absoluteX=null,this.absoluteY=null,this.latitude=null,this.longitude=null}g.fromAbsolute=function(a,c){"use strict";c===undefined&&(c=a.y,a=a.x);var d=new g();d.absoluteX=a;d.absoluteY=c;a=b("LegacyMapUtils").xyToLatLong(new(b("Vector"))(a,c),g.MAX_ZOOM);d.latitude=a.latitude;d.longitude=a.longitude;return d};g.fromLatLong=function(a,c){"use strict";c===undefined&&(c=a.longitude,a=a.latitude);var d=new g();d.latitude=a;d.longitude=c;a=b("LegacyMapUtils").latLongToXY({latitude:a,longitude:c},g.MAX_ZOOM);d.absoluteX=a.x;d.absoluteY=a.y;return d};g.fromMap=function(a,c,d){"use strict";d=b("LegacyMapUtils").scale(d,g.MAX_ZOOM);return g.fromAbsolute(a*d,c*d)};g.prototype.getLatitude=function(){"use strict";return this.latitude};g.prototype.getLongitude=function(){"use strict";return this.longitude};g.prototype.getAbsoluteX=function(){"use strict";return this.absoluteX};g.prototype.getAbsoluteY=function(){"use strict";return this.absoluteY};g.prototype.getAbsoluteXY=function(){"use strict";return new(b("Vector"))(this.absoluteX,this.absoluteY)};g.prototype.getMapX=function(a){"use strict";return this.getMapXY(a).x};g.prototype.getMapY=function(a){"use strict";return this.getMapXY(a).y};g.prototype.getMapXY=function(a){"use strict";a=b("LegacyMapUtils").scale(g.MAX_ZOOM,a);var c=this.absoluteX*a;a=this.absoluteY*a;return new(b("Vector"))(c,a)};g.prototype.add=function(a,b){"use strict";var c=this.getMapXY(a);return g.fromMap(c.x+b.x,c.y+b.y,a)};g.prototype.calculateDistanceSq=function(a,b){"use strict";var c=this.calculateDistanceX(a,b);a=this.calculateDistanceY(a,b);return c*c+a*a};g.prototype.calculateDistanceX=function(a,c){"use strict";var d=b("LegacyMapUtils").mapSize(a);c=b("mod")(c.getMapX(a)-this.getMapX(a),d);return Math.min(c,d-c)};g.prototype.calculateDistanceY=function(a,b){"use strict";return Math.abs(b.getMapY(a)-this.getMapY(a))};Object.assign(g,{MAX_ZOOM:18,MIN_ZOOM:1});e.exports=g}),null);
__d("MapRects",["Rect","Vector","clamp"],(function(a,b,c,d,e,f){__p&&__p();function g(){}Object.assign(g,{containsPoint:function(a,b,c){c===void 0&&(c=0);c===undefined&&(c=0);return a.t<=b.y+c&&a.r>=b.x-c&&a.b>=b.y-c&&a.l<=b.x+c},pad:function(a,b){return g.padXY(a,b,b)},padX:function(a,b){return g.padXY(a,b,0)},padY:function(a,b){return g.padXY(a,0,b)},padXY:function(a,c,d){return new(b("Rect"))(a.t-d,a.r+c,a.b+d,a.l-c,a.domain)},collides:function(a,b){return a.t<b.b&&a.b>b.t&&a.l<b.r&&a.r>b.l},boundPoint:function(a,c){var d=new(b("Vector"))(0,0);d.x=b("clamp")(c.x,a.l,a.r);d.y=b("clamp")(c.y,a.t,a.b);return d},boundingBox:function(a,c){return new(b("Rect"))(Math.min(a.t,c.t),Math.max(a.r,c.r),Math.max(a.b,c.b),Math.min(a.l,c.l))},scale:function(a,c,d){return new(b("Rect"))(a.t*c/d,a.r*c/d,a.b*c/d,a.l*c/d)}});e.exports=g}),null);
__d("AdsTargetingLocationClusterRecord",["cx","fbt","invariant","AdsTargetingLocationMapMetaRecord","GeoCoordinates","LegacyMapCoordinate","LocationConstants","MapRects","Rect","immutable","leaflet"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;a=b("LocationConstants").Aggregation;var k=a.AGGREGATION_RADIUS,l=a.LARGE_CLUSTER_THRESHOLD,m=a.MEDIUM_CLUSTER_THRESHOLD,n=a.SMALL_CLUSTER_THRESHOLD;j=babelHelpers.inherits(o,b("immutable").Record({center:null,members:b("immutable").Set(),radius:0,rect:null}));j&&j.prototype;o.fromSingleRecord=function(a,c){c=this.calculateAbsoluteCenter(a.geoLocation.latitude,a.geoLocation.longitude,c);return new o({center:c,members:b("immutable").Set.of(a),radius:k,rect:new(b("Rect"))(c.y,c.x,c.y,c.x)})};o.toSingleRecordWithOptions=function(a,c,d,e,f){__p&&__p();if(d||a.members.size>1){d=b("LegacyMapCoordinate").fromMap(a.center.x,a.center.y,c);c=new(b("GeoCoordinates"))(d.getLatitude(),d.getLongitude());d=f(a);f=0;var g={center:c,key:this.keyFromKeys(a.members.map(this.memberToKey).toArray()),name:d,radius:f,type:b("LocationConstants").CUSTOM_LOCATIONS};e=this.iconForCluster(e(a));var h=a.members.map(function(a){return a.meta});return new(b("AdsTargetingLocationMapMetaRecord"))({center:c,coordinateLists:null,geoLocation:g,icon:e,meta:h,name:d,popup:null,radius:f})}return a.members.first()};o.countFromCluster=function(a){return a.members.size};o.nameFromCluster=function(a){return h._("{count} v\u1ecb tr\u00ed",[h._param("count",a.members.size)])};o.toSingleRecord=function(a,b){return this.toSingleRecordWithOptions(a,b,!1,this.countFromCluster,this.nameFromCluster)};o.memberToKey=function(a){return a.geoLocation.key};o.keyFromKeys=function(a){return a.join("-")};o.keysFromKey=function(a){return a.split("-")};o.iconForCluster=function(a){var c=[0,18],d="_n9c",e=o.markerIconSizeForCluster(a);e=[e,e];return b("leaflet").divIcon({className:d,html:a,iconSize:e,popupAnchor:c})};o.markerIconSizeForCluster=function(a){if(a==null||a<n)return 24;else if(a<m)return 36;else if(a<l)return 48;else return 60};o.markerRadiusForCluster=function(a){if(a==null||a<=1)return 100;else if(a<n)return 1e4;else if(a<m)return 4e4;else if(a<l)return 7e4;else return 1e5};o.calculateAbsoluteCenter=function(a,c,d){return b("LegacyMapCoordinate").fromLatLong(a,c).getMapXY(d)};o.combine=function(a,c){a.asMutable()===a||i(0,undefined),a.rect=b("MapRects").boundingBox(a.rect,c.rect),a.radius=Math.max(a.radius,c.radius),a.center=a.rect.getCenter(),a.members=a.members.union(c.members)};function o(){j.apply(this,arguments)}e.exports=o}),null);
__d("MapAggregation",["removeFromArray"],(function(a,b,c,d,e,f){__p&&__p();function a(){this.combine=null,this.iterations=0,this.candidates=null,this.loners=null}Object.assign(a.prototype,{aggregate:function(a,c,d){__p&&__p();this.overlap=d?d:this._overlap;this.candidates=a;this.combine=c;this.loners=[];while(this.candidates.length>0){d=this.candidates[this.candidates.length-1];do{a=d.center;this._group(d,Number.MAX_VALUE);c=a!==d.center}while(!this._isDeleted(d)&&c);this._isDeleted(d)||(b("removeFromArray")(this.candidates,d),this.loners.push(d))}return this.loners},_isDeleted:function(a){return a.center===null},_delete:function(a){b("removeFromArray")(this.candidates,a),b("removeFromArray")(this.loners,a),a.center=null},_group:function(a,b){__p&&__p();while(!0){this.iterations++;if(this.iterations>=1e4){this.iterations%1e4===0&&0&&!1;return}var c=this._nearest(a),d=c.nearest;c=c.distanceSquared;if(!d||c>b||!this.overlap(a,d))return;var e=d.center,f=a.center;this._group(d,c-1);if(this._isDeleted(a))return;c=d.center!==e;e=a.center!==f;if(!c&&!e){this.combine(a,d);this._delete(d);return}}},_nearest:function(a){__p&&__p();var b,c,d,e=null,f=Number.MAX_VALUE;for(b=0;b<this.candidates.length;b++){d=this.candidates[b];if(d===a)continue;c=this._distanceSquared(a,d);c<f&&(e=d,f=c)}for(b=0;b<this.loners.length;b++){d=this.loners[b];if(d===a)continue;c=this._distanceSquared(a,d);c<f&&(e=d,f=c)}return{nearest:e,distanceSquared:f}},_overlap:function(a,b){var c=a.radius+b.radius;return this._distanceSquared(a,b)<c*c},_distanceSquared:function(a,b){var c=a.center.x-b.center.x;a=a.center.y-b.center.y;return c*c+a*a}});e.exports=a}),null);
__d("AdsTargetingAggregatedMapUtils",["AdsTargetingLocationClusterRecord","MapAggregation","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){var f=a.map(function(a){return b("AdsTargetingLocationClusterRecord").fromSingleRecord(a,c).asMutable()}).toArray(),g=new(b("MapAggregation"))().aggregate(f,b("AdsTargetingLocationClusterRecord").combine);f=g.map(function(f){return b("AdsTargetingLocationClusterRecord").toSingleRecordWithOptions(f,c,a.size!==g.length,d||b("AdsTargetingLocationClusterRecord").countFromCluster,e||b("AdsTargetingLocationClusterRecord").nameFromCluster)});return b("immutable").Set(f)}function c(a){return b("immutable").Set(b("AdsTargetingLocationClusterRecord").keysFromKey(a))}d={aggregateMapRecords:a,extractRecordKey:b("AdsTargetingLocationClusterRecord").memberToKey,splitClusterKey:c};e.exports=d}),null);
__d("AdsTargetingAggregatedMap.react",["AdsTargetingAggregatedMapUtils","AdsTargetingLocationInlineMap.react","FbtResultBase","LeafletUtils","LeafletView","LocationConstants","React","areEqual","emptyFunction","emptyObject","immutable","AdsTargetingLocationTypeAliases"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("AdsTargetingAggregatedMapUtils").aggregateMapRecords,i=b("AdsTargetingAggregatedMapUtils").extractRecordKey,j=b("AdsTargetingAggregatedMapUtils").splitClusterKey;c=b("React").Component;d=b("React").PropTypes;f=b("AdsTargetingLocationTypeAliases").CLICK_BEHAVIORS;var k=b("LocationConstants").Aggregation,l=k.MAX_LOCATIONS_SIZE,m=k.MIN_ZOOM_LEVEL_FOR_FILTERING;k=babelHelpers.inherits(a,c);g=k&&k.prototype;function a(a){__p&&__p();g.constructor.call(this,a),this.$5=function(a,b){a=this.props.onLocationsSelect;if(!a)return;a(this.$4(b))}.bind(this),this.$6=function(a,b){this.props.onViewChange&&this.props.onViewChange(a,b);if(!b){this.props.view||this.setState({view:a});return}this.$2(this.props,a,b)}.bind(this),this.state={bounds:null,clusteredLocations:b("immutable").Set(),inRangeLocations:b("immutable").Set(),locationRecordMap:b("immutable").Map(),size:null,view:this.props.view}}a.prototype.render=function(){return this.state.clusteredLocations.size>l?null:b("React").createElement("div",{style:{height:this.props.height}},this.$1())};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$2(a)};a.prototype.shouldComponentUpdate=function(a,c){a=a.height!==this.props.height||!b("areEqual")(a.locationRecords,this.props.locationRecords)||!b("areEqual")(a.menuItems,this.props.menuItems)||!b("LeafletUtils").areViewEqual(a.view,this.props.view);c=c!==undefined&&(c.bounds&&!c.bounds.equals(this.state.bounds)||!b("areEqual")(c.clusteredLocations,this.state.clusteredLocations)||!b("LeafletUtils").areViewEqual(c.view,this.state.view));return a||c};a.prototype.$3=function(a,c){return c&&a?b("LeafletUtils").getViewBounds(a,{width:c.x,height:c.y}):b("LeafletUtils").WHOLE_WORLD_BOUNDS};a.prototype.$4=function(a){a=j(a.key);return a.map(function(a){return this.state.locationRecordMap.get(a)}.bind(this))};a.prototype.$2=function(a,c,d){__p&&__p();c=a.view||c||this.state.view;d=d||this.state.size;var e=this.$3(c,d),f=c&&c.zoom;if(f===undefined||!e)return;var g=!1;a.disableAggregation&&(g=a.disableAggregation(f));var j;f<m?j=a.locationRecords:j=a.locationRecords.filter(function(a){return e.contains(b("LeafletUtils").toLatLng(a.center))});a=f==this.state.zoom&&(j.equals(this.state.inRangeLocations)||j.map(i).equals(this.state.inRangeLocations.map(i)));var k=this.state.locationRecordMap;a||(k=b("immutable").Map().withMutations(function(a){j.forEach(function(b){return a.set(b.geoLocation.key,b)})}));g||j.size<2?g=j:a?g=this.state.clusteredLocations:g=h(j,f,this.props.countFromCluster,this.props.nameFromCluster);this.setState({bounds:e,clusteredLocations:g,inRangeLocations:j,locationRecordMap:k,size:d,view:c})};a.prototype.$1=function(){var a=this.state.clusteredLocations.isEmpty()?this.props.locationRecords:this.state.clusteredLocations;return b("React").createElement(b("AdsTargetingLocationInlineMap.react"),babelHelpers["extends"]({addLocationMode:b("LocationConstants").INCLUDE,addingLocation:!1,centerLocations:a,clickBehavior:this.props.clickBehavior,disableCollapseButton:this.props.disableCollapseButton,disableScrollWheelZoom:this.props.disableScrollWheelZoom,enableDropPin:!1,excludedLocations:b("immutable").Set(),fitLocations:b("immutable").Set(),highlightLocations:b("immutable").Set(),locations:this.state.clusteredLocations,maxBounds:b("LeafletUtils").WHOLE_WORLD_BOUNDS,menuItems:this.props.menuItems||b("emptyObject"),onlyInclusion:!0,showPopupOnHover:!0,view:this.state.view||undefined,onAddLocationFromMap:b("emptyFunction"),onCollapseMap:b("emptyFunction"),onPopupMenuItemSelect:this.$5,onSingleNodeClick:this.props.onSingleNodeClick,onViewChange:this.$6},this.props.inlineMapProps))};a.propTypes={clickBehavior:d.oneOf(Object.keys(f)),countFromCluster:d.func,disableAggregation:d.func,disableCollapseButton:d.bool,disableScrollWheelZoom:d.bool,height:d.number.isRequired,inlineMapProps:d.object,locationRecords:d.instanceOf(b("immutable").Set).isRequired,menuItems:d.shape({INCLUDE:d.oneOfType([d.instanceOf(b("FbtResultBase")),d.string]),EXCLUDE:d.oneOfType([d.instanceOf(b("FbtResultBase")),d.string]),DELETE:d.oneOfType([d.instanceOf(b("FbtResultBase")),d.string])}),nameFromCluster:d.func,view:d.instanceOf(b("LeafletView")),onLocationsSelect:d.func,onViewChange:d.func};a.defaultProps={clickBehavior:f.ZOOM_TO_NEXT_RANGE,inlineMapProps:{}};e.exports=a}),null);
__d("asyncSleep",["regeneratorRuntime","Promise"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(b){return setTimeout(b,a)}));case 2:case"end":return c.stop()}},null,this)}e.exports=a}),null);
__d("EventPermalinkCameraFramesLogging",["EventsActionsLogger"],(function(a,b,c,d,e,f){"use strict";e.exports={logClick:function(a,c,d){b("EventsActionsLogger").log(this._eventID,{type:b("EventsActionsLogger").Type.CLICK,target:a,surface:b("EventsActionsLogger").Surface.PERMALINK,mechanism:b("EventsActionsLogger").Mechanism.PERMALINK,target_id:c,acontext:d},{})}}}),null);
__d("MediaEffectHubViewTab",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ANALYTICS:"analytics",ARSTUDIO:"arstudio",HOME:"home",LEARN:"learn",MANAGE:"manage",TEMPLATES:"templates",JOIN:"join",INVITE:"invite",DOCS:"docs"})}),null);
__d("XMediaEffectHubController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/{?tab}/",{tab:{type:"Enum",enumType:1},ref:{type:"Enum",enumType:1},flow_type:{type:"Enum",enumType:1},create:{type:"Bool",defaultValue:!1}})}),null);
__d("MediaEffectOwnerHubHeader.react",["fbt","Link.react","React","XMediaEffectHubController","XUICardHeader.react","XUICardHeaderTitle.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.hubLinkTab;a=a.title;var d=null;if(c){c=b("XMediaEffectHubController").getURIBuilder().setEnum("tab",c).getURI();var e=g._("Qu\u1ea3n l\u00fd hi\u1ec7u \u1ee9ng");d=b("React").createElement(b("Link.react"),{href:c,target:"_blank"},e)}return b("React").createElement(b("XUICardHeader.react"),{link:d,type:"secondary"},b("React").createElement(b("XUICardHeaderTitle.react"),null,a))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectWebdriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HUB_EFFECT_TABLE:"hub_effect_table",HUB_EFFECT_TABLE_PREVIEW_COLUMN:"hub_effect_table_preview_column",LWE_FRAME_CREATION_DIALOG:"lwe_frame_creation_dialog",LWE_EFFECT_OWNER_POPOVER_BUTTON:"lwe_effect_owner_popover_button",LWE_EFFECT_APP_POPOVER_BUTTON:"lwe_effect_app_popover_button",LWE_EFFECT_FRAME_NAME_INPUT:"lwe_effect_frame_name_input",HUB_EFFECT_CREATE_BUTTON:"hub_effect_create_button",LWE_EFFECT_CONTINUE_BUTTON:"lwe_effect_continue_button",LWE_EFFECT_CONFIRMATION_DIALOG:"lwe_effect_confirmation_dialog",LWE_EFFECT_PUBLISHED_CONFIRMATION_DIALOG_DONE_BUTTON:"lwe_effect_published_confirmation_dialog_done_button",LWE_EFFECT_EDUCATION_CONTINUE_BUTTON:"lwe_effect_education_continue_button",LWE_EFFECT_SAVE_DRAFT_BUTTON:"lwe_effect_save_draft_button",LWE_EFFECT_SAVE_DRAFT_SPINNER:"lwe_effect_save_draft_spinner",HUB_AR_EFFECT_CREATE_BUTTON:"hub_ar_effect_create_button",HUB_AR_EFFECT_CREATION_DIALOG:"hub_ar_effect_creation_dialog",HUB_AR_EFFECT_CREATION_DIALOG_NEXT:"hub_ar_effect_creation_dialog_next",HUB_AR_EFFECT_CREATION_DIALOG_PUBLISH:"hub_ar_effect_creation_dialog_publish",HUB_AR_EFFECT_FORM:"hub_ar_effect_form",HUB_AR_EFFECT_FORM_UPLAOD_STEP:"hub_ar_effect_form_upload_step",HUB_AR_EFFECT_FORM_DETAILS_STEP:"hub_ar_effect_form_details_step",HUB_AR_EFFECT_FORM_REVIEW_STEP:"hub_ar_effect_form_review_step",HUB_AR_EFFECT_FORM_NAME:"hub_ar_effect_form_name",HUB_AR_EFFECT_FORM_EFFECT_ICON:"hub_ar_effect_form_effect_icon",HUB_AR_EFFECT_FORM_EFFECT_FILE:"hub_ar_effect_form_effect_file",HUB_AR_EFFECT_FORM_LEGAL_AGREEMENT:"hub_ar_effect_form_legal_agreement",HUB_AR_EFFECT_FORM_EFFECT_DESCRIPTION:"hub_ar_effect_form_effect_description",HUB_AR_EFFECT_FORM_SCREENCAST:"hub_ar_effect_form_screencast",SUCCESS_DIALOG:"success_dialog",SUCCESS_DIALOG_CLOSE_BUTTON:"success_dialog_close_button",HUB_AR_EFFECT_DETAIL_DIALOG:"hub_ar_effect_detail_dialog",HUB_AR_EFFECT_DETAIL_DIALOG_SAVE:"hub_ar_effect_detail_dialog_save",HUB_AR_EFFECT_DETAIL_DIALOG_REJECTION_REASONS:"hub_ar_effect_detail_dialog_rejection_reasons",TRYIT_PAGE_SEND_NOTIFICAITON:"tryit_page_send_notification",TRYIT_PAGE_NOTIFICATION_CONFIRMATION:"tryit_page_notification_confirmation",FILE_UPLOAD_PROGRESS_BAR:"file_upload_progress_bar",UPLOAD_CONTAINER:"upload_container",DETAILS_CONTAINER:"details_container",FILES_CONTAINER:"files_container",PREVIEW_CONTAINER:"preview_container",PUBLISH_CONTAINER:"publish_container",AUDIENCE_CONTAINER:"audience_container",INTERNAL_SETTINGS_CONTAINER:"internal_settings_container",REVIEW_CONTAINER:"review_container",SUBMIT_CONTAINER:"submit_container",OVERVIEW_CONTAINER:"overview_container",PERFORMANCE_CONTAINER:"performance_container",PROMOTIONS_CONTAINER:"promotions_container",CONTAINER_NEXT_BUTTON:"container_next_button",FILE_UPLOAD_FILENAME:"file_upload_filename",SUBMIT_CONFIRMATION_BUTTON:"submit_confirmation_button",EFFECT_DESTINATION_PICKER:"effect_destination_picker",INSTAGRAM_ATTRIBUTION_PICKER:"instagram_attribution_picker",INSTAGRAM_ATTRIBUTION_OPTION:"instagram_attribution_option",INSTAGRAM_ATTRIBUTION_OPTION_LABEL:"instagram_attribution_option_label",CONTAINER_SPINNER:"container_spinner",OPEN_UPDATE_FILES_DIALOG_BUTTON:"open_update_files_dialog_button",UPDATE_FILES_DIALOG:"update_files_dialog",UPDATE_FILES_DIALOG_SAVE_BUTTON:"update_files_dialog_save_button",OPEN_AUDIENCE_DIALOG_BUTTON:"open_audience_dialog_button",AUDIENCE_DIALOG:"audience_dialog",AUDIENCE_DIALOG_SAVE_BUTTON:"audience_dialog_save_button",LOCATION_RADIO_SELECTOR:"location_rado_selector",LOCATION_AVAILABLE_EVERYWHERE:"location_available_everywhere",LOCATION_SPECIFIC_LOCATION:"location_specific_location",MULTILOCATION_SELECTOR:"multilocation_selector",SCHEDULE_RADIO_SELECTOR:"schedule_radio_selector",SCHEDULE_NO_SCHEDULE:"schedule_no_schedule",SCHEDULE_START_AND_END_DATE:"schedule_start_and_end_date",SCHEDULE_START_DATE:"schedule_start_date",SCHEDULE_END_DATE:"schedule_end_date",SCHEDULE_ADD_END_DATE_LINK:"schedule_add_end_date_link",DATETIME_PICKER_DATE:"datetime_picker_date",DATETIME_PICKER_TIME:"datetime_picker_time",DATETIME_PICKER_TIMEZONE:"datetime_picker_timezone"})}),null);
__d("EventPermalinkCameraFramesCreate.react",["cx","fbt","ix","AsyncDialog","AsyncRequest","EventPermalinkCameraFramesLogging","EventsActionsLogger","EventsPermalinkTabBar","Image.react","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectWebdriverIDs","React","ShimButton.react","XMediaEffectCreateDialogController","XUICard.react","XUICardSection.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("EventPermalinkCameraFramesLogging").logClick(b("EventsActionsLogger").Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var a=b("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",b("MediaEffectFlowType").EVENT).setFBID("source_id",this.props.eventID).setEnum("step",b("MediaEffectCreateStep").CREATE).setString("action_context",JSON.stringify(this.props.actionContext)).setEnum("active_tab",b("EventsPermalinkTabBar").getCurrentTab()).setEnum("ref",b("MediaEffectCreationReferrer").EVENT_PAGE).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a))}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("XUICard.react"),{className:"_634s"},b("React").createElement(b("MediaEffectOwnerHubHeader.react"),{title:this.props.title,hubLinkTab:b("MediaEffectHubViewTab").HOME}),b("React").createElement(b("XUICardSection.react"),null,b("React").createElement(b("ShimButton.react"),{className:"_weu","data-testid":b("MediaEffectWebdriverIDs").HUB_EFFECT_CREATE_BUTTON,onClick:this.$1},b("React").createElement(b("Image.react"),{src:i("293229")}),b("React").createElement("h1",{className:"_1x8l"},h._("Gi\u00fap m\u1ecdi ng\u01b0\u1eddi chia s\u1ebb t\u1ea1i s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n")),b("React").createElement("p",{className:"_wev"},h._("T\u1ea1o khung m\u00e1y \u1ea3nh t\u00f9y ch\u1ec9nh cho s\u1ef1 ki\u1ec7n b\u1eb1ng m\u1eabu c\u00f3 s\u1eb5n. M\u1ecdi ng\u01b0\u1eddi c\u00f3 th\u1ec3 th\u00eam khung v\u00e0o \u1ea3nh v\u00e0 video h\u1ecd chia s\u1ebb v\u1edbi b\u1ea1n b\u00e8.")),b("React").createElement("p",{className:"_wew"},h._("B\u1eaft \u0111\u1ea7u")))))};e.exports=a}),null);
__d("FXEntMediaEffectStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DRAFT:"draft",SCHEDULED:"scheduled",ACTIVE:"active",INACTIVE:"inactive",COMPLETED:"completed",ARCHIVED:"archived",NOT_REVIEWED:"not_reviewed",IN_REVIEW:"in_review",APPROVED:"approved",NOT_APPROVED:"not_approved",UPDATE_IN_REVIEW:"update_in_review",UPDATE_REJECTED:"update_rejected",DISABLED:"disabled",NEEDS_ATTENTION:"needs_attention",DEPRECATED:"deprecated"})}),null);
__d("MediaEffectFunnelLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={CREATION_FUNNEL_LOGGING_NAME:"CREATIVE_STUDIO_CREATION_FUNNEL",FUNNEL_LOGGING_EVENT:{ADD_DYNAMIC_TEXT:"add_dynamic_text",ADD_TEXT:"add_text",ASSET_INPLACE_WARNING:"asset_inplace_warning",CANCEL:"cancel",CHANGE_CATEGORY:"change_category",CHANGE_EDITOR_BACKGROUND_COLOR:"change_editor_background_color",CHANGE_EDITOR_BACKGROUND_IMAGE:"change_editor_background_image",CHANGE_END_TIME:"change_end_time",CHANGE_LOCATION:"change_location",CHANGE_NAME:"change_name",CHANGE_OWNER:"change_owner",CHANGE_START_TIME:"change_start_time",CHANGE_TAG:"change_tag",CHANGE_TEXT_ALIGNMENT:"change_text_alignment",CHANGE_TEXT_COLOR:"change_text_color",CHANGE_TEXT_FONT:"change_text_font",CHANGE_TEXT_CONTENT:"change_text_content",DELETE_ASSET:"delete_asset",DUPLICATE_ASSET:"duplicate_asset",ENTER_CREATION_FLOW_FROM_INLINE_NUX:"enter_creation_flow_from_inline_nux",EXPLICIT_DROPOFF:"explicit_dropoff",GALLERY_VIEW:"gallery_view",GALLERY_MEDIA_CLICK:"gallery_media_click",PREVIEW_ON_CAMERA:"preview_on_camera",SAVE_AS_DRAFT:"save_as_draft",SET_SCALE_WITH_WIDTH:"set_scale_with_width",SET_SCALE_WITH_HEIGHT:"set_scale_with_height",SHOW_PREVIEW:"show_preview",SHOWN_INLINE_NUX:"shown_inline_nux",SUBMIT:"submit",UPDATE_STEP:"update_step",UPLOAD_FILE:"upload_file",UPLOAD_FINISHED:"upload_finished",DIALOG_LOADED:"dialog_loaded",BACKGROUND_AUTO_REMOVAL_PREVIEW:"background_auto_removal_preview",BACKGROUND_AUTO_REMOVAL_APPLIED:"background_auto_removal_applied",ASSET_AUTO_SNAPPING:"asset_auto_snapping"},FUNNEL_LOGGING_TIMEOUT:999999,FUNNEL_LOGGING_TAGS:{BROWSER_NAME:"browser_name",CREATION_FLOW_TYPE:"creation_flow_type",EFFECT_ID:"effect_id",FAILURE:"failure",FRAME_EDITOR_SHOWN:"frame_editor_shown",NEW_EFFECT:"new_effect",REF:"ref",SOURCE_ID:"source_id",SUCCESS:"success",DIALOG_TYPE:"dialog_type",IS_FIRST_TIME_SAVE_OR_SUBMIT:"is_first_time_save_or_submit"},FUNNEL_LOGGING_PAYLOAD:{ALIGNMENT:"alignment",ASSET_INPLACE_WARNING_TYPE:"asset_inplace_warning_type",COLOR:"color",IMAGE:"image",EFFECT_ID:"effect_id",FONT:"font",NEW_EFFECT:"new_effect",OWNER_FIRST_PARTY:"owner_first_party",OWNER_ID:"owner_id",OWNER_TYPE:"owner_type",RESULT:"result",SCALE_WITH_HEIGHT:"scale_with_height",SCALE_WITH_WIDTH:"scale_with_width",TEXT:"text",STEP:"step",ASSET_ID:"asset_id",ASSETS:"assets",ASSET_AUTO_SNAPPING_TYPE:"asset_auto_snapping_type"}}}),null);
__d("MediaEffectErrorCode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HAS_DISALLOWED_LOCATION:"has_disallowed_location"})}),null);
__d("MediaEffectError",["fbt","MediaEffectErrorCode","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=b("immutable").Record;c=a({code:null,message:null,messageItems:[],params:[]});h=babelHelpers.inherits(i,c);h&&h.prototype;i.fromObject=function(a){return new i(babelHelpers["extends"]({},a,{message:j(a.code,a.params),messageItems:k(a.code,a.params)}))};function i(){h.apply(this,arguments)}function j(a,c){switch(a){case b("MediaEffectErrorCode").HAS_DISALLOWED_LOCATION:if(!c||c.length===0)return null;if(c.length===1)return g._("V\u1ecb tr\u00ed b\u1ea1n th\u00eam kh\u00f4ng c\u00f2n kh\u1ea3 d\u1ee5ng \u0111\u1ec3 d\u00f9ng v\u1edbi khung. H\u00e3y ch\u1ecdn m\u1ed9t v\u1ecb tr\u00ed kh\u00e1c ho\u1eb7c Chung n\u1ebfu kh\u00f4ng c\u00f3 v\u1ecb tr\u00ed.");else return g._("M\u1ed9t s\u1ed1 v\u1ecb tr\u00ed b\u1ea1n th\u00eam kh\u00f4ng c\u00f2n kh\u1ea3 d\u1ee5ng \u0111\u1ec3 d\u00f9ng v\u1edbi khung. H\u00e3y thay \u0111\u1ed5i c\u00e1c v\u1ecb tr\u00ed n\u00e0y ho\u1eb7c ch\u1ecdn Chung khi kh\u00f4ng c\u00f3 v\u1ecb tr\u00ed:")}return null}function k(a,c){switch(a){case b("MediaEffectErrorCode").HAS_DISALLOWED_LOCATION:if(!c)return null;if(c.length===1)return[];else return c}return null}e.exports=i}),null);
__d("MediaEffectFrameEditorDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("MediaEffectMetadataViewStore",["FluxReduceStore","MediaEffectError","MediaEffectFrameEditorDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("immutable").List,j=b("immutable").Map;c=b("immutable").Record;g=babelHelpers.inherits(k,c({errors:i(),fbRankingStrategy:"DEFAULT",instructions:j(),instagramAttributionData:i(),ownersData:i(),potentialOwnersForAttribution:j(),templateCategories:j()}));g&&g.prototype;function k(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new k()};a.prototype.reduce=function(a,c){__p&&__p();switch(c.type){case"update/fbRankingStrategy":a=a.set("fbRankingStrategy",c.value);break;case"init/effectMetadata":c=c.data;var d=c.activationJSData,e=c.instructionsData,f=c.instagramAttributionData,g=c.ownersData,h=c.errorsData,k=c.templateCategoryData,l=c.potentialOwnersForAttribution;c=d.fbBoosted;d=d.fbRankWeight;var m="DEFAULT";c?m="BOOST":d&&(m="MANUAL");var n=i((h||[]).map(function(a){return b("MediaEffectError").fromObject(a)}));a=a.withMutations(function(a){a.set("fbRankingStrategy",m).set("instructions",j(e)).set("instagramAttributionData",i(f)).set("ownersData",i(g)).set("potentialOwnersForAttribution",j(l)).set("errors",n).set("templateCategories",j(k))});break}return a};a.prototype.getMediaEffectOwnerFromID=function(a,b){if(!b)return null;a=a.filter(function(a){return a.id===b});return a.size===1?a.first():null};a.prototype.getOwner=function(a){return this.getMediaEffectOwnerFromID(this.getState().get("ownersData"),a)};a.prototype.getInstagramAttribution=function(a){return this.getMediaEffectOwnerFromID(this.getState().get("instagramAttributionData"),a)};a.prototype.isFirstParty=function(a){a=this.getOwner(a);return!a?!1:a.isFirstParty};a.prototype.isFirstPartyProduct=function(a,b){if(!this.isFirstParty(a))return!1;a=this.getOwner(a);return!a?!1:a.product===b};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectEditorFunnelLogger",["invariant","FunnelLogger","MediaEffectFunnelLoggingConstants","MediaEffectMetadataStore","MediaEffectMetadataViewStore","MediaEffectReactFrameEditorImageAssetRecord","mergeDeep"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MediaEffectFunnelLoggingConstants").CREATION_FUNNEL_LOGGING_NAME,i=b("MediaEffectFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,j=b("MediaEffectFunnelLoggingConstants").FUNNEL_LOGGING_PAYLOAD,k=b("MediaEffectFunnelLoggingConstants").FUNNEL_LOGGING_TAGS;a={_funnelStarted:!1,_bootstrapData:undefined,startFunnel:function(){b("FunnelLogger").startFunnel(h),this._funnelStarted=!0},startFunnelWithData:function(a){this._bootstrapData=a,this._funnelStarted?this._appendAction(i.DIALOG_LOADED):this.startFunnel()},endFunnel:function(){this._funnelStarted=!1,b("FunnelLogger").endFunnel(h)},logAddDynamicText:function(a){var b;this._appendAction(i.ADD_DYNAMIC_TEXT,(b={},b[j.TEXT]=a,b))},logAddText:function(){this._appendAction(i.ADD_TEXT,{})},logCancel:function(){this._appendAction(i.CANCEL)},logChangeCategory:function(){this._appendActionIfNew(i.CHANGE_CATEGORY)},logChangeEditorBackgroundColor:function(a){var b;this._appendAction(i.CHANGE_EDITOR_BACKGROUND_COLOR,(b={},b[j.COLOR]=a,b))},logChangeEditorBackgroundImage:function(a){var b,c=a&&a.match(/.*?\/([^\/]*\.jpg)/);this._appendAction(i.CHANGE_EDITOR_BACKGROUND_IMAGE,(b={},b[j.IMAGE]=a?c?c[1]:"no image name found":"no image",b))},logChangeEndTime:function(){this._appendActionIfNew(i.CHANGE_END_TIME)},logChangeLocation:function(){this._appendActionIfNew(i.CHANGE_LOCATION)},logChangeName:function(){this._appendActionIfNew(i.CHANGE_NAME)},logPreviewAutoBackgroundRemoval:function(a){var b;this._appendAction(i.BACKGROUND_AUTO_REMOVAL_PREVIEW,(b={},b[j.ASSET_ID]=a,b))},logApplyAutoBackgroundRemoval:function(a){var b;this._appendAction(i.BACKGROUND_AUTO_REMOVAL_APPLIED,(b={},b[j.ASSET_ID]=a,b))},logAutoSnapping:function(a){var b;this._appendAction(i.ASSET_AUTO_SNAPPING,(b={},b[j.ASSET_AUTO_SNAPPING_TYPE]=a,b))},logChangeOwner:function(){this._appendActionIfNew(i.CHANGE_OWNER)},logChangeStartTime:function(){this._appendActionIfNew(i.CHANGE_START_TIME)},logChangeTag:function(){this._appendActionIfNew(i.CHANGE_TAG)},logChangeTextAlignment:function(a){var b;this._appendAction(i.CHANGE_TEXT_ALIGNMENT,(b={},b[j.ALIGNMENT]=a,b))},logChangeTextColor:function(a){var b;this._appendAction(i.CHANGE_TEXT_COLOR,(b={},b[j.COLOR]=a,b))},logChangeTextFont:function(a){var b;this._appendAction(i.CHANGE_TEXT_FONT,(b={},b[j.FONT]=a,b))},logChangeTextContent:function(a){var b;this._appendAction(i.CHANGE_TEXT_CONTENT,(b={},b[j.TEXT]=a,b))},logDeleteAsset:function(){this._appendAction(i.DELETE_ASSET)},logDuplicateAsset:function(){this._appendAction(i.DUPLICATE_ASSET)},logStep:function(a){var b;this._appendAction(i.UPDATE_STEP,(b={},b[j.STEP]=a,b))},logExplicitDropoff:function(a){var b;this._appendAction(i.EXPLICIT_DROPOFF,(b={},b[j.STEP]=a,b))},logSaveAsDraft:function(a,c,d){var e;a=a?k.SUCCESS:k.FAILURE;d=d?d.assets.toArray().map(function(a){var c=a instanceof b("MediaEffectReactFrameEditorImageAssetRecord");return{asset_type:c?"image":"text",is_processed:c?a.processApplied:!1,asset_id:c?a.stickerFBID:null,snappedType:c?a.autoSnappedType:null}}):[];this._appendAction(i.SAVE_AS_DRAFT,(e={},e[j.RESULT]=a,e[j.EFFECT_ID]=c,e[j.ASSETS]=d,e))},logPreviewOnCamera:function(){this._appendAction(i.PREVIEW_ON_CAMERA)},logSetScaleWithHeight:function(a){var b;this._appendAction(i.SET_SCALE_WITH_HEIGHT,(b={},b[j.SCALE_WITH_HEIGHT]=a,b))},logSetScaleWithWidth:function(a){var b;this._appendAction(i.SET_SCALE_WITH_WIDTH,(b={},b[j.SCALE_WITH_WIDTH]=a,b))},logSubmit:function(a,c,d){var e;a=a?k.SUCCESS:k.FAILURE;d=d?d.assets.toArray().map(function(a){var c=a instanceof b("MediaEffectReactFrameEditorImageAssetRecord");return{asset_type:c?"image":"text",is_processed:c?a.processApplied:!1,asset_id:c?a.stickerFBID:null,snappedType:c?a.autoSnappedType:null}}):[];this._appendAction(i.SUBMIT,(e={},e[j.RESULT]=a,e[j.EFFECT_ID]=c,e[j.ASSETS]=d,e))},logUploadFile:function(){this._appendAction(i.UPLOAD_FILE)},logUploadFinished:function(a){var b;a=a?k.SUCCESS:k.FAILURE;this._appendAction(i.UPLOAD_FINISHED,(b={},b[j.RESULT]=a,b))},logShownInlineNUX:function(){this._appendAction(i.SHOWN_INLINE_NUX)},logEnterCreationFlowFromInlineNUX:function(){this._appendAction(i.ENTER_CREATION_FLOW_FROM_INLINE_NUX)},logAssetInPlaceWarning:function(a){var b;this._appendAction(i.ASSET_INPLACE_WARNING,(b={},b[j.ASSET_INPLACE_WARNING_TYPE]=a,b))},logGalleryView:function(){this._appendAction(i.GALLERY_VIEW)},logGalleryMediaClick:function(){this._appendAction(i.GALLERY_MEDIA_CLICK)},_appendActionIfNew:function(a,c){if(!this._funnelStarted)return;c=b("mergeDeep")(c,this._getStandardPayload());b("FunnelLogger").appendActionWithPayloadIfNew(h,a,c)},_appendAction:function(a,c){if(!this._funnelStarted)return;c=b("mergeDeep")(c,this._getStandardPayload());b("FunnelLogger").appendActionWithPayload(h,a,c)},_getStandardPayload:function(){__p&&__p();var a,c=b("MediaEffectMetadataStore").getState(),d=this._bootstrapData&&this._bootstrapData.metadataJSData?this._bootstrapData.metadataJSData.id:undefined;c=c.selectedOwnerID;a=(a={},a[j.NEW_EFFECT]=!d,a);if(d){var e;a=babelHelpers["extends"]({},a,(e={},e[j.EFFECT_ID]=d,e))}if(c){d=b("MediaEffectMetadataViewStore").getOwner(c);d||g(0,undefined);a=babelHelpers["extends"]({},a,(e={},e[j.OWNER_FIRST_PARTY]=d.isFirstParty,e[j.OWNER_ID]=c,e[j.OWNER_TYPE]=d.type,e))}return a}};e.exports=a}),null);
__d("FXEntMediaEffectSubmissionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING:0,APPROVED:1,DENIED:2,DRAFT:3,ARCHIVED:4,DISABLED:5,TAKEN_DOWN:6,SUBMITTED_UNREVIEWED:7})}),null);
__d("MediaEffectFrameDistributionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CAMERA:"camera",PROFILE_PICTURE:"profile_picture"})}),null);
__d("MediaEffectFramePreviewTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({CIRCLE:"",LANDSCAPE:"",PORTRAIT:"",PROFILE:"",SQUARE:""});e.exports=a}),null);
__d("MediaEffectFramePreviewConfigs",["fbt","MediaEffectFrameDistributionType","MediaEffectFramePreviewTypes","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;d=640;f=360;var i=811,j=400,k=361,l=643,m=129,n=358,o=120;n=(h={},h[b("MediaEffectFramePreviewTypes").PORTRAIT]={allCapsLabel:g._("D\u1eccC"),label:g._("D\u1ecdc"),phonePreviewRatio:{horizontalRatio:k/j,verticalRatio:l/i},previewSize:{previewHeight:d,previewWidth:f}},h[b("MediaEffectFramePreviewTypes").SQUARE]={allCapsLabel:g._("VU\u00d4NG"),label:g._("\u1ea2nh \u0111\u1ea1i di\u1ec7n - L\u1edbn"),phonePreviewRatio:{horizontalRatio:n/j,verticalRatio:n/i},previewSize:{previewHeight:d,previewWidth:d}},h[b("MediaEffectFramePreviewTypes").PROFILE]={allCapsLabel:g._("TRANG C\u00c1 NH\u00c2N"),label:g._("Trang c\u00e1 nh\u00e2n"),phonePreviewRatio:{horizontalRatio:m/j,verticalRatio:m/i},previewSize:{previewHeight:f,previewWidth:f}},h[b("MediaEffectFramePreviewTypes").LANDSCAPE]={allCapsLabel:g._("NGANG"),label:g._("Ngang"),phonePreviewRatio:{horizontalRatio:l/i,verticalRatio:k/j},previewSize:{previewHeight:f,previewWidth:d}},h[b("MediaEffectFramePreviewTypes").CIRCLE]={allCapsLabel:g._("TR\u00d2N"),label:g._("\u1ea2nh \u0111\u1ea1i di\u1ec7n"),phonePreviewRatio:{horizontalRatio:o/j,verticalRatio:o/i},previewSize:{previewHeight:f,previewWidth:f,isCircle:!0}},h);function a(a){if(!b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg"))return[b("MediaEffectFramePreviewTypes").PORTRAIT,b("MediaEffectFramePreviewTypes").PROFILE,b("MediaEffectFramePreviewTypes").LANDSCAPE];switch(a){case b("MediaEffectFrameDistributionType").CAMERA:return[b("MediaEffectFramePreviewTypes").PORTRAIT,b("MediaEffectFramePreviewTypes").LANDSCAPE];case b("MediaEffectFrameDistributionType").PROFILE_PICTURE:return[b("MediaEffectFramePreviewTypes").CIRCLE,b("MediaEffectFramePreviewTypes").SQUARE];default:return[b("MediaEffectFramePreviewTypes").PORTRAIT,b("MediaEffectFramePreviewTypes").LANDSCAPE]}}function c(a){__p&&__p();var c=a.isCircle,d=a.previewWidth;a=a.previewHeight;if(Math.floor(d)===Math.floor(a)){if(c)return b("MediaEffectFramePreviewTypes").CIRCLE;return b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg")?b("MediaEffectFramePreviewTypes").SQUARE:b("MediaEffectFramePreviewTypes").PROFILE}else if(d>a)return b("MediaEffectFramePreviewTypes").LANDSCAPE;else return b("MediaEffectFramePreviewTypes").PORTRAIT}e.exports={Configs:n,getPreviewTypeFromSize:c,getPreviewTypesForDistributionType:a}}),null);
__d("MediaEffectQE",["QE2Logger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("immutable").Record({inExperiment:!1,params:{},universe:""}));g&&g.prototype;a.prototype.getParam=function(a,c){c===void 0&&(c=!0);if(!this.inExperiment)return null;c&&b("QE2Logger").logExposureForUser(this.universe);return this.params[a]};a.prototype.getParamBool=function(a,b){b===void 0&&(b=!0);a=this.getParam(a,b);return a==="0"?!1:!!a};a.prototype.getParamInt=function(a,b){b===void 0&&(b=!0);a=this.getParam(a,b);b=parseInt(a,10);return isNaN(b)?null:b};a.prototype.getParamString=function(a,b){b===void 0&&(b=!0);a=this.getParam(a,b);return typeof a==="string"?a:null};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectQEUtils",["MediaEffectFlowType","MediaEffectQE","MediaEffectUserContext"],(function(a,b,c,d,e,f){"use strict";var g=[b("MediaEffectFlowType").INSTAGRAM_STICKER,b("MediaEffectFlowType").LIVE_TEMPLATE];a={shouldDefaultToPortrait:function(a){if(this._shouldExclude(a))return!1;a=new(b("MediaEffectQE"))(b("MediaEffectUserContext").portraitCanvasQE);return a.getParamBool("show_portrait")},_shouldExclude:function(a){return g.includes(a)}};e.exports=a}),null);
__d("MediaEffectEditingStep.react",["cx","FXEntMediaEffectSubmissionStatus","MediaEffectFlowType","MediaEffectFramePreviewConfigs","MediaEffectFramePreviewTypes","MediaEffectFullscreenFrameEditorContainer.react","MediaEffectQEUtils","MediaEffectReactFrameEditorCanvasContainer.react","MediaEffectReactFrameEditorPreviewContainer.react","MediaEffectValidationDialogContainer.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.$1=function(){return this.props.bootstrapData.metadataJSData.id};a.prototype.$2=function(){return!this.$1()};a.prototype.$3=function(){return this.$2()||!!this.props.frameEditorBootstrapData.frameData};a.prototype.$4=function(){var a=this.props.bootstrapData.metadataJSData.submissionStatus;return a===b("FXEntMediaEffectSubmissionStatus").DRAFT||this.props.flowType===b("MediaEffectFlowType").LIVE_TEMPLATE};a.prototype.render=function(){var a=this.props,c=a.context;a=a.frameEditorBootstrapData;var d=null,e=null;this.$3()&&(d=this.$4()?b("React").createElement(b("MediaEffectFullscreenFrameEditorContainer.react"),{context:{enableEditorCamera:c.enableEditorCamera,enableFontSettingsDialog:c.enableFontSettingsDialog,enableEditorFreeText:c.enableEditorFreeText},filtersData:a.filtersData,flowType:this.props.flowType,frameData:a.frameData}):b("React").createElement("div",{className:"_14bw _4a4u"},b("React").createElement(b("MediaEffectReactFrameEditorCanvasContainer.react"),{bootstrapData:a.frameData,includesPhoneFrame:b("MediaEffectQEUtils").shouldDefaultToPortrait(this.props.flowType),readOnly:!0})),e=this.$4()?null:b("React").createElement("div",{className:"_2odg"},b("React").createElement(b("MediaEffectReactFrameEditorPreviewContainer.react"),babelHelpers["extends"]({previewScale:.625},b("MediaEffectFramePreviewConfigs").Configs[b("MediaEffectFramePreviewTypes").LANDSCAPE].previewSize)),b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("MediaEffectReactFrameEditorPreviewContainer.react"),babelHelpers["extends"]({previewScale:.625},b("MediaEffectFramePreviewConfigs").Configs[b("MediaEffectFramePreviewTypes").PORTRAIT].previewSize)))));return b("React").createElement("div",{className:"_3iei"},b("React").createElement(b("MediaEffectValidationDialogContainer.react"),null),d,e)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFrameCreateDialogDataStore",["FluxReduceStore","MediaEffectFlowType","MediaEffectFrameCreationStepsConfig","MediaEffectFrameDistributionType","MediaEffectFrameEditorDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c=b("immutable").Record;var i=b("MediaEffectFrameCreationStepsConfig").CreationSteps;g=babelHelpers.inherits(j,c({currentStep:0,creationReferrer:null,dialogHeight:0,distributionType:null,screenWidth:0,validatingStep:-1,flowType:null,shownInlineNUX:!1,sourceID:null,eventDialogContext:{}}));g&&g.prototype;function j(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new j()};a.prototype.reduce=function(a,c){__p&&__p();var d;switch(c.type){case"init/effectData":a=a.set("validatingStep",-1);break;case"change/step":a=a.set("currentStep",c.step);break;case"change/distributionType":a=a.set("distributionType",c.distributionType);break;case"form/validate":a=a.set("validatingStep",c.step);break;case"init/frameData":d=(d=c.data)!=null?d.distributionTypes:d;d=!d||d.length===2?b("MediaEffectFrameDistributionType").CAMERA:d[0];a=a.set("distributionType",d);break;case"init/dialog":a=new j({creationReferrer:c.creationReferrer,flowType:c.flowType,sourceID:c.sourceID});break;case"init/eventDialog":a=a.set("eventDialogContext",c.dialogContext);break;case"set/screenDimensions":a=a.set("screenWidth",c.screenWidth).set("dialogHeight",c.dialogHeight);break;case"inlineNUX/enterCreationFlow":a=a.set("shownInlineNUX",!0);break}return a};a.prototype.isTemplateFlow=function(){return this.getState().flowType===b("MediaEffectFlowType").TEMPLATE};a.prototype.getCreationFlowType=function(){return this.getState().flowType};a.prototype.isValidating=function(){var a=this.getState();a=b("MediaEffectFrameCreationStepsConfig").getStep(a.flowType,a.validatingStep);return a!==i.NONE};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectProfilePolicy",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SELF_LOCATION_ONLY:"self_location_only",LOCATION_PROHIBITED:"location_prohibited",USE_TRAILING_REVIEW:"use_trailing_review"})}),null);
__d("MediaEffectFrameCreationReview.react",["cx","fbt","Link.react","MediaEffectProfilePolicy","MediaEffectReviewStepConfig","React","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=!!this.props.owner&&this.props.owner.policies.includes(b("MediaEffectProfilePolicy").USE_TRAILING_REVIEW);a=a?h._("\"\u0110\u0103ng\""):h._("\"G\u1eedi\"");a=b("React").createElement("div",{className:"_2pio _3s-b"},b("React").createElement(b("XUIText.react"),{weight:"normal"},h._("B\u1eb1ng c\u00e1ch nh\u1ea5p v\u00e0o {button_name}, b\u1ea1n \u0111\u1ed3ng \u00fd v\u1edbi {terms} v\u00e0 {policies} c\u1ee7a N\u1ec1n t\u1ea3ng hi\u1ec7u \u1ee9ng m\u00e1y \u1ea3nh. Hi\u1ec7u \u1ee9ng \u0111\u01b0\u1ee3c \u0111\u1eb7t \u1edf ch\u1ebf \u0111\u1ed9 c\u00f4ng khai \u0111\u1ec3 m\u1ecdi ng\u01b0\u1eddi \u0111\u1ec1u c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng.",[h._param("button_name",a),h._param("terms",b("React").createElement(b("Link.react"),{href:"/legal/camera_effects_platform_terms",target:"_blank"},h._("\u0111i\u1ec1u kho\u1ea3n"))),h._param("policies",b("React").createElement(b("Link.react"),{href:"/legal/camera_effects_platform_policies",target:"_blank"},h._("ch\u00ednh s\u00e1ch.")))])));return b("React").createElement("div",{className:"_1d1n"},b("MediaEffectReviewStepConfig")[this.props.flowType].map(function(a,c){return b("React").createElement(a,babelHelpers["extends"]({},this.props,{key:c}))}.bind(this)),a)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFrameEditorConstants",[],(function(a,b,c,d,e,f){"use strict";a={EDITOR_BUFFER_SIZE:35,PORTRAIT_CANVAS_RATIO:9/16,PHONE_SCREEN_TO_FRAME_WIDTH_RATIO:1094/1216,PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO:1956/2458};e.exports=a}),null);
__d("MediaEffectFullscreenFrameEditorSizingUtils",["MediaEffectFrameEditorConstants","MediaEffectFramePreviewTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE,h=212,i=12,j=60,k=60,l=12,m=40,n=200,o=4,p=40,q=70,r=12,s=50,t=811,u=400;a={getDialogWidth:function(a,b){return Math.max(l+h+g+i+this.getCanvasSize(a,b)+i+g+o+this.getPortraitPreviewHeight(a,b)+o+l)},getCanvasSize:function(a,b){return Math.max(0,Math.min(a-(m+h+g+i+i+g+n+m)-1,b-(2*g+p+j+k)-1))},getPortraitPreviewHeight:function(a,b){return Math.max(n,Math.min(a-(m+h+g+i+this.getCanvasSize(a,b)+i+g+m),this.getCanvasSize(a,b)/3))},getPortraitFullPreviewHeight:function(a,b){return Math.max(0,Math.min(b-96,3*this.getPortraitPreviewHeight(a,b)))},getSquareReviewPreviewWidth:function(a,b){var c=1+1.1325+1.2849*t/u+.25,d=120;a=(a-d)/c;d=b-(r+q+s+p+j+k);return Math.min(u*(d*.7694174757281553)/t,a)},getPhonePreviewSizing:function(a,c){c=c!==null&&c!==undefined?(c-(r+q+s+p+j+k))*.7694174757281553:625;return a===b("MediaEffectFramePreviewTypes").LANDSCAPE?{previewHeight:c*u/t,previewWidth:c}:{previewHeight:c,previewWidth:c*u/t}}};e.exports=a}),null);
__d("MediaEffectFrameCreationReviewContainer.react",["FluxContainer","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameCreationReview.react","MediaEffectFrameEditorDispatcher","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectMetadataStore","MediaEffectMetadataViewStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectMetadataStore"),b("MediaEffectMetadataViewStore"),b("MediaEffectFrameCreateDialogDataStore")]};a.calculateState=function(){var a=b("MediaEffectMetadataStore").getState(),c=a.get("selectedOwnerID"),d=b("MediaEffectFrameCreateDialogDataStore").getState(),e=d.dialogHeight,f=d.distributionType;d=d.screenWidth;d=b("MediaEffectFullscreenFrameEditorSizingUtils").getDialogWidth(d,e);return{dialogHeight:e,dialogWidth:d,distributionType:f,endTime:a.endTime,location:a.location,name:a.get("name"),placeDescription:a.placeDescription,selectedOwner:b("MediaEffectMetadataViewStore").getOwner(c),startTime:a.startTime,tags:a.get("tags")}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){return b("React").createElement(b("MediaEffectFrameCreationReview.react"),{dialogHeight:this.state.dialogHeight,dialogWidth:this.state.dialogWidth,distributionType:this.state.distributionType,endTime:this.state.endTime,flowType:this.props.flowType,frameName:this.state.name,location:this.state.location,owner:this.state.selectedOwner,placeDescription:this.state.placeDescription,startTime:this.state.startTime,tags:this.state.tags})};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("mediaEffectGKCheck",["MediaEffectGKConfig","invariant"],(function(a,b,c,d,e,f){"use strict";var g=b("MediaEffectGKConfig").gk_results;function a(a){return!!g[a]}e.exports=a}),null);
__d("MediaEffectFrameCreationStepsConfig",["fbt","invariant","MediaEffectEditingStep.react","MediaEffectFlowType","MediaEffectFrameCreationReviewContainer.react","MediaEffectTargetingStep.react","MediaEffectTemplateColorStepContainer.react","MediaEffectTemplateNewColorStepContainer.react","MediaEffectTemplateVariationStepContainer.react","immutable","keyMirror","mediaEffectGKCheck"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("keyMirror")({NONE:"",COLORS:"",EDITING:"",NEW_COLORS:"",TARGETING:"",REVIEW:"",VARIATIONS:""}),j=(d={},d[b("MediaEffectFlowType").BASIC_HUB]=[i.EDITING,i.TARGETING,i.REVIEW],d[b("MediaEffectFlowType").INTERNAL_TOOL]=[i.TARGETING],d[b("MediaEffectFlowType").TEMPLATE]=b("mediaEffectGKCheck")("media_effect_frame_editor_template_variations")?[i.EDITING,i.COLORS,i.NEW_COLORS,i.VARIATIONS,i.TARGETING,i.REVIEW]:[i.EDITING,i.TARGETING,i.REVIEW],d[b("MediaEffectFlowType").EVENT]=[i.EDITING,i.REVIEW],d[b("MediaEffectFlowType").BIRTHDAY]=[i.EDITING,i.REVIEW],d[b("MediaEffectFlowType").LIVE_TEMPLATE]=[i.EDITING],d[b("MediaEffectFlowType").INSTAGRAM_STICKER]=[i.EDITING,i.TARGETING,i.REVIEW],d);d=(f={},f[i.EDITING]={component:b("MediaEffectEditingStep.react"),label:g._("Thi\u1ebft k\u1ebf")},f[i.COLORS]={component:b("MediaEffectTemplateColorStepContainer.react"),label:g._("B\u1ea3ng m\u00e0u ngu\u1ed3n")},f[i.NEW_COLORS]={component:b("MediaEffectTemplateNewColorStepContainer.react"),label:g._("B\u1ea3ng m\u00e0u \u0111\u00edch")},f[i.VARIATIONS]={component:b("MediaEffectTemplateVariationStepContainer.react"),label:g._("Bi\u1ebfn th\u1ec3")},f[i.TARGETING]={component:b("MediaEffectTargetingStep.react"),label:g._("Chi ti\u1ebft")},f[i.REVIEW]={component:b("MediaEffectFrameCreationReviewContainer.react"),label:g._("\u0110\u00e1nh gi\u00e1")},f);function a(a,b){a=k(a).indexOf(b);a>=0||h(0,undefined);return a}function c(a,b){return b>=0?k(a).get(b):i.NONE}function k(a){return b("immutable").List(j[a])}e.exports={ComponentConfigs:d,CreationSteps:i,getStepIndex:a,getSteps:k,StepsConfigs:j,getStep:c}}),null);
__d("MediaEffectReviewPreviewSection.react",["cx","MediaEffectFramePhonePreviewContainer.react","MediaEffectFramePreviewConfigs","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectOwnerByline.react","MediaEffectReactFrameEditorPreviewCanvasContainer.react","React","XUIText.react","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=b("MediaEffectFullscreenFrameEditorSizingUtils").getSquareReviewPreviewWidth(this.props.dialogWidth,this.props.dialogHeight),c=811*a/400;c=b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg")?b("React").createElement("div",{className:"_3s-9",style:{marginTop:"-40px"}},b("MediaEffectFramePreviewConfigs").getPreviewTypesForDistributionType(this.props.distributionType).map(function(a,c){return b("React").createElement("div",{className:"_fh0",key:c},b("React").createElement(b("MediaEffectFramePhonePreviewContainer.react"),babelHelpers["extends"]({},b("MediaEffectFullscreenFrameEditorSizingUtils").getPhonePreviewSizing(a,this.props.dialogHeight),{previewType:a})))}.bind(this))):b("React").createElement("div",{className:"_3s-9"},b("React").createElement("div",{className:"_5gzu _fh0"},b("React").createElement(b("MediaEffectReactFrameEditorPreviewCanvasContainer.react"),{previewHeight:a,previewWidth:a})),b("React").createElement("div",{className:"_fh0"},b("React").createElement(b("MediaEffectFramePhonePreviewContainer.react"),{previewHeight:a,previewWidth:c})),b("React").createElement("div",{className:"_fh0"},b("React").createElement(b("MediaEffectFramePhonePreviewContainer.react"),{previewHeight:c,previewWidth:a})));return b("React").createElement("div",{className:"_6dm8"},b("React").createElement("div",{className:b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg")?"":"_6dm9"},b("React").createElement("div",{className:"_1ouw"},b("React").createElement(b("XUIText.react"),{className:"_1d1g",title:this.props.frameName},this.props.frameName)),this.props.owner?b("React").createElement(b("MediaEffectOwnerByline.react"),{owner:this.props.owner}):null),c)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FXMediaEffectType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FRAME:"frame",GENERIC:"generic",MSQRD_MASK:"msqrd_mask",PARTICLE_EFFECT:"particle_effect",PROFILE_FRAME:"profile_frame",SHADER_FILTER:"shader_filter",STYLE_TRANSFER:"style_transfer",WATERMARK:"watermark",TEST_MEDIA_EFFECT:"test_media_effect",PROFILE_OVERLAY_MASK_DEPRECATED:"profile_overlay_mask_DEPRECATED",UNDERLAY:"underlay"})}),null);
__d("MediaEffectHubStrings",["fbt","FXEntMediaEffectStatus","FXMediaEffectType"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("B\u1ea3n nh\u00e1p"),i=g._("\u0110\u00e3 l\u00ean l\u1ecbch"),j=g._("\u0110ang ho\u1ea1t \u0111\u1ed9ng"),k=g._("Kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng"),l=g._("\u0110\u00e3 ho\u00e0n t\u1ea5t"),m=g._("\u0110\u00e3 l\u01b0u tr\u1eef"),n=g._("Ch\u01b0a g\u1eedi"),o=g._("\u0110\u00e3 duy\u1ec7t"),p=g._("\u0110ang xem x\u00e9t"),q=g._("Ch\u01b0a ph\u00ea duy\u1ec7t"),r=g._("\u0110ang xem x\u00e9t m\u1ee5c c\u1eadp nh\u1eadt"),s=g._("M\u1ee5c c\u1eadp nh\u1eadt ch\u01b0a \u0111\u01b0\u1ee3c ph\u00ea duy\u1ec7t");a=g._("Li\u00ean t\u1ee5c");var t=g._("Khung"),u=g._("Hi\u1ec7u \u1ee9ng chung"),v=g._("M\u1eb7t n\u1ea1"),w=g._("Hi\u1ec7u \u1ee9ng ph\u1ea3n h\u1ed3i"),x=g._("Khung cho \u1ea3nh \u0111\u1ea1i di\u1ec7n"),y=g._("B\u1ed9 l\u1ecdc"),z=g._("Hi\u1ec7u \u1ee9ng ki\u1ec3u"),A=g._("N\u1ec1n");c={ongoing:a,getTextForEffectType:function(a){__p&&__p();switch(a){case b("FXMediaEffectType").FRAME:return t;case b("FXMediaEffectType").GENERIC:return u;case b("FXMediaEffectType").MSQRD_MASK:return v;case b("FXMediaEffectType").PARTICLE_EFFECT:return w;case b("FXMediaEffectType").PROFILE_FRAME:return x;case b("FXMediaEffectType").SHADER_FILTER:return y;case b("FXMediaEffectType").STYLE_TRANSFER:return z;case b("FXMediaEffectType").UNDERLAY:return A}return null},getTextForStatus:function(a){return this.getTextForMinorStatus(a)||this.getTextForMajorStatus(a)},getStatusText:function(a){__p&&__p();switch(a){case b("FXEntMediaEffectStatus").DRAFT:return h;case b("FXEntMediaEffectStatus").SCHEDULED:return i;case b("FXEntMediaEffectStatus").ACTIVE:return j;case b("FXEntMediaEffectStatus").INACTIVE:return k;case b("FXEntMediaEffectStatus").COMPLETED:return l;case b("FXEntMediaEffectStatus").ARCHIVED:return m;case b("FXEntMediaEffectStatus").NOT_REVIEWED:return n;case b("FXEntMediaEffectStatus").APPROVED:return o;case b("FXEntMediaEffectStatus").NOT_APPROVED:return q;case b("FXEntMediaEffectStatus").IN_REVIEW:return p;case b("FXEntMediaEffectStatus").UPDATE_REJECTED:return s;case b("FXEntMediaEffectStatus").UPDATE_IN_REVIEW:return r}return null}};e.exports=c}),null);
__d("MediaEffectLocationStrings",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={geoLocation:function(a,b){return g._("{open brace}{latitude}, {longitude}{close brace}",[g._param("open brace","("),g._param("latitude",a),g._param("longitude",b),g._param("close brace",")")])}};e.exports=a}),null);
__d("MediaEffectPlaceDescriptionRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record;g=babelHelpers.inherits(a,c({constrain_eligibility:!1,name:null,key:null,latitude:null,longitude:null,manual_geo:!1,polygons:null,radius:null}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectLocationTargetingMap.react",["cx","fbt","AdsTargetingLocationInlineMap.react","AdsTargetingLocationMapRecord","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","GeoCoordinates","LocationConstants","MediaEffectLocationStrings","MediaEffectPlaceDescriptionRecord","React","Tooltip","XUIButton.react","XUIText.react","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){var a=this.props.onManualLocationToggled||b("emptyFunction");a(!((a=this.props.location)!=null?a.manual_geo:a))}.bind(this),c}a.prototype.$1=function(a){if(!a||!a.latitude||!a.longitude)return null;var c=a.name||b("MediaEffectLocationStrings").geoLocation(a.latitude,a.longitude).toString();if(a.polygons&&a.polygons.length&&!a.manual_geo)return{latitude:a.latitude,longitude:a.longitude,name:c,polygons:a.polygons};return a.radius?{distance_unit:b("LocationConstants").KILOMETER_UNIT,latitude:a.latitude,longitude:a.longitude,name:c,radius:a.radius}:null};a.prototype.render=function(){var a=this.$1(this.props.location),c=b("immutable").Set().asMutable();if(a){a=b("AdsTargetingLocationMapRecord").fromGeoLocation(a).set("popup",b("React").createElement(b("XUIText.react"),null,a.name));c.add(a)}a=c.asImmutable();c=((c=this.props.location)!=null?c.manual_geo:c)?{text:h._("M\u1eb7c \u0111\u1ecbnh"),tooltip:h._("Chuy\u1ec3n sang khu v\u1ef1c m\u1eb7c \u0111\u1ecbnh n\u01a1i c\u00f3 th\u1ec3 ph\u00e1t hi\u1ec7n hi\u1ec7u \u1ee9ng.")}:{text:h._("T\u00f9y ch\u1ec9nh"),tooltip:h._("T\u00f9y ch\u1ec9nh khu v\u1ef1c n\u01a1i c\u00f3 th\u1ec3 ph\u00e1t hi\u1ec7n hi\u1ec7u \u1ee9ng.")};return b("React").createElement(b("FBOverlayContainer.react"),null,b("React").createElement(b("FBOverlayBase.react"),null,b("React").createElement("div",{className:this.props.className},b("React").createElement(b("AdsTargetingLocationInlineMap.react"),{addLocationMode:b("LocationConstants").INCLUDE,disableCollapseButton:!0,enableDropPin:!this.props.disabled&&!this.props.isLoading,excludedLocations:b("immutable").Set(),fitLocations:a,highlightLocations:b("immutable").Set(),locations:a,onAddLocationFromMap:this.props.onLocationSelected||b("emptyFunction"),onCollapseMap:b("emptyFunction"),onPopupMenuItemSelect:b("emptyFunction"),onlyInclusion:!0}))),((a=this.props.location)!=null?a.polygons:a)&&!this.props.disabled?b("React").createElement(b("FBOverlayElement.react"),{horizontal:"left",vertical:"top"},b("React").createElement(b("XUIButton.react"),babelHelpers["extends"]({className:"_mvk",label:c.text,onClick:this.$2,type:"button"},b("Tooltip").propsFor(c.tooltip)))):null)};e.exports=a}),null);
__d("MediaEffectReviewMetadataSection.react",["cx","fbt","AdsTargetingAggregatedMap.react","AdsTargetingLocationMapRecord","FBCollapsibleList.react","LocationConstants","MediaEffectHubStrings","MediaEffectLocationTargetingMap.react","React","XUIText.react","formatDate","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBCollapsibleList.react").Delimiters,k=200;function l(a){var c=b("joinClasses")(a.className,"_1d1k");return b("React").createElement("div",{className:c},b("React").createElement("div",{className:"_1d1h"},b("React").createElement(b("XUIText.react"),{weight:"bold"},a.title)),a.children)}i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.getNone=function(){return h._("Kh\u00f4ng c\u00f3")};a.prototype.getDateString=function(){var a=this.props,c=a.startTime;a=a.endTime;var d;!c?d=b("MediaEffectHubStrings").ongoing:d=h._("{start date} \u2014 {end date}",[h._param("start date",b("formatDate")(c,"M j, Y")),h._param("end date",a?b("formatDate")(a,"M j, Y"):b("MediaEffectHubStrings").ongoing)]);return d};a.prototype.getLocation=function(){var a;return this.props.location?b("React").createElement(b("MediaEffectLocationTargetingMap.react"),{className:"_10ev",disabled:!0,location:this.props.location}):this.props.placeDescription?b("React").createElement(b("AdsTargetingAggregatedMap.react"),{height:k,locationRecords:b("AdsTargetingLocationMapRecord").fromGeoLocations((a={},a[b("LocationConstants").CUSTOM_LOCATIONS]=[this.props.placeDescription],a))}):b("React").createElement(b("XUIText.react"),null,h._("M\u1ecdi v\u1ecb tr\u00ed"))};a.prototype.getKeywords=function(){var a=b("React").createElement(b("FBCollapsibleList.react"),{delimiter:j.COMMA,display:"inline",numVisible:3,showLessLink:!0},this.props.tags.length>0?this.props.tags.map(function(a,c){return b("React").createElement(b("XUIText.react"),{key:c},a.title)}):[b("React").createElement(b("XUIText.react"),{key:"none"},this.getNone())]);return a};a.prototype.render=function(){var a=this.getDateString();return b("React").createElement("div",{className:"_1d1l"},b("React").createElement("div",{className:"_1d1m"},b("React").createElement(l,{title:h._("L\u1ecbch tr\u00ecnh")},b("React").createElement(b("XUIText.react"),{display:"block"},a||this.getNone())),b("React").createElement(l,{title:h._("V\u1ecb tr\u00ed")},this.getLocation()),b("React").createElement(l,{title:h._("T\u1eeb kh\u00f3a")},this.getKeywords())))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectReviewStepConfig",["MediaEffectFlowType","MediaEffectReviewMetadataSection.react","MediaEffectReviewPreviewSection.react"],(function(a,b,c,d,e,f){"use strict";c=(a={},a[b("MediaEffectFlowType").BASIC_HUB]=[b("MediaEffectReviewPreviewSection.react"),b("MediaEffectReviewMetadataSection.react")],a[b("MediaEffectFlowType").TEMPLATE]=[b("MediaEffectReviewPreviewSection.react"),b("MediaEffectReviewMetadataSection.react")],a[b("MediaEffectFlowType").EVENT]=[b("MediaEffectReviewPreviewSection.react")],a[b("MediaEffectFlowType").BIRTHDAY]=[b("MediaEffectReviewPreviewSection.react")],a[b("MediaEffectFlowType").INSTAGRAM_STICKER]=[b("MediaEffectReviewPreviewSection.react"),b("MediaEffectReviewMetadataSection.react")],a);e.exports=c}),null);
__d("MediaEffectTargetingFramePreview.react",["cx","fbt","MediaEffectFramePreviewConfigs","MediaEffectReactFrameEditorPreviewContainer.react","React","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_2dih",display:"block"},h._("Xem tr\u01b0\u1edbc")),b("MediaEffectFramePreviewConfigs").getPreviewTypesForDistributionType(this.props.distributionType).map(function(a,c){return b("React").createElement("div",{className:"_3-97",key:c},b("React").createElement(b("MediaEffectReactFrameEditorPreviewContainer.react"),babelHelpers["extends"]({previewScale:.3},b("MediaEffectFramePreviewConfigs").Configs[a].previewSize)))}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectTargetingFramePreviewContainer.react",["FluxContainer","MediaEffectFrameCreateDialogDataStore","MediaEffectTargetingFramePreview.react","React"],(function(a,b,c,d,e,f){"use strict";function a(){return[b("MediaEffectFrameCreateDialogDataStore")]}function c(){return{distributionType:b("MediaEffectFrameCreateDialogDataStore").getState().distributionType}}function d(a){return b("React").createElement(b("MediaEffectTargetingFramePreview.react"),a)}e.exports=b("FluxContainer").createFunctional(d,a,c)}),null);
__d("MediaEffectTargetingStep.react",["cx","MediaEffectMetadataContainer.react","MediaEffectTargetingFramePreviewContainer.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.context,d=a.bootstrapData;a=a.flowType;return b("React").createElement("div",{className:"_2i5k"},b("React").createElement("div",{className:"_2i5l"},b("React").createElement(b("MediaEffectMetadataContainer.react"),{bootstrapData:d,context:{explainFBOnly:c.explainFBOnly,includesFBOnly:c.includesFBOnly},flowType:a})),b("React").createElement(b("MediaEffectTargetingFramePreviewContainer.react"),null))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectEventDataDispatcher",["GraphAPI","MediaEffectFrameEditorDispatcher","promiseDone"],(function(a,b,c,d,e,f){"use strict";a={loadEventData:function(a){b("promiseDone")(b("GraphAPI")("2.5").object("eventID",a).get({fields:"name, place{name, location{city}}, start_time, end_time"}).then(function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"event/getSuccess",event:a})}))}};e.exports=a}),null);
__d("MediaEffectEventDataStore",["FluxLoadObjectStore","MediaEffectEventDataDispatcher","MediaEffectFrameEditorDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxLoadObjectStore"));g&&g.prototype;a.prototype.reduce=function(a,b){switch(b.type){case"event/getSuccess":return this.__handleOne(a,b.event.id,babelHelpers["extends"]({},b.event));default:return a}};a.prototype.__load=function(a){b("MediaEffectEventDataDispatcher").loadEventData(a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectEventOwnerTile.react",["ix","cx","fbt","Image.react","ProfileTile.react","React","XUIText.react","fbglyph","formatDate","parseISODate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").PureComponent);j&&j.prototype;a.prototype.$1=function(a,c){var d="";a&&(d+=b("formatDate")(b("parseISODate")(a),"D M j"));c&&(d+=" - "+b("formatDate")(b("parseISODate")(c),"D M j"));return d};a.prototype.$2=function(a){var b="";a&&(b+=a.name,a.location&&(b+=", "+a.location.city));return b};a.prototype.render=function(){var a=this.props.event,c=a.start_time,d=a.end_time,e=a.place,f=a.name;a=a.id;c=this.$1(c,d);d=this.$2(e);e=b("React").createElement(b("Image.react"),{src:g("117711")});return this.props.style==="byline"?b("React").createElement("div",{className:"_5zsm"},b("React").createElement("div",{className:"_3rd0"},e),b("React").createElement("div",{className:"_5zsn"},b("React").createElement(b("XUIText.react"),{weight:"bold"},i._("S\u1ef1 ki\u1ec7n:")),b("React").createElement(b("XUIText.react"),{className:"_3-99"},i._("{date range}",[i._param("date range",c)]),c!==""&&d!==""?", ":null,i._("{location}",[i._param("location",d)])))):b("React").createElement(b("ProfileTile.react"),{desc:b("React").createElement(b("XUIText.react"),{size:"meta1"},i._("{date range}",[i._param("date range",c)]),c!==""&&d!==""?", ":null,i._("{location}",[i._param("location",d)])),id:a,imageProps:{src:g("114508"),className:"_3ykz"},name:f,tileProps:{className:"_3yk-",target:"_blank"},titleProps:{className:"_3yk_"}})};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectEventOwnerBylineTileContainer.react",["FluxContainer","LoadingIndicator.react","MediaEffectEventDataStore","MediaEffectEventOwnerTile.react","MediaEffectFrameEditorDispatcher","MediaEffectMetadataStore","React","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(h,b("React").PureComponent);g&&g.prototype;h.getStores=function(){return[b("MediaEffectEventDataStore"),b("MediaEffectMetadataStore")]};h.calculateState=function(){var a=b("MediaEffectMetadataStore").getState().selectedOwnerID;return a?{event:b("MediaEffectEventDataStore").get(a)}:{}};h.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(h.getStores())};h.prototype.render=function(){var event=this.state.event;return event&&event.hasValue()?b("React").createElement(b("MediaEffectEventOwnerTile.react"),{event:b("nullthrows")(this.state.event).getValueEnforcing(),style:"byline"}):b("React").createElement(b("LoadingIndicator.react"),{color:"white",size:"medium"})};function h(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(h)}),null);
__d("MediaEffectReactFrameEditorScalarSizeRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=b("immutable").Record;g=babelHelpers.inherits(h,a({canvas_size_percentage:50,pixels:0}));g&&g.prototype;h.canonical=function(a,b,c){return new h({canvas_size_percentage:100*b/a})};h.prototype.toAbsolute=function(a){return this.canvas_size_percentage/100*a+this.pixels};function h(){g.apply(this,arguments)}e.exports=h}),null);
__d("MediaEffectReactFrameEditorSize",["MediaEffectReactFrameEditorScalarSizeRecord","Vector","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i,j,k;a=b("immutable").Record;g=babelHelpers.inherits(l,a({width:null,height:null}));g&&g.prototype;l.canonical=function(a,c){return new l({width:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.x,a.w(),a.w()/2+a.l),height:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.y,a.h(),a.h()/2+a.t)})};l.prototype.isValid=function(){return Boolean(this.width&&this.height)};l.prototype.toAbsolute=function(a){return new(b("Vector"))(this.width.toAbsolute(a.x),this.height.toAbsolute(a.y))};function l(){g.apply(this,arguments)}h=babelHelpers.inherits(m,a({width:null,aspect_ratio:null}));h&&h.prototype;m.canonical=function(a,c){return new m({width:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.x,a.w(),a.w()/2+a.l),aspect_ratio:a.w()/a.h()})};m.prototype.isValid=function(){return Boolean(this.width&&this.aspect_ratio&&this.aspect_ratio>0)};m.prototype.toAbsolute=function(a){a=this.width.toAbsolute(a.x);return new(b("Vector"))(a,a/this.aspect_ratio)};m.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};m.prototype.getDerivedWidth=function(){return this.width};m.prototype.getDerivedHeight=function(){return new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:this.width.canvas_size_percentage/this.getDerivedAspectRatio()})};m.prototype.getScaledWithWidth=function(){return this};m.prototype.getNotScaledWithWidth=function(){return new p({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};m.prototype.getScaledWithHeight=function(){return new o({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};m.prototype.getNotScaledWithHeight=function(){return this};function m(){h.apply(this,arguments)}i=babelHelpers.inherits(n,a({height:null,aspect_ratio:null}));i&&i.prototype;n.canonical=function(a,c){return new l({height:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.y,a.h(),a.h()/2+a.t),aspect_ratio:a.w()/a.h()})};n.prototype.isValid=function(){return Boolean(this.height&&this.aspect_ratio&&this.aspect_ratio>0)};n.prototype.toAbsolute=function(a){a=this.height.toAbsolute(a.y);return new(b("Vector"))(a*this.aspect_ratio,a)};n.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};n.prototype.getDerivedWidth=function(){return new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:this.height.canvas_size_percentage*this.getDerivedAspectRatio()})};n.prototype.getDerivedHeight=function(){return this.height};n.prototype.getScaledWithWidth=function(){return new o({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};n.prototype.getNotScaledWithWidth=function(){return this};n.prototype.getScaledWithHeight=function(){return this};n.prototype.getNotScaledWithHeight=function(){return new p({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};function n(){i.apply(this,arguments)}j=babelHelpers.inherits(o,a({width:null,height:null,aspect_ratio:null}));j&&j.prototype;o.canonical=function(a,c){return new l({width:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.x,a.w(),a.w()/2+a.l),height:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.y,a.h(),a.h()/2+a.t),aspect_ratio:a.w()/a.h()})};o.prototype.isValid=function(){return Boolean(this.width&&this.height&&this.aspect_ratio&&this.aspect_ratio>0)};o.prototype.toAbsolute=function(a){var c=this.width.toAbsolute(a.x);a=this.height.toAbsolute(a.y);var d=Math.min(c,a*this.aspect_ratio);a=Math.min(a,c/this.aspect_ratio);return new(b("Vector"))(d,a)};o.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};o.prototype.getDerivedWidth=function(){return this.width};o.prototype.getDerivedHeight=function(){return this.height};o.prototype.getScaledWithWidth=function(){return this};o.prototype.getNotScaledWithWidth=function(){return new n({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};o.prototype.getScaledWithHeight=function(){return this};o.prototype.getNotScaledWithHeight=function(){return new m({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()})};function o(){j.apply(this,arguments)}k=babelHelpers.inherits(p,a({width:null,height:null,aspect_ratio:null}));k&&k.prototype;p.canonical=function(a,c){return new l({width:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.x,a.w(),a.w()/2+a.l),height:b("MediaEffectReactFrameEditorScalarSizeRecord").canonical(c.y,a.h(),a.h()/2+a.t),aspect_ratio:a.w()/a.h()})};p.prototype.isValid=function(){return Boolean(this.width&&this.height&&this.aspect_ratio&&this.aspect_ratio>0)};p.prototype.toAbsolute=function(a){var c=this.width.toAbsolute(a.x);a=this.height.toAbsolute(a.y);var d=Math.max(c,a*this.aspect_ratio);a=Math.max(a,c/this.aspect_ratio);return new(b("Vector"))(d,a)};p.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};p.prototype.getDerivedWidth=function(){return this.width};p.prototype.getDerivedHeight=function(){return this.height};p.prototype.getScaledWithWidth=function(){return new m({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()})};p.prototype.getNotScaledWithWidth=function(){return this};p.prototype.getScaledWithHeight=function(){return new n({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};p.prototype.getNotScaledWithHeight=function(){return this};function p(){k.apply(this,arguments)}e.exports={Stretch:l,ScaleWidth:m,ScaleHeight:n,Fit:o,Fill:p}}),null);
__d("MediaEffectEditorAsset",["fbt","MediaEffectEditorFunnelLogger","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorSize","SimpleXUIDialog"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b){this.updateAsset(a,b)}a.prototype.getProps=function(){return{assetID:this.$1,assetData:this.$2}};a.prototype.updateAsset=function(a,b){(a!==this.$1||b!==this.$2)&&(this.$1=a,this.$2=b)};a.prototype.isScalingWithWidth=function(){if(!this.$2)return!1;if(this.isTextAsset())return!1;var a=this.$2.assetSize;return!a?!0:a instanceof b("MediaEffectReactFrameEditorSize").Fit||a instanceof b("MediaEffectReactFrameEditorSize").ScaleWidth};a.prototype.isScalingWithHeight=function(){if(!this.$2)return!1;if(this.isTextAsset())return!0;var a=this.$2.assetSize;return!a?!0:a instanceof b("MediaEffectReactFrameEditorSize").Fit||a instanceof b("MediaEffectReactFrameEditorSize").ScaleHeight};a.prototype.toggleScaleWithWidth=function(){if(!this.$2)return;var a=this.$2.assetSize;if(!a)return;var c=this.isScalingWithWidth()?a.getNotScaledWithWidth():a.getScaledWithWidth();if(c===a)return;b("MediaEffectMetadataActionCreators").updateAssetSize(this.$1,c)};a.prototype.toggleScaleWithHeight=function(){if(!this.$2)return;var a=this.$2.assetSize;if(!a)return;var c=this.isScalingWithHeight()?a.getNotScaledWithHeight():a.getScaledWithHeight();if(c===a)return;b("MediaEffectMetadataActionCreators").updateAssetSize(this.$1,c)};a.prototype.isTextAsset=function(){return this.$2&&this.$2.assetType()==="MediaEffectReactFrameEditorTextAssetRecord"};a.prototype.$3=function(){b("MediaEffectMetadataActionCreators").raiseAsset(this.$1)};a.prototype.$4=function(){b("MediaEffectMetadataActionCreators").raiseAsset(this.$1,!0)};a.prototype.$5=function(){b("MediaEffectMetadataActionCreators").lowerAsset(this.$1)};a.prototype.$6=function(){b("MediaEffectMetadataActionCreators").lowerAsset(this.$1,!0)};a.prototype.$7=function(a){a.target.files[0]&&b("MediaEffectMetadataActionCreators").replaceImage(this.$1,a.target.files[0])};a.prototype.$8=function(){b("MediaEffectMetadataActionCreators").duplicateAsset(this.$1)};a.prototype.$9=function(){this.isTextAsset()||(this.toggleScaleWithWidth(),b("MediaEffectEditorFunnelLogger").logSetScaleWithWidth((!this.isScalingWithWidth()).toString()))};a.prototype.$10=function(){this.isTextAsset()||(this.toggleScaleWithHeight(),b("MediaEffectEditorFunnelLogger").logSetScaleWithHeight((!this.isScalingWithHeight()).toString()))};a.prototype.$11=function(){b("SimpleXUIDialog").showConfirm(this.isTextAsset()?g._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a v\u0103n b\u1ea3n n\u00e0y kh\u00f4ng?"):g._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a th\u00e0nh ph\u1ea7n ngh\u1ec7 thu\u1eadt n\u00e0y kh\u00f4ng?"),null,function(a){return a?b("MediaEffectMetadataActionCreators").deleteAsset(this.$1):null}.bind(this))};e.exports=a}),null);
__d("MediaEffectAssetValidationStore",["FluxMapStore","MediaEffectFrameEditorDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxMapStore"));g&&g.prototype;a.prototype.reduce=function(a,b){switch(b.type){case"asset/validate":return a.set(b.stickerFBID,b.result);default:return a}};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectEditorSideMenu.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={highlightedIndex:null},this.$1=function(a){var b=this.props.items[a];b&&m(b)?this.$2(a):this.$2(null)}.bind(this),this.$3=function(){this.$2(null)}.bind(this),b}a.prototype.$2=function(a){this.setState({highlightedIndex:a})};a.prototype.render=function(){var a=this.props;return b("React").createElement("div",{className:"_2qs3"},b("React").createElement("div",{className:"_2qs4"},a.title),b("React").createElement("ul",{className:"_2qs5",onMouseLeave:this.$3},a.items.map(function(a,c){switch(a.type){case"item":return b("React").createElement(k,{hidden:a.hidden,index:c,isDisabled:a.isDisabled,isFullSize:a.isFullSize,isHighlighted:c===this.state.highlightedIndex,isNoAction:a.isNoAction,key:c,label:a.label,onClick:a.onClick,onMouseEnter:this.$1});case"separator":return b("React").createElement(l,{key:c});default:return null}}.bind(this))))};a.defaultProps={items:[]};d=babelHelpers.inherits(k,b("React").PureComponent);i=d&&d.prototype;function k(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onClick(this.props.index)}.bind(this),this.$2=function(){this.props.onMouseEnter(this.props.index)}.bind(this),b}k.prototype.render=function(){if(this.props.hidden)return null;var a=["_2qs6"];this.props.isHighlighted&&!this.props.isDisabled&&!this.props.isNoAction&&a.push("_2qs8");this.props.isDisabled&&a.push("_2qs9");this.props.isFullSize&&a.push("_3kqu");a=b("joinClasses").apply(null,a);return b("React").createElement("li",{className:a,onClick:this.$1,onMouseEnter:this.$2,role:"menuitem",style:{cursor:this.props.isDisabled||this.props.isNoAction?"default":"pointer"}},this.props.label)};j=babelHelpers.inherits(l,b("React").PureComponent);j&&j.prototype;l.prototype.render=function(){return b("React").createElement("li",{className:"_2qsa"})};function l(){j.apply(this,arguments)}function m(a){return a.type==="item"&&!a.isDisabled&&!a.isNoAction}e.exports=a}),null);
__d("MediaEffectEditorSideMenuContainer.react",["cx","fbt","DOMQuery","FBToggleSwitch.react","FileInput.react","FluxContainer","LeftRight.react","MediaEffectAssetValidationStore","MediaEffectEditorAsset","MediaEffectEditorFunnelLogger","MediaEffectEditorSideMenu.react","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorImageAssetRecord","React","ReactDOM","SimpleXUIDialog","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=[],this.$7=[],this.$8=[],this.$9=function(){var a=this.state.currentAsset;if(!a)return;a=a.getProps();a=a.assetID;b("MediaEffectMetadataActionCreators").raiseAsset(a)}.bind(this),this.$10=function(){var a=this.state.currentAsset;if(!a)return;a=a.getProps();a=a.assetID;b("MediaEffectMetadataActionCreators").raiseAsset(a,!0)}.bind(this),this.$11=function(){var a=this.state.currentAsset;if(!a)return;a=a.getProps();a=a.assetID;b("MediaEffectMetadataActionCreators").lowerAsset(a)}.bind(this),this.$12=function(){var a=this.state.currentAsset;if(!a)return;a=a.getProps();a=a.assetID;b("MediaEffectMetadataActionCreators").lowerAsset(a,!0)}.bind(this),this.$13=function(a){var c=this.state.currentAsset;if(!c)return;c=c.getProps();c=c.assetID;a.target.files[0]&&b("MediaEffectMetadataActionCreators").replaceImage(c,a.target.files[0])}.bind(this),this.$14=function(){var a=this.state.currentAsset;if(!a)return;a=a.getProps();a=a.assetID;b("MediaEffectMetadataActionCreators").duplicateAsset(a)}.bind(this),this.$15=function(){var a=this.state.currentAsset;if(!a)return;a.isTextAsset()||(a.toggleScaleWithWidth(),b("MediaEffectEditorFunnelLogger").logSetScaleWithWidth((!a.isScalingWithWidth()).toString()))}.bind(this),this.$16=function(){var a=this.state.currentAsset;if(!a)return;a.isTextAsset()||(a.toggleScaleWithHeight(),b("MediaEffectEditorFunnelLogger").logSetScaleWithHeight((!a.isScalingWithHeight()).toString()))}.bind(this),this.$17=function(){var a=this.state.currentAsset;if(!a)return;var c=a.getProps(),d=c.assetID;b("SimpleXUIDialog").showConfirm(a.isTextAsset()?h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a v\u0103n b\u1ea3n n\u00e0y kh\u00f4ng?"):h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a th\u00e0nh ph\u1ea7n ngh\u1ec7 thu\u1eadt n\u00e0y kh\u00f4ng?"),null,function(a){return a?b("MediaEffectMetadataActionCreators").deleteAsset(d):null})}.bind(this),c}a.calculateState=function(a){__p&&__p();var c=b("MediaEffectReactFrameEditorCanvasDataStore").getState();if(c.selectedAssets.isEmpty())return{currentAsset:null};var d=b("MediaEffectReactFrameEditorDataStore").getState();d=d.assets.withMutations(function(a){a.forEach(function(c,d){if(c instanceof b("MediaEffectReactFrameEditorImageAssetRecord")){var e=null;c.stickerFBID&&(e=b("MediaEffectAssetValidationStore").get(c.stickerFBID));c=c.set("validationResult",e);a.set(d,c)}})});c=c.selectedAssets.first();d=d.get(c);return a&&a.currentAsset&&a.currentAsset.getProps().assetID===c&&a.currentAsset.getProps().assetData===d?a:{currentAsset:new(b("MediaEffectEditorAsset"))(c,d)}};a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore"),b("MediaEffectAssetValidationStore")]};a.prototype.render=function(){__p&&__p();var a=this.state.currentAsset;if(!a)return b("React").createElement(b("MediaEffectEditorSideMenu.react"),{items:[],title:h._("Ch\u01b0a ch\u1ecdn m\u1ee5c n\u00e0o")});var c=a.isTextAsset();c=[{type:"item",label:h._("\u0110\u01b0a l\u00ean tr\u01b0\u1edbc"),onClick:this.$9},{type:"item",label:h._("\u0110\u01b0a l\u00ean tr\u01b0\u1edbc"),onClick:this.$10},{type:"item",label:h._("Chuy\u1ec3n v\u1ec1 sau"),onClick:this.$11},{type:"item",label:h._("Chuy\u1ec3n v\u1ec1 sau"),onClick:this.$12},{type:"separator"},{type:"item",isFullSize:!0,hidden:c,label:!c&&b("React").createElement(b("FileInput.react"),{accept:"image/x-png, image/jpeg, image/png",containerClassName:"_40-0 _40-1",multiple:!1,onChange:this.$13},b("React").createElement("a",{style:{color:"inherit",textDecoration:"none"}},h._("Thay th\u1ebf ngh\u1ec7 thu\u1eadt"))),onClick:b("emptyFunction")},{type:"item",label:h._("Sao ch\u00e9p"),onClick:this.$14},{type:"item",label:h._("X\u00f3a"),onClick:this.$17},{type:"separator"},{type:"item",label:b("React").createElement("div",{className:"_11o1"},b("React").createElement(b("LeftRight.react"),null,h._("Co l\u1ea1i chi\u1ec1u r\u1ed9ng"),b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,checked:a.isScalingWithWidth(),disabled:c,ref:function(a){return a&&this.$6.push(b("DOMQuery").find(b("ReactDOM").findDOMNode(a),"input"))}.bind(this)})),b("React").createElement("div",{className:"_11o2"})),onClick:this.$15},{type:"item",label:b("React").createElement("div",{className:"_11o1"},b("React").createElement(b("LeftRight.react"),null,h._("Co l\u1ea1i chi\u1ec1u cao"),b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,checked:a.isScalingWithHeight(),disabled:c,ref:function(a){return a&&this.$7.push(b("DOMQuery").find(b("ReactDOM").findDOMNode(a),"input"))}.bind(this)})),b("React").createElement("div",{className:"_11o2"})),onClick:this.$16}];a=a.getProps();a.assetData;return b("React").createElement(b("MediaEffectEditorSideMenu.react"),{items:c,title:h._("H\u00e0nh \u0111\u1ed9ng")})};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react",["ix","cx","Image.react","MediaEffectFrameEditorTemplateGrid.react","React","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$1=function(){this.$2("Birthdays")}.bind(this),this.$3=function(){this.$2("Celebrations")}.bind(this),this.state={selectedCategory:"Birthdays"}}a.prototype.$2=function(a){this.setState({selectedCategory:a})};a.prototype.render=function(){var a=this.state.selectedCategory==="Birthdays"?this.props.birthdayTemplates:this.props.celebrationTemplates;return b("React").createElement("div",null,b("React").createElement("div",{className:"_3-94"},b("React").createElement("a",{className:"_2w6x _3-fi _hto _htp"+(this.state.selectedCategory==="Birthdays"?" _hts":"")+" _3-fj",href:"#",onClick:this.$1},b("React").createElement(b("Image.react"),{className:"_3-8x _3-94",src:this.state.selectedCategory==="Birthdays"?g("114499"):g("122508")}),b("React").createElement("div",null,"Birthdays")),b("React").createElement("a",{className:"_2w6x _3-fi _hto _htt"+(this.state.selectedCategory==="Celebrations"?" _hts":"")+" _3-fj",href:"#",onClick:this.$3},b("React").createElement(b("Image.react"),{className:"_3-8x _3-94",src:this.state.selectedCategory==="Celebrations"?g("114650"):g("122659")}),b("React").createElement("div",null,"Celebrations"))),b("React").createElement(b("MediaEffectFrameEditorTemplateGrid.react"),{activeTemplate:this.props.activeTemplate,templates:a}))};e.exports=a}),null);
__d("MediaEffectFrameEditorDataRecord",["MediaEffectReactFrameEditorImageAssetRecord","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("immutable").List;d=b("immutable").Map;f=b("immutable").Record;g=babelHelpers.inherits(a,f({assets:d(),assetOrder:c(),frameFBID:null,filterID:null,templateFBID:null,containsJPEG:!1}));g&&g.prototype;a.prototype.withNewAsset=function(a,b){return this.withMutations(function(c){c.set("assets",this.assets.set(a,b)).set("assetOrder",this.assetOrder.push(a))}.bind(this))};a.prototype.withDeletedAsset=function(a){var b=this.assetOrder,c=this.assets,d=b.indexOf(a),e=b.splice(d,1),f=c.remove(a);return this.withMutations(function(a){a.set("assets",f).set("assetOrder",e)})};a.prototype.replaceAsset=function(a,b){return this.set("assets",this.assets.set(a,b))};a.prototype.withAssetMutation=function(a,b){var c=this.assets,d=c.get(a);return!d?this:this.set("assets",c.set(a,d.withMutations(b)))};a.prototype.withTextAssetMutation=function(a,c){var d=this.assets,e=d.get(a);if(!e)return this;e instanceof b("MediaEffectReactFrameEditorImageAssetRecord")?e.assocTextAsset&&(e=e.set("assocTextAsset",e.assocTextAsset.withMutations(c))):e=e.withMutations(c);return this.set("assets",d.set(a,e))};a.prototype.withRaisedAsset=function(a,b){return this.$MediaEffectFrameEditorDataRecord1(a,b,1)};a.prototype.withLoweredAsset=function(a,b){return this.$MediaEffectFrameEditorDataRecord1(a,b,-1)};a.prototype.$MediaEffectFrameEditorDataRecord1=function(a,b,c){__p&&__p();var d=this.assetOrder,e=this.assets,f=e.get(a),g=d.indexOf(a);if(g===(c>0?d.size-1:0))return this;b=b?c>0?d.size:0:g+c;for(;b<d.size&&b>0;b+=c){var h=e.get(d.get(b));if(f.assetType()===h.assetType())break}h=d.splice(g,1).splice(b,0,a);return this.set("assetOrder",h)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("SUIMediaEffectTheme",["cssVar","SUIBusinessTheme","SUITheme","SUITypeStyle"],(function(a,b,c,d,e,f,g){"use strict";a={white:"#FFFFFF",blue:"#4080ff",gray:"#bec2c9"};c={SUIToggle:{height:20,off:{hover:{backgroundColor:a.gray,color:a.white},normal:{backgroundColor:a.gray,color:a.white}},on:{hover:{backgroundColor:a.blue,color:a.white},normal:{backgroundColor:a.blue,color:a.white}},switchColor:a.white,typeStyle:new(b("SUITypeStyle"))({color:a.white,fontFamily:"Helvetica, Arial, sans-serif",fontSize:"12px",fontWeight:"700"})}};d=new(b("SUITheme"))({id:"mediaEffect",components:babelHelpers["extends"]({},b("SUIBusinessTheme"),c)});e.exports=d}),null);
__d("MediaEffectFrameEditorDistributionSelector.react",["fbt","MediaEffectFrameDistributionType","MediaEffectMetadataActionCreators","React","SUIMediaEffectTheme","SUIRadioList.react","SUIText.react","suiMargin"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("SUIRadioList.react").Item;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return[b("React").createElement(b("SUIText.react"),{color:"secondary",margin:"_3-94",size:"body3",theme:b("SUIMediaEffectTheme"),weight:"bold"},g._("T\u1ea1o khung cho:")),b("React").createElement(b("SUIRadioList.react"),{margin:"_3-98",onChange:b("MediaEffectMetadataActionCreators").changeDistributionType,theme:b("SUIMediaEffectTheme"),value:this.props.distributionType},b("React").createElement(i,{value:b("MediaEffectFrameDistributionType").CAMERA},g._("M\u00e1y \u1ea3nh Facebook")),b("React").createElement(i,{value:b("MediaEffectFrameDistributionType").PROFILE_PICTURE},g._("\u1ea2nh \u0111\u1ea1i di\u1ec7n")))]};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFrameEditorMultiCategoryTemplateSelector.react",["cx","fbt","MediaEffectFrameEditorTemplateGrid.react","MediaEffectMetadataActionCreators","React","SUIBusinessTheme","SUISelector.react","SUISelectorOption.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$2=function(a){if(a===this.state.selectedCategory)return;this.setState({selectedCategory:a});a=this.$1(a);b("MediaEffectMetadataActionCreators").applyTemplate(a?a.first():null)}.bind(this),this.state={selectedCategory:null}}a.prototype.$1=function(a){return!a?null:this.props.categories.get(a)};a.prototype.$3=function(){return b("React").createElement(b("SUISelector.react"),{canSelectMultiple:!1,onChange:this.$2,theme:b("SUIBusinessTheme"),value:this.state.selectedCategory,width:184},b("React").createElement(b("SUISelectorOption.react"),{value:null},h._("Kh\u00f4ng c\u00f3")),this.props.categories.keySeq().map(function(a){return b("React").createElement(b("SUISelectorOption.react"),{key:a,value:a},a)}))};a.prototype.$4=function(){var a=this.$1(this.state.selectedCategory);return!a?null:b("React").createElement(b("MediaEffectFrameEditorTemplateGrid.react"),{activeTemplate:this.props.activeTemplate,showNoTemplate:!1,templates:a})};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_3-96"},this.$3()),this.$4())};e.exports=a}),null);
__d("WebGLShaderCode",["regeneratorRuntime","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=b("immutable").Set;a.prototype.getDirectDeps=function(){return h()};a.prototype.generateAllCodeFragments=b("regeneratorRuntime").mark(function a(){__p&&__p();var c,d,e,f,g,h,i,j,k,l,m,n;return b("regeneratorRuntime").wrap(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:c=new Set(),d=this.getCodeFragment(),c.add(d),(e=this.getDirectDeps(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 4:if(!f){a.next=10;break}if(!(g>=e.length)){a.next=7;break}return a.abrupt("break",35);case 7:h=e[g++];a.next=14;break;case 10:g=e.next();if(!g.done){a.next=13;break}return a.abrupt("break",35);case 13:h=g.value;case 14:i=h,(j=i.generateAllCodeFragments(),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 16:if(!k){a.next=22;break}if(!(l>=j.length)){a.next=19;break}return a.abrupt("break",33);case 19:m=j[l++];a.next=26;break;case 22:l=j.next();if(!l.done){a.next=25;break}return a.abrupt("break",33);case 25:m=l.value;case 26:n=m;if(c.has(n)){a.next=31;break}a.next=30;return n;case 30:c.add(n);case 31:a.next=16;break;case 33:a.next=4;break;case 35:a.next=37;return d;case 37:case"end":return a.stop()}},a,this)});a.prototype.getAllCodeFragments=function(){return g(this.generateAllCodeFragments())};a.prototype.getCodeFragment=function(){return""};function a(){}e.exports=a}),null);
__d("WebGLShaderLibraryCode",["WebGLShaderCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLShaderCode"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectColorComponentShaderCode",["WebGLShaderLibraryCode"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("WebGLShaderLibraryCode"));g=c&&c.prototype;function a(a){g.constructor.call(this),this.$MediaEffectColorComponentShaderCode1=a||4}a.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    #define MAX_NUM_COMPONENTS "+this.$MediaEffectColorComponentShaderCode1+"\n    // These is not just MAX_NUM_COMPONENTS so we don't have to keep changing\n    // the program all the time. That might be unnecessary though.\n    uniform int u_num_components;\n\n    struct Component\n    {\n      vec3 hsl;\n      vec3 hslwidth;\n    };\n\n    uniform Component u_source[MAX_NUM_COMPONENTS];\n\n    float component_scores[MAX_NUM_COMPONENTS];\n\n    float discreteComponentScore(Component component, vec3 hsl) {\n      float normhuediff = (\n        mod(hsl.x - component.hsl.x + 0.5, 1.0) - 0.5\n      ) / component.hslwidth.x;\n      vec2 normsldiff = (\n        (hsl.yz - component.hsl.yz) / component.hslwidth.yz\n      );\n      vec3 normscore = vec3(\n        (1.0 - abs(normhuediff)) / component.hslwidth.x,\n        (vec2(1.0, 1.0) - abs(normsldiff)) / component.hslwidth.yz\n      );\n      if (!(normscore.x > 0.0 && normscore.x < 1000000.0)) {\n        return -10.0;\n      }\n      if (!(normscore.y > 0.0 && normscore.y < 1000000.0)) {\n        return -10.0;\n      }\n      if (!(normscore.z > 0.0 && normscore.z < 1000000.0)) {\n        return -10.0;\n      }\n      return normscore.x * normscore.y * normscore.z;\n    }\n\n    float lightnessCentrality(float lightness) {\n      return 1.0 - abs(2.0 * lightness - 1.0);\n    }\n\n    float avg(float x, float y) {\n      return (x + y) / 2.0;\n    }\n\n    float getNaturalSaturation(vec3 hsl) {\n      return hsl.y * lightnessCentrality(hsl.z);\n    }\n\n    float getSaturationSignificance(vec3 hsl1, vec3 hsl2) {\n      float saturationSignificance = clamp(\n        avg(\n          lightnessCentrality(hsl1.z),\n          lightnessCentrality(hsl2.z)\n        ),\n        0.01, 1.0\n      );\n      return saturationSignificance;\n    }\n\n    float getHueSignificance(vec3 hsl1, vec3 hsl2) {\n      float sat1 = getNaturalSaturation(hsl1);\n      float sat2 = getNaturalSaturation(hsl2);\n      float saturation = avg(sat1, sat2);\n      float hueSignificance = clamp(\n        saturation,\n        0.01, 1.0\n      );\n      return hueSignificance;\n    }\n\n    float componentScore(Component component, vec3 hsl) {\n      float saturationSignificance = getSaturationSignificance(\n        component.hsl, hsl\n      );\n      float hueSignificance = getHueSignificance(component.hsl, hsl);\n      vec3 width = component.hslwidth + vec3(0.01);\n      width /= vec3(hueSignificance, saturationSignificance, 1.0);\n      float normhuediff = (\n        mod(hsl.x - component.hsl.x + 0.5, 1.0) - 0.5\n      ) / width.x;\n      float normsatdiff = (\n        getNaturalSaturation(hsl) - getNaturalSaturation(component.hsl)\n      ) / width.y;\n      float normlightdiff = (\n        (hsl.z - component.hsl.z) / width.z\n      );\n      vec3 score = max(vec3(\n        (1.0 - abs(normhuediff)),\n        (1.0 - abs(normsatdiff)),\n        (1.0 - abs(normlightdiff))\n      ), vec3(0.0));\n      vec3 normscore = vec3(\n        score.x,\n        score.y,\n        score.z\n      );\n\n      return normscore.x * normscore.y * normscore.z;\n    }\n\n    void computeComponentScores(vec3 hsl) {\n      for (int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        float score = 0.0;\n        if (index < u_num_components) {\n          score = componentScore(u_source[index], hsl);\n        }\n        component_scores[index] = score;\n      }\n    }\n    "};e.exports=a}),null);
__d("MediaEffectImageIOShaderCode",["WebGLShaderLibraryCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLShaderLibraryCode"));g&&g.prototype;a.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    // our texture\n    uniform sampler2D u_image;\n    uniform int u_alpha_premultiplied;\n\n    // the texCoords passed in from the vertex shader.\n    varying vec2 v_texCoord;\n\n    vec4 premultiplyAlpha(vec4 src) {\n      if (u_alpha_premultiplied == 0) {\n        return src;\n      }\n      return vec4(src.rgb * src.a, src.a);\n    }\n\n    vec4 demultiplyAlpha(vec4 src) {\n      if (u_alpha_premultiplied == 0 || src.a == 0.0) {\n        return src;\n      }\n      return vec4(src.rgb / src.a, src.a);\n    }\n\n    vec4 getInputColor() {\n      return demultiplyAlpha(texture2D(u_image, v_texCoord));\n    }\n\n    void setOutputColor(vec4 value) {\n      gl_FragColor = premultiplyAlpha(value);\n    }\n    "};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WebGLShaderMainCode",["WebGLShaderCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLShaderCode"));g&&g.prototype;a.prototype.toString=function(){return this.getAllCodeFragments().join("\n\n")};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WebGLFragmentShaderCode",["WebGLShaderMainCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLShaderMainCode"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WebGLShaderColorTransformCode",["WebGLShaderLibraryCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLShaderLibraryCode"));g&&g.prototype;a.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    float e = 1e-10;\n\n    vec3 hue2rgb(float h) {\n      return clamp(\n        vec3(\n          abs(h*6.0 - 3.0) - 1.0,\n          2.0 - abs(h*6.0 - 2.0),\n          2.0 - abs(h*6.0 - 4.0)\n        ),\n        0.0,\n        1.0\n      );\n    }\n\n    vec3 hsl2rgb(vec3 hsl) {\n      vec3 rgb = hue2rgb(hsl.x);\n      float c = (1.0 - abs(2.0*hsl.z - 1.0)) * hsl.y;\n      return (rgb - 0.5)*c + hsl.z;\n    }\n\n    vec3 rgb2hsl(vec3 rgb){\n      vec3 hsl = vec3(0.0);\n      float minrgb = min(rgb.r, min(rgb.g, rgb.b));\n      float maxrgb = max(rgb.r, max(rgb.g, rgb.b));\n      hsl.z = (maxrgb + minrgb) / 2.0;\n      if (maxrgb > minrgb) {\n        float rgbrange = maxrgb - minrgb;\n        hsl.y = (\n          hsl.z < .05 ?\n          rgbrange / (maxrgb + minrgb) :\n          rgbrange / (2.0 - (maxrgb + minrgb))\n        );\n        if (rgb.r == maxrgb) {\n          hsl.x = (rgb.g - rgb.b) / rgbrange / 6.0;\n        } else if (rgb.g == maxrgb) {\n          hsl.x = (2.0 + (rgb.b - rgb.r) / rgbrange) / 6.0;\n        } else {\n          hsl.x = (4.0 + (rgb.r - rgb.g) / rgbrange) / 6.0;\n        }\n\n        hsl.x = mod(hsl.x, 1.0);\n      }\n      return hsl;\n    }\n    "};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WebGLShaderEaseThroughCode",["WebGLShaderLibraryCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLShaderLibraryCode"));g&&g.prototype;a.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    // A clamped linear interpolation through (0, 0) and (x0, y0)\n    float easeThroughZero(float x0, float y0, float x) {\n      return clamp(x * y0 / x0, 0.0, 1.0);\n    }\n\n    // A clamped linear interpolation through (1, 1) and (x0, y0)\n    float easeThroughOne(float x0, float y0, float x) {\n      return clamp(\n        x * (y0 - 1.0) / (x0 - 1.0) + (x0 - y0) / (x0 - 1.0),\n        0.0, 1.0\n      );\n    }\n\n    // A clamped linear interpolation through (x0, y0) of gradient 1\n    float easeThroughCorner(float x0, float y0, float x) {\n      return clamp(\n        x + (y0 - x0),\n        0.0, 1.0\n      );\n    }\n\n    // A hyperbolic interpolation through (0, 0), (x0, y0) and (1, 1)\n    // Doesn't behave too stably when x0 or y0 is close to 0 or 1\n    float easeThroughRawHyperbola(float x0, float y0, float x) {\n      float a = x0 / y0 * (y0 - 1.0) / (x0 - 1.0) ;\n      return x / (a * (1.0 - x) + x);\n    }\n\n    // The above hyperbolic interpolation patched for individual degenerative\n    // values of x0 and y0.\n    float easeThroughHyperbola(float x0, float y0, float x) {\n      if (x0 == 1.0 || (y0 == 1.0 && x0 != 0.0)) {\n        return easeThroughZero(x0, y0, x);\n      }\n      if (x0 == 0.0 || y0 == 0.0) {\n        return easeThroughOne(x0, y0, x);\n      }\n      return easeThroughRawHyperbola(x0, y0, x);\n    }\n\n    // A hybrid blend of the above, preferring:\n    //  linear through (1, 1) when (x0, y0) close to (0, 0)\n    //  linear through (0, 0) when (x0, y0) close to (1, 1)\n    //  linear of gradient 1 when (x0, y0) close to (0, 1) or (1, 0)\n    //  hyperbolic interpolation when (x0, y0) fairly central\n    float easeThrough(float x0, float y0, float x) {\n      float zeroWeight = x0 * y0;\n      zeroWeight *= zeroWeight;\n      float oneWeight = (1.0 - x0) * (1.0 - y0);\n      oneWeight *= oneWeight;\n      float cornerWeight = y0 * (1.0 - x0) + x0 * (1.0 - y0);\n      cornerWeight *= cornerWeight;\n      float hyperbolaWeight = 16.0 * x0 * y0 * (1.0 - x0) * (1.0 - y0);\n      return (\n        zeroWeight * easeThroughZero(x0, y0, x) +\n        oneWeight * easeThroughOne(x0, y0, x) +\n        cornerWeight * easeThroughCorner(x0, y0, x) +\n        hyperbolaWeight * easeThroughHyperbola(x0, y0, x)\n      ) / (zeroWeight + oneWeight + cornerWeight + hyperbolaWeight);\n    }\n    "};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectColorTransformFragmentShaderCode",["MediaEffectColorComponentShaderCode","MediaEffectImageIOShaderCode","WebGLFragmentShaderCode","WebGLShaderColorTransformCode","WebGLShaderEaseThroughCode","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").Set;g=babelHelpers.inherits(a,b("WebGLFragmentShaderCode"));g&&g.prototype;a.prototype.getDirectDeps=function(){return h.of(new(b("WebGLShaderColorTransformCode"))(),new(b("MediaEffectColorComponentShaderCode"))(),new(b("MediaEffectImageIOShaderCode"))(),new(b("WebGLShaderEaseThroughCode"))())};a.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    #define UNMAPPED_WEIGHT 0.5\n\n    float epsilon = 1e-10;\n\n    uniform Component u_dest[MAX_NUM_COMPONENTS];\n\n    float bounceWrap(float x) {\n      return 1.0 - abs(abs(x) - 1.0);\n    }\n\n    float componentWeight(float score) {\n      if (score > 0.9999) {\n        return 10.0;\n      }\n      return -log(1.0 - score);\n    }\n\n    vec3 componentTransform(Component source, Component dest, vec3 point) {\n      vec3 wrapped = vec3(\n        mod(point.x + dest.hsl.x - source.hsl.x, 1.0),\n        easeThrough(source.hsl.y, dest.hsl.y, point.y),\n        easeThrough(source.hsl.z, dest.hsl.z, point.z)\n      );\n      return wrapped;\n    }\n\n    vec3 colorTransform(vec3 rgb) {\n      vec3 numerator = rgb * UNMAPPED_WEIGHT;\n      vec3 hsl = rgb2hsl(rgb);\n      computeComponentScores(hsl);\n      float denominator = UNMAPPED_WEIGHT;\n      for (int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        if (component_scores[index] <= 0.0) {\n          continue;\n        }\n        Component component = u_source[index];\n        float weight = componentWeight(component_scores[index]);\n        denominator += weight;\n        vec3 transformed = componentTransform(\n          u_source[index], u_dest[index], hsl\n        );\n        numerator += weight * hsl2rgb(transformed);\n      }\n      return numerator / denominator;\n    }\n\n    void main() {\n      vec4 src = getInputColor();\n      setOutputColor(src);\n      if (src.a == 0.0) {\n       return;\n      }\n      vec3 newrgb = colorTransform(src.rgb);\n      setOutputColor(vec4(newrgb, src.a));\n    }\n    "};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectHighlightFragmentShaderCode",["MediaEffectColorComponentShaderCode","MediaEffectImageIOShaderCode","WebGLFragmentShaderCode","WebGLShaderColorTransformCode","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").Set;g=babelHelpers.inherits(a,b("WebGLFragmentShaderCode"));g&&g.prototype;a.prototype.getDirectDeps=function(){return h.of(new(b("WebGLShaderColorTransformCode"))(),new(b("MediaEffectColorComponentShaderCode"))(),new(b("MediaEffectImageIOShaderCode"))())};a.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    uniform int u_highlight_component;\n\n    void main() {\n      vec4 src = getInputColor();\n      setOutputColor(src);\n      if (src.a == 0.0) {\n        return;\n      }\n      vec3 rgb = src.rgb;\n      vec3 hsl = rgb2hsl(rgb);\n      computeComponentScores(hsl);\n      for(int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        if (index == u_highlight_component - 1) {\n          setOutputColor(vec4(\n            rgb,\n            src.a * clamp(componentScore(u_source[index], hsl), 0.0, 1.0))\n          );\n          return;\n        }\n      }\n    }\n    "};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WebGLVertexShaderCode",["WebGLShaderMainCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLShaderMainCode"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectVertexShaderCode",["WebGLVertexShaderCode"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("WebGLVertexShaderCode"));g&&g.prototype;a.prototype.getCodeFragment=function(){return"\n    attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n\n    uniform vec2 u_resolution;\n\n    varying vec2 v_texCoord;\n\n    void main() {\n       // convert the rectangle from pixels to 0.0 to 1.0\n       vec2 zeroToOne = a_position / u_resolution;\n\n       // convert from 0->1 to 0->2\n       vec2 zeroToTwo = zeroToOne * 2.0;\n\n       // convert from 0->2 to -1->+1 (clipspace)\n       vec2 clipSpace = zeroToTwo - 1.0;\n\n       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n       // pass the texCoord to the fragment shader\n       // The GPU will interpolate this value between points.\n       v_texCoord = a_texCoord;\n    }\n    "};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("getErrorNameFromWebGLErrorCode",[],(function(a,b,c,d,e,f){var g={0:"NO_ERROR",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",37442:"CONTEXT_LOST_WEBGL"};function a(a){return!(a in g)?"UNKNOWN_ERROR":g[a]}e.exports=a}),null);
__d("MediaEffectImageTransmogrifier",["invariant","Promise","regeneratorRuntime","EventListener","MediaEffectColorTransformFragmentShaderCode","MediaEffectHighlightFragmentShaderCode","MediaEffectVertexShaderCode","getErrorNameFromWebGLErrorCode"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j;function k(a){var c=new Image();c.crossOrigin="anonymous";c.src=a;a=new(b("Promise"))(function(a,b){c.onload=function(){return a(c)}});return a}function l(c){__p&&__p();if(!a.WebGLRenderingContext)throw new Error("WebGLRenderingContext not available.");var d=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=null,f=null,g=b("EventListener").listen(c,"webglcontextcreationerror",function(a){return f=a.statusMessage});for(var h=0;h<d.length;h++){try{e=c.getContext(d[h],{premultipliedAlpha:!0})}catch(a){}if(e)break}g.remove();if(!e){f||(f="Unknown error.");throw new Error("Failed to acquire rendering context: "+f)}return e}function m(a,c,d){__p&&__p();a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d?1:0);d=a.createTexture();if(!d)throw new Error("Failed to create texture: "+b("getErrorNameFromWebGLErrorCode")(a.getError()));a.bindTexture(a.TEXTURE_2D,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c)}function n(a,b,c,d,e){var f=b;b=b+d;d=c;c=c+e;a.bufferData(a.ARRAY_BUFFER,new Float32Array([f,d,b,d,f,c,f,c,b,d,b,c]),a.STATIC_DRAW)}function o(a){var c=a.createShader(a.VERTEX_SHADER);if(!c)throw new Error("Failed to create vertex shader: "+b("getErrorNameFromWebGLErrorCode")(a.getError()));a.shaderSource(c,new(b("MediaEffectVertexShaderCode"))().toString());a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw new Error("Failed to intialize vertex shader: "+b("getErrorNameFromWebGLErrorCode")(a.getError()));return c}function p(a,c,d,e){__p&&__p();var f=o(a),g=a.createProgram();if(!g)throw new Error("Failed to create shader program: "+b("getErrorNameFromWebGLErrorCode")(a.getError()));a.attachShader(g,f);a.attachShader(g,e);a.linkProgram(g);if(!a.getProgramParameter(g,a.LINK_STATUS))throw new Error("Failed to link shader program: "+b("getErrorNameFromWebGLErrorCode")(a.getError()));f=a.getAttribLocation(g,"a_position");e=a.getAttribLocation(g,"a_texCoord");var h=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,h);n(a,0,0,c,d);c=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),a.STATIC_DRAW);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);a.useProgram(g);a.enableVertexAttribArray(f);a.bindBuffer(a.ARRAY_BUFFER,h);d=2;h=a.FLOAT;var i=!1,j=0,k=0;a.vertexAttribPointer(f,d,h,i,j,k);a.enableVertexAttribArray(e);a.bindBuffer(a.ARRAY_BUFFER,c);a.vertexAttribPointer(e,d,h,i,j,k);return g}function q(a,b,c,d,e,f){__p&&__p();var g=a.getUniformLocation(b,"u_resolution");a.uniform2f(g,a.canvas.width,a.canvas.height);a.viewport(0,0,a.canvas.width,a.canvas.height);g=a.getUniformLocation(b,"u_alpha_premultiplied");a.uniform1i(g,c?1:0);g=a.getUniformLocation(b,"u_num_components");a.uniform1i(g,f);c=a.getUniformLocation(b,"u_highlight_component");a.uniform1i(c,e);for(g=0;g<f;g++){c=a.getUniformLocation(b,"u_source["+g+"].hsl");e=a.getUniformLocation(b,"u_source["+g+"].hslwidth");var h=d.components.get(g);a.uniform3f(c,h.hue,h.saturation,h.lightness);a.uniform3f(e,h.hueVariation,h.saturationVariation,h.lightnessVariation)}}function r(a,b,c,d,e){var f=Math.min(d.components.size,e.components.size);q(a,b,c,d,0,f);for(c=0;c<f;c++){d=a.getUniformLocation(b,"u_dest["+c+"].hsl");var g=a.getUniformLocation(b,"u_dest["+c+"].hslwidth"),h=e.components.get(c);a.uniform3f(d,h.hue,h.saturation,h.lightness);a.uniform3f(g,h.hueVariation,h.saturationVariation,h.lightnessVariation)}}function s(a,b,c,d,e){var f=d.components.size;q(a,b,c,d,e,f)}function t(a){a.drawArrays(a.TRIANGLES,0,6)}function c(a,b,c,d,e,f,g){this.imageURI=a,this.alphaPremultiplied=b,this.sourceColorPalette=c,this.image=d,this.canvas=e,this.glContext=f,this.shaderProgram=g}c.prototype.execute=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$1||(this.$1=this.$2());return a.abrupt("return",this.$1);case 2:case"end":return a.stop()}},null,this)};c.prototype.$2=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(!this.image||this.image.src!==this.imageURI)){d.next=4;break}d.next=3;return b("regeneratorRuntime").awrap(k(this.imageURI));case 3:this.image=d.sent;case 4:this.width=this.image.width;this.height=this.image.height;this.canvas||(this.canvas=document.createElement("canvas"));this.canvas.width=this.width;this.canvas.height=this.height;this.glContext||(this.glContext=l(this.canvas));a=this.glContext;m(a,this.image,this.alphaPremultiplied);this.shaderProgram||(this.shaderProgram=p(a,this.width,this.height,this.getFragmentShader(a)));c=this.shaderProgram;this.configureTransmogrification(a,c);t(a,c);return d.abrupt("return",this);case 17:case"end":return d.stop()}},null,this)};c.prototype.toBlob=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(this.blob){d.next=9;break}d.next=3;return b("regeneratorRuntime").awrap(this.execute());case 3:this.canvas||g(0,undefined);a=this.canvas;c=new(b("Promise"))(function(b,c){a.toBlob(b)});d.next=8;return b("regeneratorRuntime").awrap(c);case 8:this.blob=d.sent;case 9:return d.abrupt("return",this.blob);case 10:case"end":return d.stop()}},null,this)};c.prototype.getFragmentShader=function(a){var c=a.createShader(a.FRAGMENT_SHADER);if(!c)throw new Error("Failed to create fragment shader: "+b("getErrorNameFromWebGLErrorCode")(a.getError()));var d=this.getShaderSource();a.shaderSource(c,d);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw new Error("Failed to intialize fragment shader: "+b("getErrorNameFromWebGLErrorCode")(a.getError()));return c};c.prototype.configureTransmogrification=function(a,b){};c.prototype.getShaderSource=function(){return""};h=babelHelpers.inherits(d,c);i=h&&h.prototype;function d(a,b,c,d,e,f,g,h){i.constructor.call(this,a,b,c,e,f,g,h),this.$ColorTransform1=d}d.prototype.getShaderSource=function(){return new(b("MediaEffectColorTransformFragmentShaderCode"))().toString()};d.prototype.configureTransmogrification=function(a,b){r(a,b,this.alphaPremultiplied,this.sourceColorPalette,this.$ColorTransform1)};h=babelHelpers.inherits(f,c);j=h&&h.prototype;function f(a,b,c,d,e,f,g,h){j.constructor.call(this,a,b,c,e,f,g,h),this.$HighlightTransform1=d}f.prototype.getShaderSource=function(){return new(b("MediaEffectHighlightFragmentShaderCode"))().toString()};f.prototype.configureTransmogrification=function(a,b){s(a,b,this.alphaPremultiplied,this.sourceColorPalette,this.$HighlightTransform1)};e.exports={HighlightTransform:f,ColorTransform:d,Transmogrifier:c}}),null);
__d("MediaEffectFrameEditorColorMappedImage.react",["regeneratorRuntime","EventListener","MediaEffectImageTransmogrifier","React","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.$7=function(a){this.$2=a,a?(this.$4.addSubscriptions(b("EventListener").listen(a,"webglcontextlost",this.$8),b("EventListener").listen(a,"webglcontextrestored",this.$9)),this.$10()):this.$4.release()}.bind(this),this.$8=function(){this.$3=null,this.$5=null}.bind(this),this.$9=function(){this.$10()}.bind(this),this.$4=new(b("SubscriptionsHandler"))()}a.prototype.$10=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(this.$2){a.next=2;break}return a.abrupt("return");case 2:if(this.props.imageURI){a.next=4;break}return a.abrupt("return");case 4:this.props.highlightComponent?this.$6=new(b("MediaEffectImageTransmogrifier").HighlightTransform)(this.props.imageURI,!0,this.props.sourcePalette,this.props.highlightComponent,this.$1,this.$2,this.$3,this.$5):this.props.transformPalette?this.$6=new(b("MediaEffectImageTransmogrifier").ColorTransform)(this.props.imageURI,!0,this.props.sourcePalette,this.props.transformPalette,this.$1,this.$2,this.$3,this.$5):this.$6=null,this.$6&&this.$6.execute().then(function(a){a&&a===this.$6&&(this.$3=a.glContext,this.$1=a.image,this.$5=a.shaderProgram)}.bind(this))["catch"](function(a){});case 6:case"end":return a.stop()}},null,this)};a.prototype.render=function(){this.$10();return b("React").createElement("canvas",{ref:this.$7,style:{width:this.props.size.x,height:this.props.size.y}})};e.exports=a}),null);
__d("MediaEffectFrameEditorPixelCanvas.react",["cx","regeneratorRuntime","Image.react","MediaEffectFrameEditorColorMappedImage.react","MediaEffectFrameRenderer","React","ReactDOM","ResponsiveBlock.react","Vector"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.$4=!1,this.$6=function(event){__p&&__p();var a=this.state,b=a.imageURI;a=a.size;var c=this.$2;if(event.button!==0||!b||!a||!c)return;this.props.onSamplingStart&&!event.shiftKey&&this.props.onSamplingStart();var d=document.createElement("canvas");d.width=a.x*window.devicePixelRatio;d.height=a.y*window.devicePixelRatio;var e=new Image(),f=d.getContext("2d");if(!f)throw new Error("Cannot get rendering context");this.$1=f;this.$4=!0;a=c.getBoundingClientRect();var g=(event.clientX-a.left)*window.devicePixelRatio,h=(event.clientY-a.top)*window.devicePixelRatio;e.onload=function(){f.drawImage(e,0,0);var a=f.getImageData(g,h,1,1);a=a.data;this.props.onAddSample&&this.props.onAddSample([a[0],a[1],a[2],a[3]])}.bind(this);e.src=b}.bind(this),this.$7=function(event){var a=this.$2,b=this.$1,c=this.$4,d=this.props.onAddSample;if(c&&b&&a&&d){c=a.getBoundingClientRect();a=(event.clientX-c.left)*window.devicePixelRatio;c=(event.clientY-c.top)*window.devicePixelRatio;b=b.getImageData(a,c,1,1);a=b.data;d([a[0],a[1],a[2],a[3]])}}.bind(this),this.$8=function(event){if(!this.$4||event.button!==0)return;this.$4=!1;this.$1=null}.bind(this),this.$15=function(a,c){this.setState({size:new(b("Vector"))(a,c)})}.bind(this),this.$11=function(a){if(a){a=b("ReactDOM").findDOMNode(a);this.$2=a instanceof HTMLImageElement?a:null}else this.$2=null}.bind(this),this.state={imageURI:null,size:null}}a.prototype.componentDidMount=function(){this.$3=!0};a.prototype.componentWillUnmount=function(){this.$3=!1};a.prototype.setState=function(a){this.$3&&h.setState.call(this,a)};a.prototype.$5=function(event){event.preventDefault()};a.prototype.$9=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(this.state.size){c.next=2;break}return c.abrupt("return");case 2:c.next=4;return b("regeneratorRuntime").awrap(b("MediaEffectFrameRenderer")(this.props.assets,this.props.assetOrder,this.state.size));case 4:a=c.sent,this.setState({imageURI:a});case 6:case"end":return c.stop()}},null,this)};a.prototype.$10=function(){if(!this.state.imageURI||!this.state.size)return null;var a=!!this.props.onAddSample&&!!this.props.onSamplingStart;return b("React").createElement(b("Image.react"),{onDragStart:this.$5,onMouseDown:a?this.$6:null,onMouseMove:a?this.$7:null,onMouseOut:a?this.$8:null,onMouseUp:a?this.$8:null,ref:this.$11,src:this.state.imageURI,style:{width:this.state.size.x,height:this.state.size.y}})};a.prototype.$12=function(){return!this.state.imageURI||!this.state.size?null:b("React").createElement(b("MediaEffectFrameEditorColorMappedImage.react"),{highlightComponent:this.props.highlightComponent,imageURI:this.state.imageURI,size:this.state.size,sourcePalette:this.props.sourcePalette,transformPalette:this.props.transformPalette})};a.prototype.$13=function(){return this.$10()};a.prototype.$14=function(){if(this.props.transformPalette||this.props.highlightComponent)return this.$12();else return this.$13()};a.prototype.render=function(){this.$9()["catch"](function(a){});return b("React").createElement(b("ResponsiveBlock.react"),{className:"_3g0j",onResize:this.$15},b("React").createElement("div",{className:"_3g0k"},b("React").createElement("div",{className:"_24s9"},this.$14())))};e.exports=a}),null);
__d("MediaEffectFrameEditorPixelCanvasContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorPixelCanvas.react","MediaEffectTemplateDataStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectTemplateDataStore")]};a.calculateState=function(a,c){a=b("MediaEffectTemplateDataStore").getFrameData(c.localTemplateID);return{assets:a.assets,assetOrder:a.assetOrder}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectFrameEditorPixelCanvas.react"),a)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("AssetHorizontalAlignmentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LEFT:"left",RIGHT:"right",CENTER:"center"})}),null);
__d("MediaEffectFrameEditorCardTab.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement("div",null,this.props.children)};function a(){g.apply(this,arguments)}a.defaultProps={activeHeader:null};e.exports=a}),null);
__d("MediaEffectFrameEditorTabbedCard.react",["cx","Grid.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=b("Grid.react").GridItem;c=babelHelpers.inherits(k,b("React").PureComponent);h=c&&c.prototype;function k(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onItemClick(this.props.index)}.bind(this),b}k.prototype.render=function(){return b("React").createElement("a",{href:"#",onClick:this.$1},b("React").createElement("div",{className:"_zn2"+(this.props.active?" _zn4":"")},this.props.active?this.props.activeContent||this.props.content:this.props.content))};d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(a){i.constructor.call(this,a),this.$1=function(a){this.setState({activeTabIndex:a})}.bind(this),this.state={activeTabIndex:null}}a.prototype.render=function(){var a=this.props.children,c=b("React").Children.map(a.filter(function(a){return!!a}),function(a,c){return b("React").createElement(j,null,b("React").createElement(k,{active:c===this.state.activeTabIndex,activeContent:a.props.activeHeader,content:a.props.header,index:c,onItemClick:this.$1}))}.bind(this));a=b("React").Children.map(a.filter(function(a){return!!a}),function(a,c){return b("React").createElement("div",{className:(c===this.state.activeTabIndex?"_zn4":"")+(c!==this.state.activeTabIndex?" _zn8":"")},a)}.bind(this));return b("React").createElement("div",{className:"_zn9",onMouseDown:this.props.onMouseDown},b("React").createElement(b("Grid.react"),{cols:c.length,style:{margin:"auto"}},c),a)};e.exports=a}),null);
__d("MediaEffectFrameEditorTextPropertiesDialog.react",["cx","ix","AssetHorizontalAlignmentType","Grid.react","Image.react","MediaEffectEditorFunnelLogger","MediaEffectFrameEditorCardTab.react","MediaEffectFrameEditorTabbedCard.react","MediaEffectMetadataActionCreators","React","XUIContextualDialog.react","color-picker","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l=b("Grid.react").GridItem,m=b("immutable").Set,n=h("86665"),o=h("86667"),p=h("86669"),q=h("86666"),r=h("86668"),s=h("86670"),t=h("86671"),u=h("86672"),v=[b("AssetHorizontalAlignmentType").LEFT,b("AssetHorizontalAlignmentType").CENTER,b("AssetHorizontalAlignmentType").RIGHT];c=babelHelpers.inherits(w,b("React").PureComponent);i=c&&c.prototype;function w(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onChange(this.props.value)}.bind(this),b}w.prototype.render=function(){return b("React").createElement("a",{href:"#",onClick:this.$1},this.props.children)};d=babelHelpers.inherits(x,b("React").PureComponent);j=d&&d.prototype;function x(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onChange(this.props.font)}.bind(this),b}x.prototype.render=function(){return b("React").createElement("div",{onClick:this.$1,role:"menuitem",tabIndex:"0"},b("React").createElement("div",{className:"_1jhm"},b("React").createElement("div",{className:"_1jhn"},this.props.isSelected?"\u2713":null),b("React").createElement("span",{style:{fontFamily:this.props.font.getFontFamily()}},this.props.font.getName())))};f=babelHelpers.inherits(a,b("React").PureComponent);k=f&&f.prototype;function a(a){k.constructor.call(this,a),this.$4=function(a){b("MediaEffectMetadataActionCreators").updateTextFonts(m([this.props.localAssetID]),a)}.bind(this),this.$3=function(a){var c=this.props.assetData.font.getID()===a.getID();return b("React").createElement(l,{key:a.getID()},b("React").createElement(x,{font:a,isSelected:c,onChange:this.$4}))}.bind(this),this.$7=function(a){b("MediaEffectMetadataActionCreators").updateTextAlignments(m([this.props.localAssetID]),a)}.bind(this),this.$10=function(a){b("MediaEffectMetadataActionCreators").updateTextColors(m([this.props.localAssetID]),a),this.$1=a}.bind(this),this.$9=function(){this.$1&&(b("MediaEffectEditorFunnelLogger").logChangeTextColor(this.$1),this.$1=null)}.bind(this),this.$11=function(){return this.props.context}.bind(this),this.$1=null}a.prototype.$2=function(){return b("React").createElement(b("MediaEffectFrameEditorCardTab.react"),{activeHeader:b("React").createElement("div",{className:"_1jhq"},b("React").createElement(b("Image.react"),{className:"_1jhr",src:u})),header:b("React").createElement("div",{className:"_1jhq"},b("React").createElement(b("Image.react"),{className:"_1jhr",src:t})),key:"fonts"},b("React").createElement(b("Grid.react"),{alignh:"left",alignv:"middle",cols:1,width:"100%"},this.props.fonts.map(this.$3)))};a.prototype.$5=function(){return!this.props.assetData.isDynamicText()?null:b("React").createElement(b("MediaEffectFrameEditorCardTab.react"),{activeHeader:this.$6(this.props.assetData.textHorizontalAlignment,!0),header:this.$6(this.props.assetData.textHorizontalAlignment,!1),key:"alignment"},b("React").createElement(b("Grid.react"),{alignh:"center",alignv:"middle",cols:v.length,style:{margin:"auto"}},v.map(function(a){return b("React").createElement(l,{key:a},b("React").createElement(w,{onChange:this.$7,value:a},this.$6(a,a===this.props.assetData.textHorizontalAlignment)))}.bind(this))))};a.prototype.$6=function(a,c){return b("React").createElement("div",{className:"_1jhq"},b("React").createElement(b("Image.react"),{className:"_1jhr",src:{center:c?q:n,left:c?r:o,right:c?s:p}[a]}))};a.prototype.$8=function(){return b("React").createElement(b("MediaEffectFrameEditorCardTab.react"),{header:b("React").createElement("div",{className:"_1jhq"},b("React").createElement("div",{className:"_1jhs"},b("React").createElement("div",{className:"_1jht",style:{backgroundColor:this.props.assetData.color}})))},b("React").createElement("div",{className:"_1jhu",onMouseLeave:this.$9,onMouseUp:this.$9},b("React").createElement(b("color-picker"),{className:"_1jhv",color:this.props.assetData.color,onChange:this.$10})))};a.prototype.$12=function(a){a.preventDefault()};a.prototype.render=function(){return b("React").createElement("div",{className:"_1jhw"},b("React").createElement(b("XUIContextualDialog.react"),{alignment:"center",autoFocus:!1,contextRef:this.$11,key:"contextualDialog",position:"below",shown:this.props.shown,width:b("XUIContextualDialog.react").WIDTH.NORMAL},b("React").createElement(b("MediaEffectFrameEditorTabbedCard.react"),{onMouseDown:this.$12},this.$2(),this.$5(),this.$8())))};e.exports=a}),null);
__d("MediaEffectFrameEditorTextPropertiesDialogContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorTextPropertiesDialog.react","MediaEffectReactFrameEditorCanvasDataStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorCanvasDataStore")]};a.calculateState=function(a,c){return{fonts:b("MediaEffectReactFrameEditorCanvasDataStore").getFonts()}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectFrameEditorTextPropertiesDialog.react"),a)};function a(){g.apply(this,arguments)}a.defaultProps={};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectFramePhonePreview.react",["cx","Image.react","MediaEffectFramePreviewConfigs","MediaEffectFramePreviewTypes","MediaEffectReactFrameEditorPreviewCanvas.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.previewHeight,d=a.previewType;a=a.previewWidth;var e=this.props.previewImage;if(!e)switch(d){case b("MediaEffectFramePreviewTypes").PORTRAIT:e="/images/media_effect/frame_preview/phone_portrait.png";break;case b("MediaEffectFramePreviewTypes").LANDSCAPE:e="/images/media_effect/frame_preview/phone_landscape.png";break;case b("MediaEffectFramePreviewTypes").PROFILE:e="/images/media_effect/frame_preview/phone_profile.png";break;case b("MediaEffectFramePreviewTypes").SQUARE:e="/images/media_effect/frame_preview/phone_square.png";break;case b("MediaEffectFramePreviewTypes").CIRCLE:e="/images/media_effect/frame_preview/phone_circle.png";break}return b("React").createElement("div",{className:"_3076",style:{height:c,width:a}},b("React").createElement("div",{className:(d!==b("MediaEffectFramePreviewTypes").LANDSCAPE?"_5znd":"")+(d===b("MediaEffectFramePreviewTypes").LANDSCAPE?" _5znl":"")},b("React").createElement("div",{className:(d===b("MediaEffectFramePreviewTypes").PROFILE?"_60qj":"")+(d===b("MediaEffectFramePreviewTypes").SQUARE?" _6dlu":"")+(d===b("MediaEffectFramePreviewTypes").CIRCLE?" _6dlv":"")},b("React").createElement(b("MediaEffectReactFrameEditorPreviewCanvas.react"),babelHelpers["extends"]({},this.props,{isCircle:this.props.previewType===b("MediaEffectFramePreviewTypes").CIRCLE,previewHeight:c*b("MediaEffectFramePreviewConfigs").Configs[d].phonePreviewRatio.verticalRatio,previewWidth:a*b("MediaEffectFramePreviewConfigs").Configs[d].phonePreviewRatio.horizontalRatio})))),b("React").createElement(b("Image.react"),{className:"_43y6",height:c,src:e,width:a}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFramePhonePreviewContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFramePhonePreview.react","MediaEffectFramePreviewConfigs","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.calculateState=function(){var a=b("MediaEffectReactFrameEditorDataStore").getState(),c=b("MediaEffectReactFrameEditorCanvasDataStore").getState();return{assets:a.assets,assetOrder:a.assetOrder,backgroundColor:c.backgroundColor,backgroundImage:c.backgroundImage}};a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore")]};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){var a=this.props,c=a.previewType;a=babelHelpers.objectWithoutProperties(a,["previewType"]);return b("React").createElement(b("MediaEffectFramePhonePreview.react"),babelHelpers["extends"]({previewType:c||b("MediaEffectFramePreviewConfigs").getPreviewTypeFromSize(babelHelpers["extends"]({},a,{isCircle:!1}))},a,this.state))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectFrameRenderer",["Promise","regeneratorRuntime","MediaEffectReactFrameEditorImageAssetRecord","Vector","mediaEffectGKCheck"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=800,h=.625;function i(a){var c=new Image();c.crossOrigin="anonymous";c.src=a;a=new(b("Promise"))(function(a,b){c.onload=function(){return a(c)}});return a}function j(a,c,d,e){__p&&__p();var f,g,h;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(i(e.getURI()));case 2:f=j.sent;g=e.assetSize;if(g){j.next=6;break}throw new Error("Asset size not set",e);case 6:g.isValid()||(g=g.set("aspect_ratio",f.width/f.height));if(g.isValid()){j.next=9;break}throw new Error("Asset size not valid",e);case 9:a=g.toAbsolute(d),h=e.position.toAbsolute(d,a),c.drawImage(f,h.getLeft(),h.getTop(),h.getWidth(),h.getHeight());case 12:case"end":return j.stop()}},null,this)}function k(a,c,d,e){__p&&__p();var f,g,h,i,j;return b("regeneratorRuntime").async(function(b){__p&&__p();while(1)switch(b.prev=b.next){case 0:f=e.assetSize;if(f){b.next=3;break}throw new Error("Asset size not set",e);case 3:if(f.isValid()){b.next=5;break}throw new Error("Asset size not valid",e);case 5:a=f.toAbsolute(d);g=e.position.toAbsolute(d,a);h=g.getHeight()+"px";i=e.font.getFontFamily();c.font=h+" "+i;c.fillStyle=e.color;c.textAlign=e.textHorizontalAlignment;j=d.x/2;b.t0=e.textHorizontalAlignment;b.next=b.t0==="left"?16:b.t0==="center"?18:b.t0==="right"?20:22;break;case 16:j=g.getLeft();return b.abrupt("break",22);case 18:j=g.getCenter().x;return b.abrupt("break",22);case 20:j=g.getRight();return b.abrupt("break",22);case 22:c.fillText(e.content,j,g.getBottom(),g.getWidth());case 23:case"end":return b.stop()}},null,this)}function l(a,c,d,e){__p&&__p();return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:if(!(e instanceof b("MediaEffectReactFrameEditorImageAssetRecord"))){f.next=5;break}f.next=3;return b("regeneratorRuntime").awrap(j(a,c,d,e));case 3:f.next=7;break;case 5:f.next=7;return b("regeneratorRuntime").awrap(k(a,c,d,e));case 7:case"end":return f.stop()}},null,this)}function m(a,c,d){__p&&__p();var e,f,g;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:e=c.map(function(b){return a.get(b)});f=document.createElement("canvas");f.width=d.x;f.height=d.y;g=f.getContext("2d",{premultipliedAlpha:!0});if(g){h.next=7;break}throw new Error("Cannot get rendering context");case 7:h.next=9;return b("regeneratorRuntime").awrap(b("Promise").all(e.map(function(a){return l(f,g,d,a)}).toArray()));case 9:return h.abrupt("return",f);case 10:case"end":return h.stop()}},null,this)}function a(a,c,d){__p&&__p();var e,f,i,j,k,l,n,o,p,q,r,s,t,u;return b("regeneratorRuntime").async(function(v){__p&&__p();while(1)switch(v.prev=v.next){case 0:if(!(d.x===0||d.y===0)){v.next=2;break}return v.abrupt("return",0);case 2:e=Math.min(d.y,g);f=e*d.x/d.y;i=e;v.next=7;return b("regeneratorRuntime").awrap(m(a,c,new(b("Vector"))(f,i)));case 7:j=v.sent;k=j.getContext("2d");if(k){v.next=11;break}throw new Error("Cannot get rendering context");case 11:l=0;n=0;o=i;p=f;b("mediaEffectGKCheck")("media_effect_coverage_test_v2")&&(p=Math.floor(f*h),l=Math.floor((f-p)/2),o=Math.floor(i*h),n=Math.floor((i-o)/2));q=p*o;r=k.getImageData(l,n,p,o),s=r.data;t=0;for(u=3;u<s.length;u+=4)t+=s[u];return v.abrupt("return",t/(255*q));case 21:case"end":return v.stop()}},null,this)}function c(a,c,d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(m(a,c,d.mul(window.devicePixelRatio)));case 2:e=f.sent;return f.abrupt("return",e.toDataURL());case 4:case"end":return f.stop()}},null,this)}c.percentageCovered=a;e.exports=c}),null);
__d("MediaEffectWarnings.react",["cx","List.react","React","XUICard.react","XUICardSection.react","XUINotice.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.message,d=a.items,e=a.use,f=a.className;a=a.onDismiss;d=d&&d.length>0?b("React").createElement(b("List.react"),{border:"none",className:"_45qz"},d.map(function(a,c){return b("React").createElement("li",{key:c},a.trim())})):null;return b("React").createElement(b("XUICard.react"),{className:b("joinClasses")(f,"_2ex6 _3-8x _190n")},b("React").createElement(b("XUICardSection.react"),{background:"transparent",className:"_190n",style:{borderTop:"none"}},b("React").createElement(b("XUINotice.react"),{onDismiss:a,use:e||"warn"},c,d)))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectRejectedReviewResult.react",["cx","fbt","Link.react","MediaEffectWarnings.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.props.reasons;if(!a||a.length===0)return null;a=a.map(function(a){return typeof a==="string"?a.trim():a}).filter(Boolean);var c=b("React").createElement(b("Link.react"),{href:"/legal/camera_effects_platform_terms",target:"_blank"},h._("\u0111i\u1ec1u kho\u1ea3n")),d=b("React").createElement(b("Link.react"),{href:"/legal/camera_effects_platform_policies",target:"_blank"},h._("ch\u00ednh s\u00e1ch."));c=this.props.isTrailingReview?h._("Hi\u1ec7u \u1ee9ng c\u1ee7a b\u1ea1n ch\u01b0a g\u1eedi \u0111\u01b0\u1ee3c do kh\u00f4ng \u0111\u00e1p \u1ee9ng {terms} v\u00e0 {policies} c\u1ee7a N\u1ec1n t\u1ea3ng hi\u1ec7u \u1ee9ng m\u00e1y \u1ea3nh",[h._param("terms",c),h._param("policies",d)]):h._("Hi\u1ec7u \u1ee9ng c\u1ee7a b\u1ea1n ch\u01b0a \u0111\u01b0\u1ee3c ph\u00ea duy\u1ec7t do kh\u00f4ng \u0111\u00e1p \u1ee9ng {terms} v\u00e0 {policies} c\u1ee7a n\u1ec1n t\u1ea3ng hi\u1ec7u \u1ee9ng m\u00e1y \u1ea3nh",[h._param("terms",c),h._param("policies",d)]);return b("React").createElement(b("MediaEffectWarnings.react"),{className:"_21ks",items:a,message:c})};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFullscreenFrameEditor.react",["cx","ix","Image.react","MediaEffectFullscreenFrameEditorControls.react","MediaEffectFullscreenFrameEditorPreviewPanelContainer.react","MediaEffectMetadataActionCreators","MediaEffectQEUtils","MediaEffectReactFrameEditorCanvasContainer.react","MediaEffectRejectedReviewResult.react","React","Vector"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.$1=function(a){var c=a.files;if(c)for(var d=0;d<c.length;d++){var e=c.item(d);e&&b("MediaEffectMetadataActionCreators").addImage(e)}a.value=""};a.prototype.$2=function(){var a=this.props.rejectReasons;return a&&a.length!==0?b("React").createElement(b("MediaEffectRejectedReviewResult.react"),{reasons:a}):null};a.prototype.render=function(){return b("React").createElement("div",{className:"_1skh"},b("React").createElement("div",null,b("React").createElement(b("MediaEffectFullscreenFrameEditorControls.react"),{assetNum:this.props.assetNum,cameraEnabled:this.props.cameraEnabled,cameraPaused:this.props.cameraPaused,canvasBgColor:this.props.canvasBgColor,context:this.props.context,distributionType:this.props.distributionType,filterID:this.props.filterID,filtersData:this.props.filtersData,flowType:this.props.flowType,fontColor:this.props.fontColor,frameData:this.props.frameData,isFrameValid:this.props.isFrameValid,isValidating:this.props.isValidating,loading:this.props.loading,selectedTextIDs:this.props.selectedTextIDs}),this.$2()),b("React").createElement("div",{className:"_2yvx"},b("React").createElement(b("MediaEffectReactFrameEditorCanvasContainer.react"),{bootstrapData:this.props.frameData,enableEditorFreeText:this.props.context.enableEditorFreeText,enableFontSettingsDialog:this.props.context.enableFontSettingsDialog,includesPhoneFrame:b("MediaEffectQEUtils").shouldDefaultToPortrait(this.props.flowType),showTitle:!1})),b("React").createElement("div",{className:"_1skk"},b("React").createElement(b("MediaEffectFullscreenFrameEditorPreviewPanelContainer.react"),{previewScale:.3,previewSize:new(b("Vector"))(400,225)})),b("React").createElement("div",{className:"_zn8"},b("React").createElement(b("Image.react"),{src:h("86663")}),b("React").createElement(b("Image.react"),{src:h("86664")})))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFullscreenFrameEditorContainer.react",["FluxContainer","MediaEffectFrameCreateDialogDataStore","MediaEffectFullscreenFrameEditor.react","MediaEffectMetadataStore","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=function(a){return a?a.assetType()==="MediaEffectReactFrameEditorTextAssetRecord":!1},i=function(a){return a?a.assetType()==="MediaEffectReactFrameEditorImageAssetRecord":!1};g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectFrameCreateDialogDataStore"),b("MediaEffectMetadataStore"),b("MediaEffectReactFrameEditorCanvasDataStore"),b("MediaEffectReactFrameEditorDataStore")]};a.calculateState=function(a,c){var d=b("MediaEffectReactFrameEditorDataStore").getState();a=b("MediaEffectReactFrameEditorCanvasDataStore").getState();c=b("MediaEffectFrameCreateDialogDataStore").getState();var e=c.flowType,f=a.selectedAssets.filter(function(a){return h(d.assets.get(a))}),g=d.assets.some(function(a){return i(a)&&!a.stickerFBID});return{canvasBgColor:a.backgroundColor,distributionType:c.distributionType,filterID:d.filterID,flowType:e,fontColor:f.size>0?d.assets.get(f.first()).color:"#ffffff",loading:g,selectedTextIDs:f,cameraEnabled:a.cameraSource!=null,cameraPaused:a.cameraPaused,isFrameValid:b("MediaEffectReactFrameEditorDataStore").isValidForSubmit(),isValidating:b("MediaEffectFrameCreateDialogDataStore").isValidating(),rejectReasons:b("MediaEffectMetadataStore").getState().get("rejectReasons"),assetNum:d.assets.size}};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectFullscreenFrameEditor.react"),a)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectFullscreenFrameEditorControls.react",["cx","fbt","ix","FileInput.react","FrameEditorSupportedGeneratedText","Image.react","MediaEffectEditorSideMenuContainer.react","MediaEffectFlowType","MediaEffectFrameEditorDistributionSelector.react","MediaEffectFrameEditorTemplatePanelContainer.react","MediaEffectMetadataActionCreators","MediaEffectUserContext","PopoverMenu.react","React","ReactXUIMenu","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react","XUIError.react","gkx","mediaEffectGKCheck"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactXUIMenu").Item;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={uploadArtTooltipShown:!1},this.$3=function(a){a=a.target;a instanceof HTMLInputElement&&this.$4(a)}.bind(this),b}a.prototype.$1=function(){return b("React").createElement(b("ReactXUIMenu"),{onItemClick:this.$2},this.props.context.enableEditorFreeText?b("React").createElement(k,{key:"freetext",value:null},"Free text"):null,Object.keys(b("FrameEditorSupportedGeneratedText")).map(function(a){return b("React").createElement(k,{key:a,value:a},b("FrameEditorSupportedGeneratedText")[a])}))};a.prototype.$2=function(a,c){b("MediaEffectMetadataActionCreators").addText(c.item.getValue())};a.prototype.$4=function(a){var c=a.files;if(c)for(var d=0;d<c.length;d++){var e=c.item(d);e&&b("MediaEffectMetadataActionCreators").addImage(e)}a.value=""};a.prototype.$5=function(){if(this.props.isValidating&&this.props.assetNum===0)if(this.props.context.enableEditorFreeText)return h._("Vui l\u00f2ng ch\u00e8n m\u1ed9t v\u00e0i v\u0103n b\u1ea3n ho\u1eb7c m\u1ed9t t\u00e0i s\u1ea3n ngh\u1ec7 thu\u1eadt \u0111\u1ec3 ti\u1ebfp t\u1ee5c");else return h._("Vui l\u00f2ng ch\u00e8n m\u1ed9t t\u00e0i s\u1ea3n ngh\u1ec7 thu\u1eadt \u0111\u1ec3 ti\u1ebfp t\u1ee5c");return null};a.prototype.$6=function(){var a=h._("Nh\u1eadp v\u0103n b\u1ea3n t\u1ea1i \u0111\u00e2y").toString();b("MediaEffectMetadataActionCreators").addText(a,null,null)};a.prototype.$7=function(){var a=b("React").createElement(b("XUIContextualDialog.react"),{contextRef:function(){return this.uploadArtButton}.bind(this),hideOnBlur:!0,hoverShowDelay:1e3,hoverContextRef:function(){return this.uploadArtButton}.bind(this),position:"right",shown:this.state.uploadArtTooltipShown,width:b("XUIContextualDialog.react").WIDTH.NORMAL},b("React").createElement(b("XUIContextualDialogTitle.react"),null,h._("T\u1ea3i l\u00ean t\u00e1c ph\u1ea9m ngh\u1ec7 thu\u1eadt")),b("React").createElement(b("XUIContextualDialogBody.react"),null,h._("T\u1ea3i l\u00ean t\u1ec7p PNG c\u00f3 n\u1ec1n trong su\u1ed1t. B\u1ea1n c\u00f3 th\u1ec3 t\u1ea3i l\u00ean nhi\u1ec1u t\u1ec7p PNG c\u00f9ng m\u1ed9t l\u00fac.")));return b("React").createElement(b("FileInput.react"),{accept:"image/x-png, image/jpeg, image/png",multiple:!0,onChange:this.$3,onMouseEnter:function(){this.setState({uploadArtTooltipShown:!0})}.bind(this),onMouseLeave:function(){this.setState({uploadArtTooltipShown:!1})}.bind(this)},b("React").createElement("a",{className:"_2w6x _3-fi _3-fj",href:"#"},b("React").createElement(b("Image.react"),{className:"_3-8x",height:"44",src:i("86673"),width:"44"}),b("React").createElement("div",{ref:function(a){this.uploadArtButton=a}.bind(this)}),a,b("React").createElement("div",null,h._("T\u1ea3i \u1ea3nh l\u00ean"))))};a.prototype.$8=function(){return b("React").createElement("a",{className:"_2w6x _3-fi _3-fj",href:"#",onClick:this.$6},b("React").createElement(b("Image.react"),{className:"_3-8x",height:"44",src:i("86675"),width:"44"}),b("React").createElement("div",null,h._("Ch\u00e8n v\u0103n b\u1ea3n")))};a.prototype.$9=function(){return b("React").createElement(b("PopoverMenu.react"),{alignv:"middle",menu:this.$1()},b("React").createElement("a",{className:"_2w6x _3-fi _3-fj",href:"#"},b("React").createElement(b("Image.react"),{className:"_3-8x",height:"44",src:i("86675"),width:"44"}),b("React").createElement("div",null,"Text")))};a.prototype.$10=function(){return b("MediaEffectUserContext").includesFBOnly?this.$9():this.$8()};a.prototype.render=function(){var a=b("mediaEffectGKCheck")("media_effect_template")&&this.props.flowType!==b("MediaEffectFlowType").EVENT&&this.props.flowType!==b("MediaEffectFlowType").TEMPLATE,c=this.$5();return b("React").createElement("div",null,b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg")&&this.props.flowType!==b("MediaEffectFlowType").TEMPLATE&&b("React").createElement(b("MediaEffectFrameEditorDistributionSelector.react"),{distributionType:this.props.distributionType}),b("React").createElement(b("XUIError.react"),{xuiError:c},b("React").createElement("div",{className:c?"_3gvu":""},b("React").createElement("div",{className:"_1pbz _3-96"},this.$7(),this.props.context.enableEditorFreeText||b("MediaEffectUserContext").includesFBOnly?this.$10():null),a?b("React").createElement(b("MediaEffectFrameEditorTemplatePanelContainer.react"),null):null)),b("React").createElement(b("MediaEffectEditorSideMenuContainer.react"),{flowType:this.props.flowType}))};e.exports=a}),null);
__d("MediaEffectFullscreenFrameEditorPreviewPanel.react",["ix","cx","fbt","Image.react","MediaEffectFlowType","MediaEffectFrameDistributionType","MediaEffectReactFrameEditorPreviewContainer.react","React","SUIMediaEffectTheme","SUIText.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react","fbglyph","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={showPreviewFormatTooltip:!1},b}a.prototype.$1=function(){if(b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg")&&this.props.flowType!==b("MediaEffectFlowType").TEMPLATE)return b("React").createElement("div",null,b("React").createElement(b("SUIText.react"),{color:"secondary",size:"body3",theme:b("SUIMediaEffectTheme"),weight:"bold"},i._("Xem tr\u01b0\u1edbc")),b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("SUIText.react"),{color:"secondary",size:"meta1",theme:b("SUIMediaEffectTheme")},this.props.distributionType===b("MediaEffectFrameDistributionType").PROFILE_PICTURE?i._("\u1ea2nh \u0111\u1ea1i di\u1ec7n c\u00f3 th\u1ec3 xu\u1ea5t hi\u1ec7n \u1edf d\u1ea1ng tr\u00f2n ho\u1eb7c vu\u00f4ng t\u00f9y v\u00e0o ch\u1ebf \u0111\u1ed9 xem. \u0110\u1ea3m b\u1ea3o khung c\u1ee7a b\u1ea1n kh\u1edbp c\u1ea3 d\u1ea1ng tr\u00f2n v\u00e0 d\u1ea1ng vu\u00f4ng."):i._("Khung d\u00e0nh cho m\u00e1y \u1ea3nh Facebook ph\u1ea3i kh\u1edbp v\u1edbi t\u1ef7 l\u1ec7 khung h\u00ecnh ch\u1eef nh\u1eadt."))));var a=b("React").createElement(b("Image.react"),{src:g("126340")}),c=b("React").createElement(b("XUIContextualDialog.react"),{contextRef:function(){return this.previewFormatsTitle}.bind(this),hideOnBlur:!0,hoverContextRef:function(){return this.previewFormatsTitle}.bind(this),hoverShowDelay:1e3,position:"left",shown:this.state.showPreviewFormatTooltip,width:b("XUIContextualDialog.react").WIDTH.NORMAL},b("React").createElement(b("XUIContextualDialogTitle.react"),null,i._("Xem tr\u01b0\u1edbc \u0111\u1ecbnh d\u1ea1ng")),b("React").createElement(b("XUIContextualDialogBody.react"),null,i._("T\u00e1c ph\u1ea9m ngh\u1ec7 thu\u1eadt c\u1ee7a b\u1ea1n s\u1ebd t\u1ef1 \u0111\u1ed9ng \u0111\u01b0\u1ee3c \u0111\u1ecbnh v\u1ecb \u0111\u1ec3 ho\u1ea1t \u0111\u1ed9ng theo c\u00e1c h\u01b0\u1edbng \u1ea3nh v\u00e0 video kh\u00e1c nhau.")));return b("React").createElement("div",null,b("React").createElement("div",{onMouseEnter:function(){this.setState({showPreviewFormatTooltip:!0})}.bind(this),onMouseLeave:function(){this.setState({showPreviewFormatTooltip:!1})}.bind(this)},b("React").createElement("span",{className:"_202m"},i._("Xem tr\u01b0\u1edbc \u0111\u1ecbnh d\u1ea1ng")),a),b("React").createElement("div",{ref:function(a){this.previewFormatsTitle=a}.bind(this)}),c)};a.prototype.render=function(){var a=this.props.portraitCanvasWidth/this.props.popoverPortraitCanvasWidth,c=b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg")?this.props.popoverPortraitCanvasHeight:this.props.popoverPortraitCanvasWidth,d=b("React").createElement("div",{className:"_3-8z"},b("React").createElement(b("MediaEffectReactFrameEditorPreviewContainer.react"),{previewHeight:this.props.popoverPortraitCanvasHeight,previewScale:a,previewWidth:this.props.popoverPortraitCanvasWidth}));c=b("React").createElement("div",{className:"_3-8z"},b("React").createElement(b("MediaEffectReactFrameEditorPreviewContainer.react"),{previewHeight:c,previewScale:a,previewWidth:c}));var e=b("React").createElement("div",{className:"_3-8z"},b("React").createElement(b("MediaEffectReactFrameEditorPreviewContainer.react"),{isCircle:!0,previewHeight:this.props.popoverPortraitCanvasWidth,previewScale:a,previewWidth:this.props.popoverPortraitCanvasWidth}));a=b("React").createElement("div",{className:"_3-8z"},b("React").createElement(b("MediaEffectReactFrameEditorPreviewContainer.react"),{previewHeight:this.props.popoverPortraitCanvasWidth,previewScale:a,previewWidth:this.props.popoverPortraitCanvasHeight}));return b("React").createElement("div",null,this.$1(),this.props.previewConfig.showPortrait&&d,this.props.previewConfig.showCircle&&e,this.props.previewConfig.showSquare&&c,this.props.previewConfig.showLandscape&&a)};e.exports=a}),null);
__d("MediaEffectFullscreenFrameEditorPreviewPanelContainer.react",["FluxContainer","MediaEffectFlowType","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameDistributionType","MediaEffectFrameEditorDispatcher","MediaEffectFullscreenFrameEditorPreviewPanel.react","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore"),b("MediaEffectFrameCreateDialogDataStore")]};a.calculateState=function(a){a=b("MediaEffectReactFrameEditorDataStore").getState();var c=b("MediaEffectReactFrameEditorCanvasDataStore").getState(),d=b("MediaEffectFrameCreateDialogDataStore").getState().flowType,e=b("MediaEffectFrameCreateDialogDataStore").getState(),f=e.dialogHeight,g=e.distributionType;e=e.screenWidth;var h=b("MediaEffectFullscreenFrameEditorSizingUtils").getPortraitPreviewHeight(e,f),i=9/16*h;e=b("MediaEffectFullscreenFrameEditorSizingUtils").getPortraitFullPreviewHeight(e,f);f=9/16*e;return{assets:a.assets,assetOrder:a.assetOrder,backgroundColor:c.backgroundColor,backgroundImage:c.backgroundImage,cameraEnabled:c.cameraSource!=null,distributionType:g,flowType:d,portraitCanvasWidth:i,portraitCanvasHeight:h,popoverPortraitCanvasWidth:f,popoverPortraitCanvasHeight:e,previewConfig:this.$1()}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.$1=function(){var a=b("MediaEffectFrameCreateDialogDataStore").getState().flowType;if(a===b("MediaEffectFlowType").TEMPLATE)return{showLandscape:!0,showCircle:!0,showSquare:!0,showPortrait:!0};var c=b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg"),d=b("MediaEffectFrameCreateDialogDataStore").getState();d=d.distributionType;var e=c&&d===b("MediaEffectFrameDistributionType").PROFILE_PICTURE;return{showLandscape:!e&&a!==b("MediaEffectFlowType").LIVE_TEMPLATE,showCircle:e&&a!==b("MediaEffectFlowType").LIVE_TEMPLATE,showSquare:(!c||d===b("MediaEffectFrameDistributionType").PROFILE_PICTURE)&&a!==b("MediaEffectFlowType").LIVE_TEMPLATE,showPortrait:!e}};a.prototype.render=function(){return b("React").createElement(b("MediaEffectFullscreenFrameEditorPreviewPanel.react"),babelHelpers["extends"]({},this.props,this.state))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectColorPaletteComponentRecord",["colr-convert","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=b("immutable").Record;function h(a){return("00"+a.toString(16)).substr(-2)}function i(a,b){a=a||0;b=b||b===0?b:1;return b+k()*(a-b)}function j(a,b){a=a||0;b=b||b===0?b:1;var c=2*Math.random()-1;c=(c*c*c+1)/2;return a+c*(b-a)}function k(a,b){a=a||0;b=b||b===0?b:1;var c=Math.random();c=c*c;return a+c*(b-a)}function l(a,b){a=a||0;b=b||b===0?b:1;return a+Math.random()*(b-a)}g=babelHelpers.inherits(m,a({hue:.5,saturation:1,lightness:.5,hueVariation:.05,saturationVariation:.3,lightnessVariation:.3}));g&&g.prototype;m.random=function(){return new m({hue:l(),saturation:i(),lightness:j(),hueVariation:k(.05,.4),saturationVariation:l(.2,1),lightnessVariation:l(.2,1)})};m.prototype.toRGB=function(){var a=b("colr-convert").hsl.rgb([this.hue*360,this.saturation*100,this.lightness*100]).map(Math.floor);return"#"+a.map(h).join("")};m.prototype.toString=function(){return[this.hue.toFixed(3)+"+"+this.hueVariation.toFixed(3),this.saturation.toFixed(3)+"+"+this.saturationVariation.toFixed(3),this.lightness.toFixed(3)+"+"+this.lightnessVariation.toFixed(3)].join(":")};function m(){g.apply(this,arguments)}e.exports=m}),null);
__d("MediaEffectColorPaletteRecord",["MediaEffectColorPaletteComponentRecord","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List;a=b("immutable").Record;g=babelHelpers.inherits(i,a({components:h()}));g&&g.prototype;i.random=function(){return new i({components:h.of(b("MediaEffectColorPaletteComponentRecord").random(),b("MediaEffectColorPaletteComponentRecord").random(),b("MediaEffectColorPaletteComponentRecord").random(),b("MediaEffectColorPaletteComponentRecord").random())})};i.prototype.getMainColor=function(){return this.components.size===0?null:this.components.get(0).toRGB()};i.prototype.toString=function(){return this.components.map(function(a){return a.toString()}).join(",")};function i(){g.apply(this,arguments)}e.exports=i}),null);
__d("MediaEffectReactFrameEditorScalarAssetPositionRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=b("immutable").Record;g=babelHelpers.inherits(h,a({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:50,asset_pixel_offset:0}));g&&g.prototype;h.canonical=function(a,b,c){__p&&__p();var d=c-a/2;if(Math.abs(d)<.01)return new h();if(d>0){d=a-(c+b/2);return new h({anchor_origin:"asset_end",anchor_asset_size_percentage:0,asset_origin:"canvas_end",asset_canvas_size_percentage:100*d/a})}else{d=c-b/2;return new h({anchor_origin:"asset_start",anchor_asset_size_percentage:0,asset_origin:"canvas_start",asset_canvas_size_percentage:100*d/a})}};h.prototype.isBackendCompatible=function(){return this.anchor_pixel_offset||this.asset_pixel_offset||this.anchor_origin==="asset_start"&&this.asset_origin==="canvas_end"||this.anchor_origin==="asset_end"&&this.asset_origin==="canvas_start"?!1:this.anchor_asset_size_percentage===50&&this.asset_canvas_size_percentage===50||this.anchor_asset_size_percentage===0};h.prototype.getStart=function(a,b){a=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord1(a);b=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord2(b);return a-b};h.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord1=function(a){var b=a*this.asset_canvas_size_percentage/100+this.asset_pixel_offset;if(this.asset_origin==="canvas_start")return b;else return a-b};h.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord2=function(a){var b=a*this.anchor_asset_size_percentage/100+this.anchor_pixel_offset;if(this.anchor_origin==="asset_start")return b;else return a-b};function h(){g.apply(this,arguments)}e.exports=h}),null);
__d("MediaEffectReactFrameEditorAssetPositionRecord",["MediaEffectReactFrameEditorScalarAssetPositionRecord","Rect","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=b("immutable").Record;g=babelHelpers.inherits(h,a({x:new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))(),y:new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))()}));g&&g.prototype;h.fromCenter=function(a,c){return new h({x:new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:a,asset_pixel_offset:0}),y:new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:c,asset_pixel_offset:0})})};h.canonical=function(a,c){return new h({x:b("MediaEffectReactFrameEditorScalarAssetPositionRecord").canonical(c.x,a.w(),a.w()/2+a.l),y:b("MediaEffectReactFrameEditorScalarAssetPositionRecord").canonical(c.y,a.h(),a.h()/2+a.t)})};h.prototype.isBackendCompatible=function(){return this.x.isBackendCompatible()&&this.y.isBackendCompatible()};h.prototype.toAbsolute=function(a,c){var d=this.x.getStart(a.x,c.x);a=this.y.getStart(a.y,c.y);return new(b("Rect"))(a,d+c.x,a+c.y,d)};function h(){g.apply(this,arguments)}e.exports=h}),null);
__d("MediaEffectReactFrameDeserializer",["invariant","MediaEffectColorPaletteComponentRecord","MediaEffectColorPaletteRecord","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorScalarAssetPositionRecord","MediaEffectReactFrameEditorScalarSizeRecord","MediaEffectReactFrameEditorSize","MediaEffectReactFrameEditorTemplateRecord","MediaEffectReactFrameEditorTextAssetRecord","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=b("immutable").Map;function j(a){return!a||a==="0"?null:a}function k(a){var b=a.split("+"),c=parseFloat(b[0]);b=parseFloat(b[1]);c>=0&&c<=1||g(0,undefined,a);b>=0&&b<=1||g(0,undefined,a);return{value:c,variation:b}}function l(a){var c=a.split(":").map(k);c.length===3||g(0,undefined,a);return new(b("MediaEffectColorPaletteComponentRecord"))({hue:c[0].value,saturation:c[1].value,lightness:c[2].value,hueVariation:c[0].variation,saturationVariation:c[1].variation,lightnessVariation:c[2].variation})}function m(a){return!a?new(b("MediaEffectColorPaletteRecord"))({components:h()}):new(b("MediaEffectColorPaletteRecord"))({components:h(a.split(",").map(l))})}function n(a,c){c=a;return new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_asset_size_percentage:c.horizontal_alignment==="center"?50:0,anchor_origin:c.horizontal_alignment==="right"?"asset_end":"asset_start",asset_origin:c.horizontal_alignment==="right"?"canvas_end":"canvas_start",asset_canvas_size_percentage:c.horizontal_alignment==="center"?50:c.horizontal_margin}),y:new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_asset_size_percentage:c.vertical_alignment==="center"?50:0,anchor_origin:c.vertical_alignment==="bottom"?"asset_end":"asset_start",asset_origin:c.vertical_alignment==="bottom"?"canvas_end":"canvas_start",asset_canvas_size_percentage:c.vertical_alignment==="center"?50:c.vertical_margin})})}function o(a,c,d){d=c.size_dimension==="width";var e=a.size_dimension==="height";if(!d&&!e)return new(b("MediaEffectReactFrameEditorSize").Fill)({width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:a.size}),height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:c.size}),aspect_ratio:a.size/c.size});if(d&&e)return new(b("MediaEffectReactFrameEditorSize").Fit)({width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:c.size}),height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:a.size}),aspect_ratio:c.size/a.size});return d?new(b("MediaEffectReactFrameEditorSize").ScaleWidth)({width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:c.size})}):new(b("MediaEffectReactFrameEditorSize").ScaleHeight)({height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:a.size})})}function p(a,c,d){return new(b("MediaEffectReactFrameEditorSize").Stretch)({width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:c.textbox_width}),height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:c.size})})}function q(a){var c=j(a.source_template_asset_id);return new(b("MediaEffectReactFrameEditorImageAssetRecord"))({assetFBID:j(a.asset_id),dynamic_sticker_pack_id:j(a.dynamic_sticker_pack_id),dynamic_sticker_type:a.dynamic_sticker_type,stickerFBID:a.sticker_id,sourceTemplateAssetFBID:c,hostedImageURI:a.sticker_url,position:n(a.landscape_position,a.portrait_position),assetSize:o(a.landscape_position,a.portrait_position,b("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasSize),readOnly:!!c,assocTextAsset:a.assoc_text_asset&&r(a.assoc_text_asset)})}function r(a){var c=a.font_name||a.custom_font_id;!c&&g(0,undefined);return new(b("MediaEffectReactFrameEditorTextAssetRecord"))({assetFBID:j(a.asset_id),content:a.content,font:b("MediaEffectReactFrameEditorCanvasDataStore").getFont(c),color:"#"+a.color,sourceTemplateAssetFBID:j(a.source_template_asset_id),textHorizontalAlignment:a.portrait_position.text_horizontal_alignment,position:n(a.landscape_position,a.portrait_position),assetSize:p(a.landscape_position,a.portrait_position,b("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasSize)})}function a(a){__p&&__p();var b=i(),c=h().withMutations(function(c){__p&&__p();b=b.withMutations(function(b){__p&&__p();a.stickers.forEach(function(a,d){a=q(a);a=a.set("localAssetID",d+1);a.assocTextAsset&&(a=a.set("assocTextAsset",a.assocTextAsset.set("localAssetID",d+1)));c.push(a.localAssetID);b.set(a.localAssetID,a)}),a.text.forEach(function(d,e){d=r(d);d=d.set("localAssetID",a.stickers.length+e+1);c.push(d.localAssetID);b.set(d.localAssetID,d)})})});return{assets:b,assetOrder:c,frameFBID:a.fbid,filterID:a.filter_id,templateFBID:j(a.source_template_id),colorPalette:m(a.color_palette)}}function c(a){return new(b("MediaEffectReactFrameEditorTemplateRecord"))({templateFBID:a.id,previewURL:a.uri,sourceTemplateFBID:a.source_id,variants:h(a.variant_ids),colorPalette:m(a.color_palette)})}e.exports={deserializeData:a,deserializeColorPalette:m,deserializeTemplate:c}}),null);
__d("MediaEffectReactFrameEditorAsset.react",["ix","cx","fbt","DOMQuery","FBDragHandle.react","FBToggleSwitch.react","FileInput.react","InputLabel.react","MediaEffectEditorAsset","MediaEffectEditorFunnelLogger","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorCanvasImageAsset.react","MediaEffectReactFrameEditorImageAsset.react","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorTextAsset.react","MountedContextMenu.react","PopoverMenu.react","React","ReactDOM","ReactXUIMenu","MenuSeparator.react","SimpleXUIDialog","XUIPopoverButton.react","XUIError.react","SUIButton.react","SUIGlyphIcon.react","SUIMediaEffectTheme","fbglyph","emptyFunction","immutable","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactXUIMenu").Item,l=b("ReactXUIMenu").ItemNoAction;c=b("immutable").Map;function m(a){return{top:a.t,left:a.l,width:a.w(),height:a.h(),position:"absolute"}}d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.$1=[],this.$2=[],this.$3=null,this.$4=null,this.$5=null,this.$6=function(){!this.props.readOnly&&this.props.enableEditorFreeText&&b("MediaEffectMetadataActionCreators").editText(this.props.localAssetID)}.bind(this),this.$7=function(){return this.props.initialPositionMap}.bind(this),this.$8=function(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return(a=this.props).onDrag.apply(a,[this.props.localAssetID].concat(c))}.bind(this),this.$9=function(){b("MediaEffectMetadataActionCreators").raiseAsset(this.props.localAssetID)}.bind(this),this.$10=function(){var a=this.props,c=a.assetData;a=a.localAssetID;b("MediaEffectMetadataActionCreators").removeBackground(a,c.stickerFBID);this.setState({hasProcessed:!0});b("MediaEffectEditorFunnelLogger").logApplyAutoBackgroundRemoval(this.props.assetData.stickerFBID)}.bind(this),this.$11=function(){b("MediaEffectMetadataActionCreators").raiseAsset(this.props.localAssetID,!0)}.bind(this),this.$12=function(){b("MediaEffectMetadataActionCreators").lowerAsset(this.props.localAssetID)}.bind(this),this.$13=function(){b("MediaEffectMetadataActionCreators").lowerAsset(this.props.localAssetID,!0)}.bind(this),this.$14=function(a){a.target.files[0]&&b("MediaEffectMetadataActionCreators").replaceImage(this.props.localAssetID,a.target.files[0])}.bind(this),this.$15=function(){b("MediaEffectMetadataActionCreators").duplicateAsset(this.props.localAssetID)}.bind(this),this.$16=function(){var a=b("nullthrows")(this.$5);a.isTextAsset()||(a.toggleScaleWithWidth(),b("MediaEffectEditorFunnelLogger").logSetScaleWithWidth((!a.isScalingWithWidth()).toString()))}.bind(this),this.$17=function(){var a=b("nullthrows")(this.$5);a.isTextAsset()||(a.toggleScaleWithHeight(),b("MediaEffectEditorFunnelLogger").logSetScaleWithHeight((!a.isScalingWithHeight()).toString()))}.bind(this),this.$18=function(){var a=b("nullthrows")(this.$5);b("SimpleXUIDialog").showConfirm(a.isTextAsset()?i._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a v\u0103n b\u1ea3n n\u00e0y kh\u00f4ng?"):i._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a th\u00e0nh ph\u1ea7n ngh\u1ec7 thu\u1eadt n\u00e0y kh\u00f4ng?"),null,function(a){return a?b("MediaEffectMetadataActionCreators").deleteAsset(this.props.localAssetID):null}.bind(this))}.bind(this),this.$19=function(event){if(this.props.readOnly)return;event.button===0&&(!this.props.selected?(event.shiftKey||b("MediaEffectMetadataActionCreators").deselectAll(),b("MediaEffectMetadataActionCreators").selectAsset(this.props.localAssetID)):event.shiftKey&&b("MediaEffectMetadataActionCreators").deselectAsset(this.props.localAssetID))}.bind(this),this.$20=function(){this.setState({isInPreview:!0}),b("MediaEffectEditorFunnelLogger").logPreviewAutoBackgroundRemoval(this.props.assetData.stickerFBID)}.bind(this),this.$21=function(){this.setState({isInPreview:!1})}.bind(this),this.$5=new(b("MediaEffectEditorAsset"))(a.localAssetID,a.assetData),this.state={isInPreview:!1,hasProcessed:!1}}a.prototype.UNSAFE_componentWillReceiveProps=function(a){var c=b("nullthrows")(this.$5);c.updateAsset(a.localAssetID,a.assetData)};a.prototype.componentDidUpdate=function(){var a=b("nullthrows")(this.$5);this.$1.forEach(function(b){return b.checked=a.isScalingWithWidth()});this.$2.forEach(function(b){return b.checked=a.isScalingWithHeight()})};a.prototype.$22=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault())};a.prototype.$23=function(a,b){a=a||this.props.assetData.assetSize;b=b||this.props.assetData.position;if(!a||!a.isValid())return null;a=a.toAbsolute(this.props.canvasSize);b=b.toAbsolute(this.props.canvasSize,a);return b};a.prototype.$24=function(a){return this.props.assetData instanceof b("MediaEffectReactFrameEditorImageAssetRecord")?this.$25(this.props.assetData,a):this.$26(this.props.assetData,a)};a.prototype.$25=function(a,c){return a.assocTextAsset&&(this.props.selected||this.props.editedTextID===this.props.localAssetID)?this.$26(a.assocTextAsset,c):this.props.isInCanvas?b("React").createElement(b("MediaEffectReactFrameEditorCanvasImageAsset.react"),{imageRecord:a,isInPreview:this.state.isInPreview,key:this.props.localAssetID,localAssetID:this.props.localAssetID}):b("React").createElement(b("MediaEffectReactFrameEditorImageAsset.react"),{imageRecord:a,isInPreview:this.state.isInPreview,key:this.props.localAssetID,localAssetID:this.props.localAssetID})};a.prototype.$27=function(){var a=this.props.assetData;if(a instanceof b("MediaEffectReactFrameEditorImageAssetRecord")){a=a.validationResult;if(a&&!a.success)return a.reason}return null};a.prototype.$26=function(a,c){return b("React").createElement(b("MediaEffectReactFrameEditorTextAsset.react"),{assetData:a,canvasSize:this.props.canvasSize,editing:this.props.editedTextID===this.props.localAssetID,enableFontSettingsDialog:this.props.enableFontSettingsDialog,key:this.props.localAssetID,localAssetID:this.props.localAssetID,position:c,readOnly:this.props.readOnly,textboxHeight:c&&c.h()})};a.prototype.$28=function(a,c){if(this.props.readOnly)return;a=b("ReactDOM").findDOMNode(a);if(!(a instanceof HTMLElement))return;c=b("React").createElement(b("MountedContextMenu.react"),{menu:c,mountedTriggerElem:a});a=a.children[0];b("ReactDOM").render(c,a)};a.prototype.$29=function(){var a=b("nullthrows")(this.$5),c=a.isTextAsset();return b("React").createElement(b("ReactXUIMenu"),null,b("React").createElement(k,{onclick:this.$9},i._("\u0110\u01b0a l\u00ean tr\u01b0\u1edbc")),b("React").createElement(k,{onclick:this.$11},i._("\u0110\u01b0a l\u00ean tr\u01b0\u1edbc")),b("React").createElement(k,{onclick:this.$12},i._("Chuy\u1ec3n v\u1ec1 sau")),b("React").createElement(k,{onclick:this.$13},i._("Chuy\u1ec3n v\u1ec1 sau")),b("React").createElement(b("MenuSeparator.react"),null),!c&&b("React").createElement(k,{renderas:"label"},b("React").createElement(b("FileInput.react"),{accept:"image/x-png, image/jpeg, image/png",multiple:!1,onChange:this.$14},b("React").createElement("a",{style:{color:"inherit",textDecoration:"none"}},i._("Thay th\u1ebf ngh\u1ec7 thu\u1eadt")))),b("React").createElement(k,{onclick:this.$15},i._("Sao ch\u00e9p")),b("React").createElement(k,{onclick:this.$18},i._("X\u00f3a")),b("React").createElement(b("MenuSeparator.react"),null),b("React").createElement(l,{onclick:this.$16},b("React").createElement(b("InputLabel.react"),{label:i._("Co l\u1ea1i chi\u1ec1u r\u1ed9ng")},b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,checked:a.isScalingWithWidth(),disabled:c,ref:function(a){return a&&this.$1.push(b("DOMQuery").find(b("ReactDOM").findDOMNode(a),"input"))}.bind(this)}))),b("React").createElement(l,{onclick:this.$17},b("React").createElement(b("InputLabel.react"),{label:i._("Co l\u1ea1i chi\u1ec1u cao")},b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,checked:a.isScalingWithHeight(),disabled:c,ref:function(a){return a&&this.$2.push(b("DOMQuery").find(b("ReactDOM").findDOMNode(a),"input"))}.bind(this)}))))};a.prototype.$30=function(){var a=this.props.assetData;return a instanceof b("MediaEffectReactFrameEditorImageAssetRecord")?!!a.processedImageURI:!1};a.prototype.$31=function(){return!this.$30()||this.state.hasProcessed?!1:!0};a.prototype.render=function(){var a=this.$23(),c=a?m(a):{display:"none"};a&&(this.$3||(this.$3=this.$29()),this.$4||(this.$4=this.$29()));a=b("React").createElement("div",{style:c},this.$24(a));var d=this.$27();if(!this.props.readOnly&&this.props.editedTextID!==this.props.localAssetID)return b("React").createElement("div",{onDoubleClick:this.$6,onMouseDown:this.$19},b("React").createElement(b("FBDragHandle.react"),{horizontal:!0,initialData:this.$7,key:this.props.localAssetID,onChange:this.$8,onEnd:this.props.onDrop,stopOnLeave:!1,vertical:!0},a,b("React").createElement(b("XUIError.react"),{xuiError:d},b("React").createElement("div",{className:"_sdt",ref:function(a){return a&&this.$4&&this.$28(a,this.$4)}.bind(this),style:c},b("React").createElement("div",null),b("React").createElement("div",{className:"_1ytk"},b("React").createElement("div",{className:"_1ytl"}),this.$3?b("React").createElement("div",null,b("React").createElement(b("PopoverMenu.react"),{alignh:"center",alignv:"top",className:"_1ytm",menu:this.$3,onMouseDown:this.$22},b("React").createElement(b("XUIPopoverButton.react"),null)),this.$31()?b("React").createElement("div",{className:"_d2q"},b("React").createElement(b("SUIButton.react"),{className:"_d2q",icon:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("115218")}),label:i._("T\u1ea1o n\u1ec1n trong su\u1ed1t"),labelIsHidden:!0,onClick:this.$10,onMouseLeave:this.$21,onMouseOver:this.$20,theme:b("SUIMediaEffectTheme"),tooltip:i._("T\u1ea1o n\u1ec1n trong su\u1ed1t"),tooltipDelay:200,use:"special"})):null):null)))));else return b("React").createElement(b("XUIError.react"),{xuiError:d},a)};a.defaultProps={onDrag:b("emptyFunction"),onDrop:b("emptyFunction"),initialPositionMap:c(),isValidating:!1,readOnly:!1,selected:!1,editedTextID:null,enableFontSettingsDialog:!1,enableEditorFreeText:!1,flowType:null,isInCanvas:!1};e.exports=a}),null);
__d("MediaEffectReactFrameEditorCamera.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement("div",{style:{position:"absolute",overflow:"hidden",left:"50%",top:"50%",marginLeft:-(this.props.width/2),marginTop:-(this.props.height/2)}},b("React").createElement("video",{autoPlay:!0,ref:"video",style:{width:this.props.width,height:this.props.height,objectFit:"cover"},src:this.props.videoSrc}))};a.prototype.componentDidUpdate=function(a){a.cameraPaused&&!this.props.cameraPaused?this.refs.video.play():!a.cameraPaused&&this.props.cameraPaused&&this.refs.video.pause()};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectReactFrameEditorCameraContainer.react",["FluxContainer","MediaEffectReactFrameEditorCamera.react","MediaEffectReactFrameEditorCanvasDataStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorCanvasDataStore")]};a.calculateState=function(a,c){a=b("MediaEffectReactFrameEditorCanvasDataStore").getState();return{cameraPaused:a.cameraPaused,videoSrc:a.cameraSource}};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectReactFrameEditorCamera.react"),a)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectCanvasEducation.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_3fsi"},b("React").createElement("div",{className:"_vzg"},b("React").createElement("div",{className:"_3fsj"},h._("K\u00e9o v\u00e0 th\u1ea3 t\u1ec7p PNG")),b("React").createElement("div",{className:"_3fso"},h._("ho\u1eb7c s\u1eed d\u1ee5ng n\u00fat T\u1ea3i t\u1ec7p l\u00ean"))))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("AssetVerticalAlignmentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOP:"top",BOTTOM:"bottom",CENTER:"center"})}),null);
__d("MediaEffectReactFrameEditorGridlines.react",["cx","fbt","AssetHorizontalAlignmentType","AssetVerticalAlignmentType","MediaEffectFrameEditorConstants","React","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.props.asset.get("assetSize").toAbsolute(this.props.canvasSize),b=this.props.asset.get("position").toAbsolute(this.props.canvasSize,a),c=this.$1(this.props.asset,this.props.canvasSize);return this.props.type==="vertical"?this.$2(b,a,c):this.$3(b,a,c)};a.prototype.$2=function(a,c,d){var e={},f={};e.left=-5+j+a.l+c.x/2+"px";e.height=Math.max(d.vMargin-2,0)+"px";e.height==="0px"&&(e.borderBottom="0px");d.vMargin<40?(d.assetVAlign===b("AssetVerticalAlignmentType").TOP?f.top="-20px":f.bottom="-20px",f.left="-3px"):(f.right="10px",f.top=d.vMargin/2-8+"px");if(d.assetVAlign===b("AssetVerticalAlignmentType").CENTER)return b("React").createElement("div",null,this.$4(babelHelpers["extends"]({},e,{top:j}),f,"Centered"),this.$4(babelHelpers["extends"]({},e,{bottom:j}),f,"Centered"));d.assetVAlign===b("AssetVerticalAlignmentType").TOP?e.top=j:e.bottom=j;return this.$4(e,f,d.relativeVMargin.toFixed(0)+"%")};a.prototype.$4=function(a,c,d){return b("React").createElement("div",{style:a,className:"_4ro5"},b("React").createElement("div",{className:"_4ro6"}),b("React").createElement("div",{className:"_4ro7"}),b("React").createElement("div",{style:c,className:"_4ro8"},d==="Centered"?h._("Gi\u1eefa"):d))};a.prototype.$3=function(a,c,d){var e={},f={};e.top=-5+j+a.t+c.y/2+"px";e.width=Math.max(d.hMargin-2,0)+"px";e.width==="0px"&&(e.borderRight="0px");d.hMargin<40?(d.assetHAlign===b("AssetHorizontalAlignmentType").LEFT?f.left="-23px":f.right="-23px",f.top="-3px"):(f.top="-15px",f.left=d.hMargin/3+"px");if(d.assetHAlign===b("AssetHorizontalAlignmentType").CENTER)return b("React").createElement("div",null,this.$5(babelHelpers["extends"]({},e,{left:j}),f,"Centered"),this.$5(babelHelpers["extends"]({},e,{right:j}),f,"Centered"));d.assetHAlign===b("AssetHorizontalAlignmentType").LEFT?e.left=j:e.right=j;return this.$5(e,f,d.relativeHMargin.toFixed(0)+"%")};a.prototype.$5=function(a,c,d){return b("React").createElement("div",{style:a,className:"_4ro9"},b("React").createElement("div",{className:"_4roa"}),b("React").createElement("div",{className:"_4rob"}),b("React").createElement("div",{style:c,className:"_4ro8"},d==="Centered"?h._("Gi\u1eefa"):d))};a.prototype.$1=function(a,c){var d=b("nullthrows")(a.assetSize).toAbsolute(c);a=a.position;d=a.toAbsolute(c,d);return{assetHAlign:a.x.asset_origin==="canvas_start"?a.x.anchor_asset_size_percentage===50?b("AssetHorizontalAlignmentType").CENTER:b("AssetHorizontalAlignmentType").LEFT:b("AssetHorizontalAlignmentType").RIGHT,assetVAlign:a.y.asset_origin==="canvas_start"?a.y.anchor_asset_size_percentage===50?b("AssetVerticalAlignmentType").CENTER:b("AssetVerticalAlignmentType").TOP:b("AssetVerticalAlignmentType").BOTTOM,hMargin:a.x.asset_origin==="canvas_start"?d.l:c.x-d.r,vMargin:a.y.asset_origin==="canvas_start"?d.t:c.y-d.b,relativeHMargin:a.x.asset_canvas_size_percentage,relativeVMargin:a.y.asset_canvas_size_percentage}};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectReactFrameEditorCanvas.react",["cx","fbt","Image.react","LayerAutoFocusReact","LayerFadeOnHide","LayerHideOnBlur","LayerHideOnEscape","MediaEffectCanvasEducation.react","MediaEffectFrameEditorConstants","MediaEffectFrameRenderer","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorAsset.react","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorCameraContainer.react","MediaEffectReactFrameEditorGridlines.react","MediaEffectReactFrameEditorSelectionBoxContainer.react","MountedContextMenu.react","React","ReactDOM","ReactXUIMenu","immutable","nullthrows","promiseDone","Rect","SimpleXUIDialog","throttle","Vector","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","XUIError.react","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE,k=b("immutable").Map,l=b("ReactXUIMenu").Item,m=10,n=k({Delete:"DELETE",Backspace:"DELETE",Escape:"UNSELECT",ArrowLeft:"NUDGELEFT",ArrowRight:"NUDGERIGHT",ArrowUp:"NUDGEUP",ArrowDown:"NUDGEDOWN"}),o=k({"?":"SHOWKEY_BINDINGS"});function p(a){return b("React").createElement("div",{style:{margin:"0 auto 8px auto",width:a.width+2*j}},b("React").createElement(b("XUIText.react"),{className:"_38wf _1e6t"},h._("Canvas")))}c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];(a=i.constructor).call.apply(a,[this].concat(d));this.state={canvasErrorMessage:null,showKeyBindings:!1};this.$26=b("throttle")(function(a){b("promiseDone")(b("MediaEffectFrameRenderer").percentageCovered(a.assets,a.assetOrder,new(b("Vector"))(a.canvasWidth,a.canvasHeight)).then(function(a){this.props.updateCoverage(a),a>.5?this.setState({canvasErrorMessage:h._("Khung c\u1ee7a b\u1ea1n che nhi\u1ec1u kh\u00f4ng gian canvas. Vui l\u00f2ng c\u00e2n nh\u1eafc gi\u1ea3i ph\u00f3ng th\u00eam kh\u00f4ng gian.")}):this.setState({canvasErrorMessage:null})}.bind(this)))}.bind(this),1e3);this.$30=function(a){setTimeout(!a&&this.$28(),0)}.bind(this);this.$33=function(){b("MediaEffectMetadataActionCreators").addText(null,this.$6,this.$7)}.bind(this);this.$16=function(event){__p&&__p();if(event.button===0&&this.$17&&(event.target===this.$1||event.target===this.$17))b("MediaEffectMetadataActionCreators").deselectAll();else if(this.props.editedTextID)return;else if(event.button===2&&event.target===this.$1){var a=b("ReactDOM").findDOMNode(this.$1).getBoundingClientRect(),c=event.clientX-a.left;a=event.clientY-a.top;this.$6=c/this.props.canvasWidth*100;this.$7=a/this.props.canvasHeight*100}this.$29();event.preventDefault()}.bind(this);this.$29=function(){this.$17&&this.$17.focus()}.bind(this);this.$13=function(event){var a=n.get(event.key);this.$34(a,event)}.bind(this);this.$14=function(event){var a=o.get(event.key);this.$34(a,event)}.bind(this);this.$10=function(a,b,c,d,e,f){return this.$36(a,null,null,b,c,d,e,f)}.bind(this);this.$12=function(a){a.preventDefault();if(!a.dataTransfer||this.props.readOnly)return;a=a.dataTransfer.files;if(a)for(var c=0;c<a.length;c++){var d=a.item(c);d&&b("MediaEffectMetadataActionCreators").addImage(d)}}.bind(this);this.$5=k({DELETE:function(event){return this.$18(event)}.bind(this),UNSELECT:function(event){return this.$19(event)}.bind(this),NUDGELEFT:function(event){return this.$20(event)}.bind(this),NUDGERIGHT:function(event){return this.$21(event)}.bind(this),NUDGEUP:function(event){return this.$22(event)}.bind(this),NUDGEDOWN:function(event){return this.$23(event)}.bind(this),SHOWKEY_BINDINGS:function(event){return this.$24(event)}.bind(this)});this.$8=this.$8.bind(this);this.$9=this.$9.bind(this);this.$2=this.$25();this.$4=!1}a.prototype.UNSAFE_componentWillReceiveProps=function(a){!this.props.assets.equals(a.assets)&&a.assets.every(function(a){return!!a.assetSize})&&this.$26(a)};a.prototype.$9=function(a){this.$27(a.target)};a.prototype.$28=function(){this.setState({showKeyBindings:!1}),this.$29()};a.prototype.$31=function(){return!this.state.showKeyBindings?null:b("React").createElement(b("XUIDialog.react"),{autohide:5e3,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerAutoFocusReact:b("LayerAutoFocusReact"),LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape")},onToggle:this.$30,shown:this.state.showKeyBindings,titleID:"frame-editor-key-bindings",width:445},b("React").createElement(b("XUIDialogTitle.react"),null,b("React").createElement("span",null,"Keyboard Shortcut Help")),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("ul",null,b("React").createElement("li",null,b("React").createElement("span",{className:"_5hbk"},"\u2190"),",",b("React").createElement("span",{className:"_5hbk"},"\u2192"),",",b("React").createElement("span",{className:"_5hbk"},"\u2191"),",",b("React").createElement("span",{className:"_5hbk"},"\u2193"),"\u2014 move selected items"),b("React").createElement("li",null,b("React").createElement("span",{className:"_5hbk"},"Ctrl"),"+",b("React").createElement("span",{className:"_5hbk"},"\u2190"),",",b("React").createElement("span",{className:"_5hbk"},"\u2192"),",",b("React").createElement("span",{className:"_5hbk"},"\u2191"),",",b("React").createElement("span",{className:"_5hbk"},"\u2193"),"\u2014 move selected items by 10%"),b("React").createElement("li",null,b("React").createElement("span",{className:"_5hbk"},"Delete"),",",b("React").createElement("span",{className:"_5hbk"},"Backspace"),"\u2014 delete selected items"),b("React").createElement("li",null,b("React").createElement("span",{className:"_5hbk"},"Escape"),"\u2014 unselect all"))))};a.prototype.$27=function(a){var c=a.files;if(c)for(var d=0;d<c.length;d++){var e=c.item(d);e&&b("MediaEffectMetadataActionCreators").addImage(e,this.$6,this.$7)}a.value=""};a.prototype.$32=function(a,c){a=b("ReactDOM").findDOMNode(a);if(!(a instanceof HTMLElement))return;c=b("React").createElement(b("MountedContextMenu.react"),{menu:c,mountedTriggerElem:a});a=a.children[0];b("ReactDOM").render(c,a)};a.prototype.$25=function(){return b("React").createElement(b("ReactXUIMenu"),null,b("React").createElement(l,{onclick:this.$8},h._("Th\u00eam t\u00e1c ph\u1ea9m ngh\u1ec7 thu\u1eadt m\u1edbi t\u1ea1i \u0111\u00e2y")),this.props.enableEditorFreeText?b("React").createElement(l,{onclick:this.$33},h._("Ch\u00e8n v\u0103n b\u1ea3n")):null)};a.prototype.$8=function(){var a=new MouseEvent("click");b("nullthrows")(this.$3).dispatchEvent(a)};a.prototype.$11=function(event){event.preventDefault()};a.prototype.$34=function(a,event){if(a&&!this.props.editedTextID){a=this.$5.get(a);a&&(a(event),event.preventDefault())}};a.prototype.$15=function(event){var a=n.get(event.key);if(a)switch(a){case"NUDGELEFT":case"NUDGERIGHT":case"NUDGEUP":case"NUDGEDOWN":b("MediaEffectMetadataActionCreators").setIsDragging(!1);break;default:break}};a.prototype.$19=function(event){b("MediaEffectMetadataActionCreators").deselectAll()};a.prototype.$18=function(event){__p&&__p();if(this.props.selectedAssets.size===0)return;var a=this.props.selectedAssets,c=a.count(function(a){return this.props.assets.get(a).assetType()==="MediaEffectReactFrameEditorTextAssetRecord"}.bind(this)),d=a.count(function(a){return this.props.assets.get(a).assetType()==="MediaEffectReactFrameEditorImageAssetRecord"}.bind(this)),e=null;d===0?e=c>1?h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a c\u00e1c m\u1ee5c v\u0103n b\u1ea3n n\u00e0y kh\u00f4ng?"):h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a m\u1ee5c v\u0103n b\u1ea3n n\u00e0y kh\u00f4ng?"):c===0?e=d>1?h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a c\u00e1c th\u00e0nh ph\u1ea7n ngh\u1ec7 thu\u1eadt n\u00e0y kh\u00f4ng?"):h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a th\u00e0nh ph\u1ea7n ngh\u1ec7 thu\u1eadt n\u00e0y kh\u00f4ng?"):e=h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a c\u00e1c th\u00e0nh ph\u1ea7n ngh\u1ec7 thu\u1eadt n\u00e0y kh\u00f4ng?");this.$4=!0;b("SimpleXUIDialog").showConfirm(e,null,function(c){c&&a.forEach(function(a){b("MediaEffectMetadataActionCreators").deleteAsset(a)}),this.$4=!1,this.$29()}.bind(this),null)};a.prototype.$22=function(event){this.$35(new(b("Vector"))(0,-1),event)};a.prototype.$23=function(event){this.$35(new(b("Vector"))(0,1),event)};a.prototype.$20=function(event){this.$35(new(b("Vector"))(-1,0),event)};a.prototype.$21=function(event){this.$35(new(b("Vector"))(1,0),event)};a.prototype.$35=function(a,event){var b=event.ctrlKey?10:1;a=a.mul(b).mul(this.props.canvasWidth/100,this.props.canvasHeight/100);this.$36(null,!0,b!==1,a.x,a.y,null,null,this.$37())};a.prototype.$24=function(event){this.setState({showKeyBindings:!0})};a.prototype.$36=function(a,c,d,e,f,g,h,i){__p&&__p();g=k().withMutations(function(b){i.forEach(function(c,d){(d===a||this.props.selectedAssets.has(d))&&b.set(d,c)}.bind(this))}.bind(this));h=b("Rect").minimumBoundingBox(g.toArray());if(!c){c=this.$38(e,f,h);e=c[0];f=c[1]}else if(!d){c=this.$39(e,f,h);e=c[0];f=c[1]}d=this.$40(e,f,g);e=d[0];f=d[1];i.forEach(function(c,d){if(d!==a&&!this.props.selectedAssets.has(d))return;c=c.add(e,f);var g=b("MediaEffectReactFrameEditorAssetPositionRecord").canonical(c,this.$41());["x","y"].map(function(a){return g=g.set(a,g[a].set("asset_canvas_size_percentage",Math.round(g[a].asset_canvas_size_percentage)))});b("MediaEffectMetadataActionCreators").updateAssetPosition(d,g)}.bind(this));b("MediaEffectMetadataActionCreators").setIsDragging(!0)};a.prototype.$42=function(){b("MediaEffectMetadataActionCreators").setIsDragging(!1)};a.prototype.$38=function(a,b,c){var d=c.getCenter();c=c.add(a,b);var e=this.$41().div(2);c=c.getCenter();c=c.sub(e);Math.abs(c.x)<m&&(a=e.x-d.x);Math.abs(c.y)<m&&(b=e.y-d.y);return[a,b]};a.prototype.$39=function(a,b,c){__p&&__p();var d=c.getCenter(),e=c.add(a,b),f=this.$41().div(2);e=e.getCenter();d=d.sub(f);e=e.sub(f);e.x*d.x<0&&(a=-d.x);e.y*d.y<0&&(b=-d.y);if(d.x===0){f=100*c.l/this.props.canvasWidth;a=this.props.canvasWidth/100*Math.sign(a)*(1+f-Math.ceil(f))}if(d.y===0){e=100*c.t/this.props.canvasHeight;b=this.props.canvasHeight/100*Math.sign(b)*(1+e-Math.ceil(e))}return[a,b]};a.prototype.$40=function(a,b,c){c.forEach(function(c,d){d=c.add(a,b);d.l>this.props.canvasWidth&&(a-=d.l-this.props.canvasWidth);d.t>this.props.canvasHeight&&(b-=d.t-this.props.canvasHeight);d.l+d.w()<0&&(a-=d.l+d.w());d.t+d.h()<0&&(b-=d.t+d.h())}.bind(this));return[a,b]};a.prototype.$37=function(){return this.props.assets.map(function(a){return a.assetSize&&a.position.toAbsolute(this.$41(),a.assetSize.toAbsolute(this.$41()))}.bind(this))};a.prototype.$43=function(){return k().withMutations(function(a){this.props.selectedAssets.forEach(function(b){if(this.props.assets.has(b)){var c=this.props.assets.get(b);c.assetSize&&c.position&&a.set(b,c.position.toAbsolute(this.$41(),c.assetSize.toAbsolute(this.$41())))}}.bind(this))}.bind(this))};a.prototype.$41=function(){return new(b("Vector"))(this.props.canvasWidth,this.props.canvasHeight)};a.prototype.render=function(){__p&&__p();var a=this.props.assets.count()===0?b("React").createElement(b("MediaEffectCanvasEducation.react"),null):null,c=this.props.includesPhoneFrame,d=this.props.canvasHeight/b("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO,e=this.props.canvasWidth/b("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_WIDTH_RATIO;d=c?(d-this.props.canvasHeight)/2:j;e=c?(e-this.props.canvasWidth)/2:j;return b("React").createElement("div",null,this.$31(),this.props.showTitle?b("React").createElement(p,{width:this.props.canvasWidth}):null,b("React").createElement("div",{className:"_384m"+(c?" _3fqm":""),onDragOver:this.$11,onDrop:this.$12,onKeyDown:this.$13,onKeyPress:this.$14,onKeyUp:this.$15,onMouseDown:this.$16,ref:function(a){a&&(this.$17=a)}.bind(this),style:{width:this.props.canvasWidth+2*e,height:this.props.canvasHeight+2*d},tabIndex:0},c?b("React").createElement(b("Image.react"),{className:"_3fqn",src:"/images/media_effect/frame_preview/phone_portrait.png",style:{width:Math.floor(this.props.canvasWidth/b("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_WIDTH_RATIO),height:Math.floor(this.props.canvasHeight/b("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO)}}):null,b("React").createElement("div",{className:"_ymq _2z_m"+(c?" _3fqo":""),style:{backgroundColor:this.props.backgroundColor,width:this.props.canvasWidth,height:this.props.canvasHeight,left:e-1,top:d-1}},this.props.cameraEnabled?b("React").createElement(b("MediaEffectReactFrameEditorCameraContainer.react"),{height:this.props.canvasHeight,width:this.props.canvasWidth}):null,b("React").createElement(b("XUIError.react"),{xuiError:this.state.canvasErrorMessage},b("React").createElement("div",{className:"_384n",ref:function(a){a&&!this.props.readOnly&&(this.$1=a,this.$32(a,this.$2))}.bind(this),style:{backgroundImage:this.props.backgroundImage?"url('"+this.props.backgroundImage.uri+"')":null,backgroundSize:this.props.backgroundImage?"cover":null,backgroundPosition:this.props.backgroundImage?"center":null,width:this.props.canvasWidth,height:this.props.canvasHeight}},b("React").createElement("div",null),a,this.props.assetOrder.map(function(a){var c=this.props.assets.get(a);return b("React").createElement(b("MediaEffectReactFrameEditorAsset.react"),{assetData:c,canvasSize:this.$41(),editedTextID:this.props.editedTextID,enableEditorFreeText:this.props.enableEditorFreeText,enableFontSettingsDialog:this.props.enableFontSettingsDialog,flowType:this.props.flowType,focusCanvas:this.$29,initialPositionMap:this.$37(),isInCanvas:!0,isValidating:this.props.isValidating,key:a,localAssetID:a,onDrag:this.$10,onDrop:this.$42,readOnly:this.props.readOnly||c.readOnly,selected:this.props.selectedAssets.has(a)})}.bind(this))))),b("React").createElement(b("MediaEffectReactFrameEditorSelectionBoxContainer.react"),{canvasHeight:this.props.canvasHeight,canvasWidth:this.props.canvasWidth,includesPhoneFrame:this.props.includesPhoneFrame,selectedAssets:this.props.selectedAssets}),b("React").createElement("div",{className:(c?"":"_34j2")+(c?" _3fqp":"")+" _34j3",style:{top:d-1,width:e-1,height:this.props.canvasHeight+2}}),b("React").createElement("div",{className:(c?"":"_34j2")+(c?" _3fqp":"")+" _34j4",style:{top:d-1,width:e-1,height:this.props.canvasHeight+2}}),b("React").createElement("div",{className:(c?"":"_34j2")+(c?" _3fqp":"")+" _34j6",style:{width:this.props.canvasWidth+2*e,height:d-1}}),b("React").createElement("div",{className:(c?"":"_34j2")+(c?" _3fqp":"")+" _34j7",style:{width:this.props.canvasWidth+2*e,height:d-1}}),this.props.isDragging?this.props.selectedAssets.map(function(a){var c=this.props.assets.get(a);return b("React").createElement("div",{key:a},b("React").createElement(b("MediaEffectReactFrameEditorGridlines.react"),{asset:c,canvasSize:this.$41(),type:"vertical"}),b("React").createElement(b("MediaEffectReactFrameEditorGridlines.react"),{asset:c,canvasSize:this.$41(),type:"horizontal"}))}.bind(this)):null),b("React").createElement("input",{accept:"image/x-png, image/jpeg, image/png",multiple:!0,onChange:this.$9,ref:function(a){this.$3=a}.bind(this),style:{display:"none"},type:"file"}))};e.exports=a}),null);
__d("MediaEffectImageSnappingUtils",["MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorScalarAssetPositionRecord","MediaEffectReactFrameEditorScalarSizeRecord","MediaEffectReactFrameEditorSize","immutable","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.1,h=200,i=b("keyMirror")({TOP:null,LEFT:null,BOTTOM:null,RIGHT:null}),j=i.TOP,k=i.LEFT,l=i.RIGHT,m=i.BOTTOM;function n(a){return b("immutable").Map().withMutations(function(c){return c.set(b("immutable").Set([j,k]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:p(),y:p()})}).set(b("immutable").Set([j,l]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:q(),y:p()})}).set(b("immutable").Set([k,m]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:p(),y:q()})}).set(b("immutable").Set([l,m]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:q(),y:q()})}).set(b("immutable").Set([k,l,j]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:r(),y:p()}),size:s(a)}).set(b("immutable").Set([j]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:r(),y:p()}),size:s(a)}).set(b("immutable").Set([k,l,m]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:r(),y:q()}),size:s(a)}).set(b("immutable").Set([m]),{position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))({x:r(),y:q()}),size:s(a)})})}var o=new Map();function p(){return new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:0,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:0,asset_pixel_offset:0})}function q(){return new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_end",anchor_asset_size_percentage:0,anchor_pixel_offset:0,asset_origin:"canvas_end",asset_canvas_size_percentage:0,asset_pixel_offset:0})}function r(){return new(b("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:50,asset_pixel_offset:0})}function s(a){return new(b("MediaEffectReactFrameEditorSize").ScaleWidth)({width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:100}),aspect_ratio:a}).getScaledWithHeight()}function a(a,c){__p&&__p();if(o.get(a)!==undefined)return o.get(a);var d=document.createElement("canvas"),e=c.width,f=c.height;if(e===0||f===0)return null;var p=Math.min(e,200);f=p*f/e;e=p;d.width=e;d.height=f;p=d.getContext("2d");p.drawImage(c,0,0,e,f);var q=new Map();Object.keys(i).forEach(function(a){return q.set(a,0)});d=new Set();c=Math.ceil(e/h);var r=Math.floor(e/c),s=r*255*g;for(var t=0;t<e;t+=c)d.has(j)||(q.set(j,q.get(j)+p.getImageData(t,0,1,1).data[3]),Number(q.get(j))>s&&d.add(j)),d.has(m)||(q.set(m,q.get(m)+p.getImageData(t,f-1,1,1).data[3]),Number(q.get(m))>s&&d.add(m));c=Math.ceil(f/h);r=Math.floor(f/c);s=r*255*g;for(var t=0;t<f;t+=c)d.has(k)||(q.set(k,q.get(k)+p.getImageData(0,t,1,1).data[3]),Number(q.get(k))>s&&d.add(k)),d.has(l)||(q.set(l,q.get(l)+p.getImageData(e-1,t,1,1).data[3]),Number(q.get(l))>s&&d.add(l));p.clearRect(0,0,e,f);p.restore();r=n(e/f).get(b("immutable").Set(d));o.set(a,r);return r}function c(){o.clear()}e.exports={ImageEdges:i,getSnappingSpecs:a,init:c}}),null);
__d("MediaEffectReactFrameEditorCanvasContainer.react",["FluxContainer","MediaEffectAssetValidationStore","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorConstants","MediaEffectFrameEditorDispatcher","MediaEffectImageSnappingUtils","MediaEffectReactFrameEditorCanvas.react","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorImageAssetRecord","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore"),b("MediaEffectFrameCreateDialogDataStore"),b("MediaEffectAssetValidationStore")]};a.calculateState=function(a,c){__p&&__p();a=b("MediaEffectReactFrameEditorDataStore").getState();var d=b("MediaEffectReactFrameEditorCanvasDataStore").getState(),e=b("MediaEffectFrameCreateDialogDataStore").getState(),f=a.assets.withMutations(function(a){a.forEach(function(c,d){if(c instanceof b("MediaEffectReactFrameEditorImageAssetRecord")){var e=null;c.stickerFBID&&(e=b("MediaEffectAssetValidationStore").get(c.stickerFBID));c=c.set("validationResult",e);a.set(d,c)}})}),g=c.width?c.width-2*h:d.canvasWidth;c=c.height?c.height-2*h:d.canvasHeight;return{assets:f,assetOrder:a.assetOrder,backgroundColor:d.backgroundColor,backgroundImage:d.backgroundImage,cameraEnabled:!!d.cameraSource,canvasHeight:c,canvasWidth:g,editedTextID:d.editedTextID,selectedAssets:d.selectedAssets,isDragging:d.isDragging,flowType:e.flowType,isValidating:b("MediaEffectFrameCreateDialogDataStore").isValidating()}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores()),b("MediaEffectImageSnappingUtils").init()};a.prototype.$1=function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"coverage/update",canvasCoverage:a})};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectReactFrameEditorCanvas.react"),babelHelpers["extends"]({},a,{updateCoverage:this.$1}))};function a(){g.apply(this,arguments)}a.defaultProps={readOnly:!1,enableFontSettingsDialog:!1,enableEditorFreeText:!1,showTitle:!1,includesPhoneFrame:!1};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectFrameEditorFont",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;b("immutable").Map;d=b("immutable").Record;g=babelHelpers.inherits(a,d({id:null,name:null,source:null}));g&&g.prototype;a.prototype.getName=function(){return this.name};a.prototype.getFontFamily=function(){return"'"+this.id+"'"};a.prototype.getID=function(){return this.id};a.prototype.getSystemFontName=function(){return null};a.prototype.getCustomFontID=function(){return this.id};a.prototype.getSource=function(){return this.source};function a(){g.apply(this,arguments)}h=babelHelpers.inherits(c,d({fontFamily:null,name:null}));h&&h.prototype;c.prototype.getName=function(){return this.name||this.fontFamily};c.prototype.getFontFamily=function(){return this.fontFamily};c.prototype.getID=function(){return this.fontFamily};c.prototype.getSystemFontName=function(){return this.fontFamily};c.prototype.getCustomFontID=function(){return null};c.prototype.getSource=function(){return null};function c(){h.apply(this,arguments)}e.exports.CustomFontRecord=a;e.exports.SystemFontRecord=c}),null);
__d("XMediaEffectAsyncFontController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/async_fonts/",{font_ids:{type:"FBIDSet"}})}),null);
__d("MediaEffectReactFrameEditorCanvasDataStore",["AsyncRequest","FluxReduceStore","MediaEffectFrameEditorConstants","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorFont","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectMetadataActionCreators","MediaEffectQEUtils","MediaEffectReactFrameDeserializer","MediaEffectReactFrameEditorDataStore","XMediaEffectAsyncFontController","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("immutable").List;c=b("immutable").Map;d=b("immutable").OrderedMap;f=b("immutable").Record;var j=b("immutable").Set,k=400,l=400,m=2400;g=babelHelpers.inherits(n,f({selectedAssets:j(),editedTextID:null,isDragging:!1,unsavedChanges:!1,fullImageSize:m,cameraSource:null,cameraPaused:!1,canvasWidth:k,canvasHeight:l,backgroundColor:"#ffffff",backgroundImage:null,fonts:c(),templates:c(),templateCategories:d(),canvasCoverage:0}));g&&g.prototype;n.prototype.getTemplate=function(a){return!a?null:this.templates.get(a)};n.prototype.getTemplateVariants=function(a){__p&&__p();a=this.getTemplate(a);if(!a)return null;a=a.sourceTemplateFBID?this.getTemplate(a.sourceTemplateFBID):a;if(!a)return null;a=a.variants.splice(0,0,a.templateFBID);a=a.map(function(a){return this.getTemplate(a)}.bind(this));return i(a.toArray().filter(Boolean))};function n(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new n()};a.prototype.reduce=function(a,c){__p&&__p();switch(c.type){case"select/assetOnly":a=a.set("selectedAssets",j([c.localAssetID])).set("editedTextID",null);break;case"select/asset":a=a.set("selectedAssets",a.selectedAssets.add(c.localAssetID)).set("editedTextID",null);break;case"delete/asset":a=a.set("unsavedChanges",!0).set("selectedAssets",a.selectedAssets.remove(c.localAssetID)).set("editedTextID",null);break;case"duplicate/asset":a=a.set("selectedAssets",j([b("MediaEffectReactFrameEditorDataStore").getState().assets.map(function(a){return a.localAssetID}).max()]));break;case"deselect/asset":a=a.set("selectedAssets",a.selectedAssets.remove(c.localAssetID)).set("editedTextID",null);break;case"deselect/all":a=a.set("selectedAssets",a.selectedAssets.clear()).set("editedTextID",null);break;case"edit/text":var d=c.localAssetID;a=a.set("editedTextID",d);d&&b("MediaEffectReactFrameEditorDataStore").getState().assets.get(d).get("assocTextAsset")&&(a=a.set("selectedAssets",a.selectedAssets.remove(d)));break;case"select/all":a=a.set("selectedAssets",j.fromKeys(b("MediaEffectReactFrameEditorDataStore").getState().assets));a.set("editedTextID",null);break;case"init/frameData":a=a.set("selectedAssets",j()).set("canvasCoverage",0).set("isDragging",!1).set("unsavedChanges",!1);break;case"add/fontData":c.data&&(a=a.set("fonts",this.$MediaEffectReactFrameEditorCanvasDataStore1(a.fonts,c.data)));break;case"add/templateData":a=this.$MediaEffectReactFrameEditorCanvasDataStore2(a,c.data,c.variants);break;case"set/isDragging":a=a.set("isDragging",c.isDragging);break;case"coverage/update":a=a.set("canvasCoverage",c.canvasCoverage);break;case"save":a=a.set("unsavedChanges",!1);break;case"add/image":case"add/text":case"update/assetPosition":case"update/assetSize":case"update/asset/raise":case"update/asset/lower":case"update/textContent":case"update/textFonts":a=a.set("unsavedChanges",!0);break;case"set/cameraSource":a=a.set("cameraSource",c.cameraSource);break;case"pause/camera":a=a.set("cameraPaused",!0);break;case"resume/camera":a=a.set("cameraPaused",!1);break;case"update/backgroundColor":a=a.set("backgroundColor",c.color);break;case"update/backgroundImage":a=a.set("backgroundImage",c.image);break;case"set/screenDimensions":d=b("MediaEffectFullscreenFrameEditorSizingUtils").getCanvasSize(c.screenWidth,c.dialogHeight);var e=b("MediaEffectQEUtils").shouldDefaultToPortrait(c.flowType),f=d;e&&(d*=b("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO,f=d*b("MediaEffectFrameEditorConstants").PORTRAIT_CANVAS_RATIO);a=a.set("canvasWidth",f).set("canvasHeight",d);break;case"apply/template":a=this.$MediaEffectReactFrameEditorCanvasDataStore3(a,c.templateFBID,c.frameData);break;case"bootstrap/fontData":this.$MediaEffectReactFrameEditorCanvasDataStore4();break}return a};a.prototype.$MediaEffectReactFrameEditorCanvasDataStore4=function(){var a=b("XMediaEffectAsyncFontController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setHandler(function(a){return b("MediaEffectMetadataActionCreators").addFontData(a.getPayload())}).send()};a.prototype.$MediaEffectReactFrameEditorCanvasDataStore3=function(a,b,c){return a.setIn(["templates",b,"frameData"],c)};a.prototype.$MediaEffectReactFrameEditorCanvasDataStore1=function(a,c){var d=[];a=a.withMutations(function(a){c.forEach(function(c){var e=new(b("MediaEffectFrameEditorFont").CustomFontRecord)({id:c.id,name:c.name,source:c.uri}),f=a.get(e.getID());(!f||f.id!==e.id||f.name!==e.name||f.source!==e.source)&&(d.push(c),a.set(e.getID(),e))})});this.$MediaEffectReactFrameEditorCanvasDataStore5(d);return a};a.prototype.$MediaEffectReactFrameEditorCanvasDataStore2=function(a,b,c){return a.withMutations(function(a){Object.keys(b).forEach(function(c){var d=b[c];this.$MediaEffectReactFrameEditorCanvasDataStore6(a,d);d=d.map(function(a){return a.id});a.setIn(["templateCategories",c],i(d))}.bind(this)),this.$MediaEffectReactFrameEditorCanvasDataStore6(a,c)}.bind(this))};a.prototype.$MediaEffectReactFrameEditorCanvasDataStore6=function(a,c){c.forEach(function(c){if(!a.templates.has(c.id)){var d=b("MediaEffectReactFrameDeserializer").deserializeTemplate(c);a.setIn(["templates",c.id],d)}})};a.prototype.$MediaEffectReactFrameEditorCanvasDataStore5=function(a){__p&&__p();var b=document.getElementById("custom_frame_fonts"),c=b||document.createElement("style");b||c.setAttribute("id","custom_frame_fonts");a=j(a.map(function(a){return"@font-face { font-family: '"+a.id+"'; src: url('"+a.uri+"') format('opentype');}"}));for(var d=0;d<c.childNodes.length;++d){var e=c.childNodes.item(d);e instanceof Text&&a["delete"](e.data)}a.forEach(function(a){return c.appendChild(document.createTextNode(a))});if(!b){e=document.head||document.getElementsByTagName("head")[0];e&&e.appendChild(c)}};a.prototype.hasUnsavedChanges=function(){return this.getState().unsavedChanges};a.prototype.getFont=function(a){var b=this.getState().fonts;a=b.get(a);return a||b.first()};a.prototype.getFonts=function(){return this.getState().fonts.toArray().sort(function(a,b){return a.getName().toLowerCase().localeCompare(b.getName().toLowerCase())})};a.prototype.getInitialImageScale=function(){var a=this.getState().fullImageSize;return 100/a};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectReactFrameEditorCanvasImageAsset.react",["MediaEffectEditorFunnelLogger","MediaEffectImageSnappingUtils","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorImageAsset.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a=b("ReactDOM").findDOMNode(a);if(a instanceof HTMLImageElement){a=b("MediaEffectImageSnappingUtils").getSnappingSpecs(this.props.localAssetID,a);if(a){var c=a.size?"banner":"corner";b("MediaEffectEditorFunnelLogger").logAutoSnapping(c);b("MediaEffectMetadataActionCreators").setAutoSnapping(this.props.localAssetID,c,a)}}}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("MediaEffectReactFrameEditorImageAsset.react"),babelHelpers["extends"]({},this.props,{adjustPosition:this.$1}))};e.exports=a}),null);
__d("MediaEffectValidationTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({ASSET_NUMBER_LIMIT:"",CANVAS_COVERAGE_LIMIT:""});e.exports=a}),null);
__d("MediaEffectReactFrameEditorDataStore",["fbt","FluxReduceStore","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorDataRecord","MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectReactFrameDeserializer","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorScalarSizeRecord","MediaEffectReactFrameEditorSize","MediaEffectReactFrameEditorTextAssetRecord","MediaEffectTemplateDataStore","MediaEffectValidationTypes","Vector","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=1,j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function k(){return i++}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new(b("MediaEffectFrameEditorDataRecord"))()};a.prototype.$MediaEffectReactFrameEditorDataStore1=function(a){var c=this.getInitialState();if(a){a=b("MediaEffectReactFrameDeserializer").deserializeData(a);c=c.set("assets",a.assets).set("assetOrder",a.assetOrder).set("frameFBID",a.frameFBID).set("filterID",a.filterID).set("templateFBID",a.templateFBID)}a=c.assets.size>0?Math.max.apply(Math,c.assets.map(function(a){return a.localAssetID}).toArray()):0;i=a+1;return c};a.prototype.reduce=function(a,c){__p&&__p();switch(c.type){case"init/frameData":a=this.$MediaEffectReactFrameEditorDataStore1(c.data);break;case"save":c.effectID&&(a=a.set("frameFBID",c.effectID));break;case"add/image":if(a.assets.size>15)b("setImmediate")(function(){return b("MediaEffectMetadataActionCreators").addValidation(b("MediaEffectValidationTypes").ASSET_NUMBER_LIMIT)});else{var d=k(),e=new(b("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:d,file:c.imageFile,localImageURI:URL.createObjectURL(c.imageFile),position:c.position?c.position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))(),assetSize:null});a=a.withNewAsset(d,e);e.upload()["catch"](function(a){});b("setImmediate")(function(){b("MediaEffectMetadataActionCreators").deselectAll(),b("MediaEffectMetadataActionCreators").selectAsset(d)})}break;case"replace/image":e=a.assets.get(c.localAssetID)||new(b("MediaEffectReactFrameEditorImageAssetRecord"))();e=new(b("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:c.localAssetID,file:c.imageFile,localImageURI:URL.createObjectURL(c.imageFile),position:e.position,assetSize:e.assetSize});a=a.replaceAsset(c.localAssetID,e);e.upload()["catch"](function(a){});break;case"update/image":e=a.assets.get(c.localAssetID);if(e){e=e.set("processedImageURI",c.imageURI);a=a.replaceAsset(c.localAssetID,e)}break;case"replace/startRemovingBackground":e=a.assets.get(c.localAssetID);if(e){e=e.set("stickerFBID",null);a=a.replaceAsset(c.localAssetID,e)}break;case"replace/imageBackground":e=a.assets.get(c.localAssetID);if(e){e=e.set("localImageURI",c.imageURI).set("stickerFBID",c.imageID).set("processApplied",!0);a=a.replaceAsset(c.localAssetID,e)}break;case"update/textImage":e=c.localAssetID;var f=c.localImageURI,g=c.file,h=c.textContent,i=c.assetSize,j=a.assets.get(e);if(!j)break;var l=j.assocTextAsset;if(!l||f===j.localImageURI&&h===l.content)break;j=b("MediaEffectReactFrameEditorCanvasDataStore").getState();l=j.canvasWidth;j=j.canvasHeight;var m=new(b("MediaEffectReactFrameEditorSize").Fit)({width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:i.x/l*100}),height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:i.y/j*100}),aspect_ratio:i.y?i.x/i.y:1});a=a.withAssetMutation(e,function(a){return a.set("localImageURI",f).set("file",g).set("assetSize",m)});a=a.withTextAssetMutation(c.localAssetID,function(a){return a.set("content",h).set("dirty",!0)});break;case"add/text":var n=c.content?this.newTextAsset(c.content,c.position):this.newTextImageAsset(c.position);n instanceof b("MediaEffectReactFrameEditorImageAssetRecord")&&window.setTimeout(function(){b("MediaEffectMetadataActionCreators").deselectAll(),window.setTimeout(function(){b("MediaEffectMetadataActionCreators").editText(n.localAssetID)})},0);a=a.withNewAsset(n.localAssetID,n);break;case"duplicate/asset":l=k();j=this.$MediaEffectReactFrameEditorDataStore2(l,a.assets.get(c.localAssetID));j&&(a=a.withNewAsset(l,j));break;case"update/assetPosition":var o=c.position;a=a.withAssetMutation(c.localAssetID,function(a){a=a.set("position",o);a instanceof b("MediaEffectReactFrameEditorImageAssetRecord")&&(a=a.set("autoSnappedType",null));return a});break;case"update/assetSize":var p=c.size;a=a.withAssetMutation(c.localAssetID,function(a){a=a.set("assetSize",p);a instanceof b("MediaEffectReactFrameEditorImageAssetRecord")&&(a=a.set("autoSnappedType",null));return a});break;case"update/autoSnapping":var q=c.autoSnappedType;i=c.specs;var r=i.size,s=i.position;a=a.withAssetMutation(c.localAssetID,function(a){return a.set("assetSize",r?r:a.assetSize).set("position",s?s:a.position).set("autoSnappedType",q)});break;case"update/assetNativeSize":a=this.$MediaEffectReactFrameEditorDataStore3(a,c.localAssetID,c.size);break;case"update/stickerFBID":var t=c.stickerFBID;e=c.localTemplateID?c.localTemplateID:null;(!b("MediaEffectFrameCreateDialogDataStore").isTemplateFlow()||e===b("MediaEffectTemplateDataStore").getState().currentTemplateVariationID)&&(a=a.withAssetMutation(c.localAssetID,function(a){return a.set("stickerFBID",t)}),a=a.withTextAssetMutation(c.localAssetID,function(a){return a.set("dirty",!1)}));break;case"update/asset/raise":l=c.toTop;a=a.withRaisedAsset(c.localAssetID,l);break;case"update/asset/lower":j=c.toBottom;a=a.withLoweredAsset(c.localAssetID,j);break;case"delete/asset":a=a.withDeletedAsset(c.localAssetID);break;case"update/textContent":var u=c.content;a=a.withTextAssetMutation(c.localAssetID,function(a){return a.set("content",u)});break;case"update/textFonts":var v=c.font;c.localTextIDs.forEach(function(b){return a=a.withTextAssetMutation(b,function(a){return a.set("font",v)})});break;case"update/textColors":var w=c.color;c.localTextIDs.forEach(function(b){return a=a.withTextAssetMutation(b,function(a){return a.set("color",w)})});break;case"update/textAlignments":var x=c.textAlignment;c.localTextIDs.forEach(function(b){return a=a.withTextAssetMutation(b,function(a){return a.set("textHorizontalAlignment",x)})});break;case"update/frameFilterID":a=a.set("filterID",c.filterID);break;case"apply/template":a=this.$MediaEffectReactFrameEditorDataStore4(a,c.templateFBID,c.frameData);break;case"clear/template":a=this.$MediaEffectReactFrameEditorDataStore5(a);break;case"change/step":b("MediaEffectFrameCreateDialogDataStore").isTemplateFlow()&&(a=b("MediaEffectTemplateDataStore").getFrameData(null));break;case"set/currentTemplateVariation":a=b("MediaEffectTemplateDataStore").getFrameData(c.localTemplateID);break}return a};a.prototype.$MediaEffectReactFrameEditorDataStore5=function(a){a.assets.forEach(function(b){b.sourceTemplateAssetFBID&&(a=a.withDeletedAsset(b.localAssetID))});return a.set("templateFBID",null)};a.prototype.$MediaEffectReactFrameEditorDataStore4=function(a,c,d){a=this.$MediaEffectReactFrameEditorDataStore5(a);a=a.set("templateFBID",d.frameFBID).set("filterID",d.filterID);d.assetOrder.forEach(function(c){var e=k();c=d.assets.get(c);c=c.set("localAssetID",e).set("sourceTemplateAssetFBID",c.assetFBID).set("assetFBID",null).set("readOnly",c instanceof b("MediaEffectReactFrameEditorImageAssetRecord"));a=a.withNewAsset(e,c)});return a};a.prototype.$MediaEffectReactFrameEditorDataStore2=function(a,b){if(b.assetType()!=="MediaEffectReactFrameEditorImageAssetRecord")return this.$MediaEffectReactFrameEditorDataStore6(a,b);var c=b.assocTextAsset;if(!b.stickerFBID&&!c)return null;else if(c)return this.$MediaEffectReactFrameEditorDataStore7(a,b,c);return this.$MediaEffectReactFrameEditorDataStore8(a,b)};a.prototype.$MediaEffectReactFrameEditorDataStore8=function(a,c){return new(b("MediaEffectReactFrameEditorImageAssetRecord"))({assetSize:c.assetSize,file:c.file,hostedImageURI:c.hostedImageURI,localImageURI:c.localImageURI,nativeSize:c.nativeSize,stickerFBID:c.stickerFBID,assetFBID:null,localAssetID:a,position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))()})};a.prototype.$MediaEffectReactFrameEditorDataStore6=function(a,c){return new(b("MediaEffectReactFrameEditorTextAssetRecord"))({assetSize:c.assetSize,color:c.color,content:c.content,font:c.font,textHorizontalAlignment:c.textHorizontalAlignment,assetFBID:null,localAssetID:a,position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))()})};a.prototype.$MediaEffectReactFrameEditorDataStore7=function(a,c,d){d=new(b("MediaEffectReactFrameEditorTextAssetRecord"))({localAssetID:a,font:d.font,fontName:d.fontName,content:d.content,color:d.color,textHorizontalAlignment:d.textHorizontalAlignment});return new(b("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:a,localImageURI:j,position:new(b("MediaEffectReactFrameEditorAssetPositionRecord"))(),assocTextAsset:d,assetSize:c.assetSize})};a.prototype.getEffectID=function(){return this.getState().frameFBID};a.prototype.areAllImageAssetsUploaded=function(){var a=this.getState().assets;return a.every(function(a){var c=a instanceof b("MediaEffectReactFrameEditorTextAssetRecord");return c||!!a.stickerFBID||!!a.assocTextAsset})};a.prototype.hasAssets=function(){var a=this.getState().assets;return a.size>0};a.prototype.isValidForSubmit=function(){var a=this.getState().assets;return a.size>0&&a.every(function(a){var c=a instanceof b("MediaEffectReactFrameEditorTextAssetRecord");return c||!!a.stickerFBID||!!a.assocTextAsset})};a.prototype.newTextAsset=function(a,c){var d=k();return new(b("MediaEffectReactFrameEditorTextAssetRecord"))({localAssetID:d,position:c||new(b("MediaEffectReactFrameEditorAssetPositionRecord"))(),font:b("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first(),fontName:b("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first().getName(),content:a,assetSize:new(b("MediaEffectReactFrameEditorSize").Stretch)({height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:10}),width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:100})}),color:"#ffffff",textHorizontalAlignment:"center"})};a.prototype.newTextImageAsset=function(a){var c=g._("Nh\u1eadp v\u0103n b\u1ea3n t\u1ea1i \u0111\u00e2y").toString(),d=k();c=new(b("MediaEffectReactFrameEditorTextAssetRecord"))({localAssetID:d,font:b("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first(),fontName:b("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first().getName(),content:c,color:"#ffffff",textHorizontalAlignment:"center"});var e=b("MediaEffectReactFrameEditorCanvasDataStore").getState(),f=e.canvasHeight;e=e.canvasWidth;return new(b("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:d,localImageURI:j,position:a||new(b("MediaEffectReactFrameEditorAssetPositionRecord"))(),assocTextAsset:c,assetSize:new(b("MediaEffectReactFrameEditorSize").Fit)({height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:10}),width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:100}),aspect_ratio:100*e/10*f})})};a.prototype.$MediaEffectReactFrameEditorDataStore3=function(a,c,d){__p&&__p();a=a.withAssetMutation(c,function(a){return a.set("nativeSize",d)});var e=a.assets.get(c).assetSize,f=!!a.assets.get(c).assocTextAsset;if(d.y){var g=d.x/d.y;if(!e){f=f?100/b("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasHeight:b("MediaEffectReactFrameEditorCanvasDataStore").getInitialImageScale();e=new(b("MediaEffectReactFrameEditorSize").Fit)({width:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:d.x*f}),height:new(b("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:d.y*f}),aspect_ratio:g})}else e=e.set("aspect_ratio",g)}a=a.withAssetMutation(c,function(a){return a.set("assetSize",e)});f=a.assets.get(c).position;if(e&&e.isValid()&&f&&!f.isBackendCompatible()){g=b("MediaEffectReactFrameEditorCanvasDataStore").getState();var h=g.canvasWidth;g=g.canvasHeight;h=new(b("Vector"))(h,g);var i=b("MediaEffectReactFrameEditorAssetPositionRecord").canonical(f.toAbsolute(h,e.toAbsolute(h)),h);a=a.withAssetMutation(c,function(a){return a.set("position",i)})}return a};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectReactFrameEditorImageAsset.react",["cx","Image.react","MediaEffectMetadataActionCreators","React","ReactDOM","Vector"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$4=function(){this.$2=!0,this.$1&&(this.$5(),this.$6()&&(this.props.adjustPosition&&this.props.adjustPosition(this.$1)))}.bind(this),b}a.prototype.$5=function(){if(this.$3)return;this.$3=!0;var a=b("ReactDOM").findDOMNode(this.$1);b("MediaEffectMetadataActionCreators").updateAssetNativeSize(this.props.localAssetID,new(b("Vector"))(a.width,a.height))};a.prototype.$6=function(){if(this.props.imageRecord.assocTextAsset)return!1;return this.props.imageRecord.stickerFBID?!1:!0};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_55jn _4u2a",onLoad:this.$4,ref:function(a){this.$1=a,this.$1&&this.$2&&this.$5()}.bind(this),src:this.props.isInPreview&&this.props.imageRecord.processedImageURI?this.props.imageRecord.processedImageURI:this.props.imageRecord.getURI()}))};e.exports=a}),null);
__d("MediaEffectArtValidationType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MEDIA_EFFECT_ART_VALID:"media_effect_art_valid",MEDIA_EFFECT_ART_IS_EVENT_COVER_PHOTO:"media_effect_art_is_event_cover_photo",MEDIA_EFFECT_ART_IS_PHOTO:"media_effect_art_is_photo"})}),null);
__d("XGetUploadedImageForFrameEditorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/media_effect/swipeable_frame/image/upload_poll/",{job_id:{type:"String",required:!0}})}),null);
__d("XUploadImageForFrameEditorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/media_effect/swipeable_frame/image/upload/",{})}),null);
__d("XUploadImageWithConversionForFrameEditorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/media_effect/swipeable_frame/image/upload_convert/",{})}),null);
__d("retry",["regeneratorRuntime","asyncSleep"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(i,Error);h=g&&g.prototype;function i(a,b,c,d){h.constructor.call(this,a),this.message=a,this.values=b,this.errors=c,this.options=d}function j(a){this.$1=babelHelpers["extends"]({},j.RETRY_OPTION_DEFAULTS,a),this.$2=0,this.$3=!1,this.$4=!1,this.$5=[],this.$6=[],this.$7=null,this.$8=0,this.$9()}j.prototype.$9=function(){if(this.$1.interval&&this.$1.interval<0)throw new i("C'mon, interval < 0 makes no sense.",[],[],this.$1);if(this.$1.backoff&&this.$1.backoff<1)throw new i("backoff must be >= 1",[],[],this.$1);if(this.$1.jitter&&(this.$1.jitter<0||this.$1.jitter>1))throw new i("jitter must be in range [0, 1]",[],[],this.$1)};j.prototype.onValue=function(){this.$1.retryValues||(this.$1.retryValues=[]);for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$1.retryValues=this.$1.retryValues.concat(b);return this};j.prototype.untilValue=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return this.untilValueMatches(function(a){return b.indexOf(a)!==-1})};j.prototype.onFalsy=function(){return this.onValueMatches(function(a){return!a})};j.prototype.onTruthy=function(){return this.onValueMatches(function(a){return!!a})};j.prototype.untilTruthy=function(){return this.onFalsy()};j.prototype.untilFalsy=function(){return this.onTruthy()};j.prototype.onNull=function(){return this.onValueMatches(function(a){return a===null})};j.prototype.onUndefined=function(){return this.onValueMatches(function(a){return a===undefined})};j.prototype.onValueMatches=function(){this.$1.retryValueMatchers||(this.$1.retryValueMatchers=[]);for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$1.retryValueMatchers=this.$1.retryValueMatchers.concat(b);return this};j.prototype.untilValueMatches=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return this.onValueMatches.apply(this,b.map(function(a){return function(b){return!a(b)}}))};j.prototype.onError=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(b.length===0)return this.onErrorMatches(function(a){return!0});this.$1.retryErrorClasses||(this.$1.retryErrorClasses=[]);this.$1.retryErrorClasses=this.$1.retryErrorClasses.concat(b);return this};j.prototype.onErrorMatches=function(){this.$1.retryErrorMatchers||(this.$1.retryErrorMatchers=[]);for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$1.retryErrorMatchers=this.$1.retryErrorMatchers.concat(b);return this};j.prototype.limit=function(a){this.$1.retries=a;this.$9();return this};j.prototype.once=function(){return this.limit(1)};j.prototype.twice=function(){return this.limit(2)};j.prototype.withInterval=function(a){this.$1.interval=a;this.$9();return this};j.prototype.withMaxInterval=function(a){this.$1.maxInterval=a;return this};j.prototype.withMinInterval=function(a){this.$1.minInterval=a;return this};j.prototype.withBackoff=function(a){this.$1.backoff=a;this.$9();return this};j.prototype.withJitter=function(a){this.$1.jitter=a;this.$9();return this};j.prototype.abort=function(){this.$3=!0};j.prototype.getCallCount=function(){return this.$2};j.prototype.getValues=function(){return this.$5};j.prototype.getErrors=function(){return this.$6};j.prototype.isRunning=function(){return this.$4};j.prototype.call=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:if(!this.$4){e.next=2;break}throw new i("Cannot reuse a retry object while it is still running!",[],[],this.$1);case 2:this.$4=!0,e.prev=3,this.$7=a,this.$6=[],this.$5=[];case 7:if(!(!this.$1.retries||this.$2<this.$1.retries+1)){e.next=33;break}if(!(this.$2>0)){e.next=12;break}c=this.$10();e.next=12;return b("regeneratorRuntime").awrap(b("asyncSleep")(c));case 12:if(!this.$3){e.next=14;break}throw new i("Retry aborted.",this.$5,this.$6,this.$1);case 14:e.prev=14;this.$2++;e.next=18;return b("regeneratorRuntime").awrap(a());case 18:d=e.sent;this.$5.push(d);if(!this.$11(d)){e.next=22;break}return e.abrupt("continue",7);case 22:return e.abrupt("return",d);case 25:e.prev=25;e.t0=e["catch"](14);this.$6.push(e.t0);if(!this.$12(e.t0)){e.next=30;break}return e.abrupt("continue",7);case 30:throw e.t0;case 31:e.next=7;break;case 33:throw new i("Max call count exceeded.",this.$5,this.$6,this.$1);case 34:e.prev=34;this.$4=!1;return e.finish(34);case 37:case"end":return e.stop()}},null,this,[[3,,34,37],[14,25]])};j.prototype.$10=function(){return Math.max(0,this.$13(this.$14()))};j.prototype.$13=function(a){a=a;this.$1.minInterval&&(a=Math.max(a,this.$1.minInterval));this.$1.maxInterval&&(a=Math.min(a,this.$1.maxInterval));return a};j.prototype.$14=function(){return this.$15()+this.$16()};j.prototype.$17=function(){return this.$1.interval?this.$1.interval:0};j.prototype.$18=function(){return this.$1.backoff?this.$1.backoff:1};j.prototype.$15=function(){var a=this.$17(),b=this.$18();return a*Math.pow(b,this.$2-1)};j.prototype.$16=function(){var a=this.$19(),b=a-this.$8;this.$8=a;return b};j.prototype.$19=function(){var a=this.$1.jitter;if(!a)return 0;var b=Math.random()*2-1;b=b*b*b*a/2;a=this.$17();var c=this.$18(),d=c-1;return d<1e-6?a*Math.pow(c,this.$2)*(b+d*(b*b-b)/2):a*Math.pow(c,this.$2)*(Math.pow(c,b)-1)/(c-1)};j.prototype.$11=function(a){return!!this.$1.retryValues&&this.$1.retryValues.indexOf(a)!==-1||!!this.$1.retryValueMatchers&&this.$1.retryValueMatchers.some(function(b){return b(a)})};j.prototype.$12=function(a){return!!this.$1.retryErrorClasses&&this.$1.retryErrorClasses.some(function(b){return a instanceof b})||!!this.$1.retryErrorMatchers&&this.$1.retryErrorMatchers.some(function(b){return b(a)})};j.RETRY_OPTION_DEFAULTS={interval:1e3,backoff:1,jitter:.25};function a(a,c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(new j(c).call(a));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},null,this)}a.Retry=j;a.RetryError=i;function c(){var a;return(a=new j()).onValue.apply(a,arguments)}a.onValue=c;function d(){var a;return(a=new j()).untilValue.apply(a,arguments)}a.untilValue=d;function f(){return new j().onFalsy()}a.onFalsy=f;function k(){return new j().onTruthy()}a.onTruthy=k;function l(){return new j().untilTruthy()}a.untilTruthy=l;function m(){return new j().untilFalsy()}a.untilFalsy=m;function n(){return new j().onNull()}a.onNull=n;function o(){return new j().onUndefined()}a.onUndefined=o;function p(){var a;return(a=new j()).onValueMatches.apply(a,arguments)}a.onValueMatches=p;function q(){var a;return(a=new j()).untilValueMatches.apply(a,arguments)}a.untilValueMatches=q;function r(){var a;return(a=new j()).onError.apply(a,arguments)}a.onError=r;function s(){var a;return(a=new j()).onErrorMatches.apply(a,arguments)}a.onErrorMatches=s;function t(a){return new j().limit(a)}a.limit=t;function u(){return new j().once()}a.once=u;function v(){return new j().twice()}a.twice=v;function w(a){return new j().withInterval(a)}a.withInterval=w;function x(a){return new j().withMaxInterval(a)}a.withMaxInterval=x;function y(a){return new j().withMinInterval(a)}a.withMinInterval=y;function z(a){return new j().withBackoff(a)}a.withBackoff=z;function A(a){return new j().withJitter(a)}a.withJitter=A;e.exports=a}),null);
__d("MediaEffectReactFrameEditorImageAssetRecord",["regeneratorRuntime","Promise","AsyncRequest","AsyncRequestUtil","AsyncResponse","AsyncUploadRequest","MediaEffectArtValidationType","MediaEffectFrameCreateDialogDataStore","MediaEffectImageTransmogrifier","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorDataStore","MediaEffectTemplateDataStore","XGetUploadedImageForFrameEditorController","XUploadImageForFrameEditorController","XUploadImageWithConversionForFrameEditorController","immutable","retry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;d=b("immutable").Record;a.URL=a.URL||a.webkitURL;g=babelHelpers.inherits(c,d({localAssetID:null,file:null,localImageURI:null,hostedImageURI:null,processedImageURI:null,processApplied:!1,assetSize:null,nativeSize:null,position:null,stickerFBID:null,assetFBID:null,readOnly:!1,sourceTemplateAssetFBID:null,validationResult:null,autoSnappedType:null,assocTextAsset:null}));g&&g.prototype;c.prototype.getURI=function(){if(this.localImageURI)return this.localImageURI;if(this.hostedImageURI)return this.hostedImageURI;throw new Error("ImageAssetRecord has no URI")};c.prototype.assetType=function(){return"MediaEffectReactFrameEditorImageAssetRecord"};c.prototype.reColored=function(a,c){__p&&__p();var d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:d=new(b("MediaEffectImageTransmogrifier").ColorTransform)(this.getURI(),!1,a,c);g.next=3;return b("regeneratorRuntime").awrap(d.toBlob());case 3:e=g.sent;f=URL.createObjectURL(e);return g.abrupt("return",this.withMutations(function(a){a.set("file",e),a.set("localImageURI",f),a.set("hostedImageURI",null),a.set("stickerFBID",null),a.set("sourceTemplateAssetFBID",a.assetFBID),a.set("assetFBID",null),a.set("validationResult",null)}));case 6:case"end":return g.stop()}},null,this)};c.prototype.upload=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord1()["catch"](function(a){this.$MediaEffectReactFrameEditorImageAssetRecord2()}.bind(this)));case 2:case"end":return a.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord2=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a=b("MediaEffectTemplateDataStore").getState().currentTemplateVariationID;c.next=3;return b("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord3(a));case 3:case"end":return c.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord1=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a=b("MediaEffectTemplateDataStore").getState().currentTemplateVariationID;c.next=3;return b("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord4(a));case 3:case"end":return c.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord5=function(a,c){__p&&__p();return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:return d.abrupt("return",new(b("Promise"))(function(d,e){var f=new(b("AsyncUploadRequest"))(a).setFiles({flist:[c]}).setData({flow_source_id:b("MediaEffectFrameCreateDialogDataStore").getState().sourceID,flow_type:b("MediaEffectFrameCreateDialogDataStore").getState().flowType}).setAllowCrossOrigin(!1);f.subscribe("success",function(a,b){return d(b.getResponse().getPayload())});f.subscribe("failure",function(a,b){return e(b.getResponse())});f.send()}));case 1:case"end":return d.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord3=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=b("XUploadImageForFrameEditorController").getURIBuilder().getURI();e.next=3;return b("regeneratorRuntime").awrap(b("retry").onError(b("AsyncResponse")).untilValueMatches(function(a){return!!a.id}).limit(3).call(this.$MediaEffectReactFrameEditorImageAssetRecord5.bind(this,c,this.file)));case 3:d=e.sent,b("MediaEffectMetadataActionCreators").updateStickerFBID(this.localAssetID,d.id.toString(),a);case 5:case"end":return e.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord4=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord6());case 2:c=d.sent;d.next=5;return b("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord7(c,a));case 5:case"end":return d.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord6=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=b("XUploadImageWithConversionForFrameEditorController").getURIBuilder().getURI();d.next=3;return b("regeneratorRuntime").awrap(b("retry").onError(b("AsyncResponse")).untilValueMatches(function(a){return!!a.job_id}).limit(3).call(this.$MediaEffectReactFrameEditorImageAssetRecord5.bind(this,a,this.file)));case 3:c=d.sent;return d.abrupt("return",c.job_id.toString());case 5:case"end":return d.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord7=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(b("retry").withBackoff(1.5).withMaxInterval(1e4).onError(b("AsyncResponse")).limit(15).untilValueMatches(function(a){return a&&a.id}).call(this.$MediaEffectReactFrameEditorImageAssetRecord8.bind(this,a,c)));case 2:d=e.sent,b("MediaEffectMetadataActionCreators").updateValidationResult(d.id.toString(),{success:d.validationResult,validateType:d.validationReasons.length?d.validationReasons[0].validateType:b("MediaEffectArtValidationType").MEDIA_EFFECT_ART_VALID,reason:d.validationReasons.length?d.validationReasons[0].reason:""},c),b("MediaEffectMetadataActionCreators").updateStickerFBID(this.localAssetID,d.id.toString(),c),b("MediaEffectMetadataActionCreators").processBackground(this.localAssetID,d.id.toString());case 6:case"end":return e.stop()}},null,this)};c.prototype.$MediaEffectReactFrameEditorImageAssetRecord8=function(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=b("XGetUploadedImageForFrameEditorController").getURIBuilder().setString("job_id",a).getURI();d=new(b("AsyncRequest"))(c).setAllowCrossOrigin(!1);f.next=4;return b("regeneratorRuntime").awrap(b("AsyncRequestUtil").send(d));case 4:e=f.sent;return f.abrupt("return",e.getPayload());case 6:case"end":return f.stop()}},null,this)};c.prototype.getInstanceFromStore=function(){return b("MediaEffectReactFrameEditorDataStore").getState().assets.get(this.localAssetID)};function c(){g.apply(this,arguments)}e.exports=c}),null);
__d("MediaEffectReactFrameEditorPreview.react",["cx","LayerHideOnBlur","MediaEffectFramePhonePreviewContainer.react","MediaEffectFramePreviewConfigs","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectReactFrameEditorCameraContainer.react","MediaEffectReactFrameEditorPreviewCanvas.react","React","XUIContextualDialog.react","XUIContextualDialogBody.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={showFullPreview:!1},this.$3=function(){return this.setState({showFullPreview:!0})}.bind(this),this.$2=function(){return this.setState({showFullPreview:!1})}.bind(this),this.$5=function(){return this.thumbnailRoot}.bind(this),this.$6=function(a){a!==this.state.showFullPreview&&this.setState({showFullPreview:a})}.bind(this),b}a.prototype.$1=function(a){var c=this.props.previewWidth*a;a=this.props.previewHeight*a;return b("React").createElement("div",{className:"_5gzu",onMouseOut:this.$2,onMouseOver:this.$3,style:{width:c,height:a}},this.props.cameraEnabled?b("React").createElement(b("MediaEffectReactFrameEditorCameraContainer.react"),{height:a,width:c}):null,b("React").createElement(b("MediaEffectReactFrameEditorPreviewCanvas.react"),{assetOrder:this.props.assetOrder,assets:this.props.assets,backgroundColor:this.props.cameraEnabled?"transparent":this.props.backgroundColor,backgroundImage:this.props.backgroundImage,disableBackgroundImage:this.props.cameraEnabled,isCircle:this.props.isCircle,previewHeight:a,previewWidth:c}))};a.prototype.$4=function(){var a=b("MediaEffectFramePreviewConfigs").getPreviewTypeFromSize(babelHelpers["extends"]({},this.props)),c=b("MediaEffectFramePreviewConfigs").Configs[a].label;return b("React").createElement(b("XUIContextualDialog.react"),{autoFocus:!1,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur")},contextRef:this.$5,focusContextOnHide:!1,key:"contextualDialog",label:c,onToggle:this.$6,position:"left",shown:this.state.showFullPreview},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement(b("MediaEffectFramePhonePreviewContainer.react"),babelHelpers["extends"]({},b("MediaEffectFullscreenFrameEditorSizingUtils").getPhonePreviewSizing(a),{previewType:a})),b("React").createElement("div",{className:"_4qx4"},c)))};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{ref:function(a){return this.thumbnailRoot=a}.bind(this)},this.$1(this.props.previewScale)),this.$4())};e.exports=a}),null);
__d("MediaEffectReactFrameEditorPreviewCanvas.react",["cx","CenteredContainer.react","MediaEffectFramePreviewConfigs","MediaEffectReactFrameEditorAsset.react","React","Vector","VideoComponentWithLoopingPlayback.react","VideoDataContainer.react","VideoPlayer.react","VideoPlayerLoggerSource","XUIText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.$1=function(){return this.props.assets.size!==0?null:b("React").createElement("div",{className:"_29ep"},b("React").createElement(b("XUIText.react"),{size:"meta1"},b("MediaEffectFramePreviewConfigs").Configs[b("MediaEffectFramePreviewConfigs").getPreviewTypeFromSize(babelHelpers["extends"]({},this.props))].allCapsLabel))};a.prototype.render=function(){var a=this.props,c=a.backgroundColor,d=a.backgroundImage,e=a.disableBackgroundImage,f=a.isCircle,g=a.previewHeight,h=a.previewWidth;return b("React").createElement("div",{className:"_5mqu"+(f?" _6dm3":""),style:{backgroundColor:c,backgroundImage:e?"none":d&&d.sprited===!1?"url('"+d.uri+"')":null,backgroundPosition:d?"center":null,backgroundSize:d?"cover":h>g?h/10:g/10,height:g,width:h}},b("React").createElement(b("CenteredContainer.react"),{className:"_207i",fullHeight:!0,horizontal:!0,vertical:!0},this.$1()),this.props.videoSourceID?b("React").createElement(b("VideoDataContainer.react"),{videoID:this.props.videoSourceID},b("React").createElement(b("VideoPlayer.react"),{autoplay:!0,height:g,startMuted:!0,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,subOrigin:b("VideoPlayerLoggerSource").NOT_SPECIFIED_PLEASE_FIX,width:h},b("React").createElement(b("VideoComponentWithLoopingPlayback.react"),{infiniteLooping:!0}))):null,this.props.assetOrder.map(function(a){return b("React").createElement(b("MediaEffectReactFrameEditorAsset.react"),{assetData:this.props.assets.get(a),canvasSize:new(b("Vector"))(h,g),key:a,localAssetID:a,readOnly:!0})}.bind(this)))};function a(){h.apply(this,arguments)}a.defaultProps={disableBackgroundImage:!1,isCircle:!1};e.exports=a}),null);
__d("MediaEffectReactFrameEditorPreviewCanvasContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorPreviewCanvas.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore")]};a.calculateState=function(a,c){a=b("MediaEffectReactFrameEditorDataStore").getState();c=b("MediaEffectReactFrameEditorCanvasDataStore").getState();return{assets:a.assets,assetOrder:a.assetOrder,backgroundColor:c.backgroundColor,backgroundImage:c.backgroundImage,cameraEnabled:c.cameraSource!=null}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){return b("React").createElement(b("MediaEffectReactFrameEditorPreviewCanvas.react"),babelHelpers["extends"]({},this.props,this.state))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectReactFrameEditorPreviewContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorPreview.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore")]};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.calculateState=function(a){a=b("MediaEffectReactFrameEditorDataStore").getState();var c=b("MediaEffectReactFrameEditorCanvasDataStore").getState();return{assets:a.assets,assetOrder:a.assetOrder,backgroundColor:c.backgroundColor,backgroundImage:c.backgroundImage,cameraEnabled:c.cameraSource!=null}};a.prototype.render=function(){return b("React").createElement(b("MediaEffectReactFrameEditorPreview.react"),babelHelpers["extends"]({},this.props,this.state))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectReactFrameEditorSelectionBox.react",["cx","FBDragHandle.react","MediaEffectFrameEditorConstants","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorAssetPositionRecord","React","Rect","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE,j=b("immutable").Map;function k(a,b,c,d){a=(a*c+b*d)/(c*c+d*d);return[c*a,d*a]}function l(event){return event&&(event.metaKey||event.ctrlKey)}function m(a,b){var c=(b.r+b.l)/2;b=(b.t+b.b)/2;a.t=Math.min(a.t,b-1);a.r=Math.max(a.r,c+1);a.b=Math.max(a.b,b+1);a.l=Math.min(a.l,c-1)}c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$3=function(a,b,c,d,e,event){__p&&__p();c=e.boundingRect;if(this.props.fixedAspectRatio){d=k(a,b,c.w(),c.h());a=d[0];b=d[1]}d=c.add(0,0);d.l+=a;d.t+=b;d.l=Math.min(d.r-1,d.l);d.t=Math.min(d.b-1,d.t);l(event)&&(d.r-=a,d.b-=b,m(d,c));this.$7(c,d,e.assetRects)}.bind(this),this.$4=function(a,b,c,d,e,event){__p&&__p();c=e.boundingRect;if(this.props.fixedAspectRatio){d=k(a,b,-c.w(),c.h());a=d[0];b=d[1]}d=c.add(0,0);d.r+=a;d.t+=b;d.r=Math.max(d.l+1,d.r);d.t=Math.min(d.b-1,d.t);l(event)&&(d.l-=a,d.b-=b,m(d,c));this.$7(c,d,e.assetRects)}.bind(this),this.$5=function(a,b,c,d,e,event){__p&&__p();c=e.boundingRect;if(this.props.fixedAspectRatio){d=k(a,b,c.w(),-c.h());a=d[0];b=d[1]}d=c.add(0,0);d.l+=a;d.b+=b;d.l=Math.min(d.r-1,d.l);d.b=Math.max(d.t+1,d.b);l(event)&&(d.r-=a,d.t-=b,m(d,c));this.$7(c,d,e.assetRects)}.bind(this),this.$6=function(a,b,c,d,e,event){__p&&__p();c=e.boundingRect;if(this.props.fixedAspectRatio){d=k(a,b,-c.w(),-c.h());a=d[0];b=d[1]}d=c.add(0,0);d.r+=a;d.b+=b;d.r=Math.max(d.l+1,d.r);d.b=Math.max(d.t+1,d.b);l(event)&&(d.l-=a,d.t-=b,m(d,c));this.$7(c,d,e.assetRects)}.bind(this),b}a.prototype.render=function(){__p&&__p();if(this.props.assets.size===0)return null;var a=this.$1(),c=b("Rect").minimumBoundingBox(a.toArray());if(c.x===0||c.y===0)return null;var d={assetRects:a,boundingRect:c};a=function(){return d};var e=this.props.canvasHeight/b("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO,f=this.props.canvasWidth/b("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_WIDTH_RATIO;e=this.props.includesPhoneFrame?(e-this.props.canvasHeight)/2:i;f=this.props.includesPhoneFrame?(f-this.props.canvasWidth)/2:i;return b("React").createElement("div",{className:"_2z_m",style:{top:e-1,left:f-1},onMouseDown:this.$2},b("React").createElement("div",{className:"_2z_n",style:{top:c.t,left:c.l,width:c.w(),height:c.h()}},b("React").createElement(b("FBDragHandle.react"),{cursor:"nwse-resize",horizontal:!0,initialData:a,onChange:this.$3,stopOnLeave:!1,vertical:!0},b("React").createElement("div",{className:"_2z_o"})),b("React").createElement(b("FBDragHandle.react"),{cursor:"nesw-resize",horizontal:!0,initialData:a,onChange:this.$4,stopOnLeave:!1,vertical:!0},b("React").createElement("div",{className:"_2z_p"})),b("React").createElement(b("FBDragHandle.react"),{cursor:"nesw-resize",horizontal:!0,initialData:a,onChange:this.$5,stopOnLeave:!1,vertical:!0},b("React").createElement("div",{className:"_2z_t"})),b("React").createElement(b("FBDragHandle.react"),{cursor:"nwse-resize",horizontal:!0,initialData:a,onChange:this.$6,stopOnLeave:!1,vertical:!0},b("React").createElement("div",{className:"_2z_u"}))))};a.prototype.$2=function(event){event.stopPropagation()};a.prototype.$1=function(){var a=this.props.assets,b=j();b=b.withMutations(function(b){a.forEach(function(a){a&&a.assetSize&&b.set(a.localAssetID,a.position.toAbsolute(this.props.canvasSize,a.assetSize.toAbsolute(this.props.canvasSize)))}.bind(this))}.bind(this));return b};a.prototype.$7=function(a,c,d){__p&&__p();var e=function(b){return c.r*(b-a.l)/a.w()+c.l*(a.r-b)/a.w()},f=function(b){return c.b*(b-a.t)/a.h()+c.t*(a.b-b)/a.h()};d.forEach(function(a,c){var d=this.props.assets.get(c);if(!d)return;a=new(b("Rect"))(f(a.t),e(a.r),f(a.b),e(a.l));d=d.assetSize;d&&(d.width&&d.width.pixels!==0?d=d.set("width",d.width.set("pixels",a.w())):d.width&&(d=d.set("width",d.width.set("canvas_size_percentage",a.w()*100/this.props.canvasSize.x))),d.height&&d.height.pixels!==0?d=d.set("height",d.height.set("pixels",a.h())):d.height&&(d=d.set("height",d.height.set("canvas_size_percentage",a.h()*100/this.props.canvasSize.y))));b("MediaEffectMetadataActionCreators").updateAssetSize(c,d);d=b("MediaEffectReactFrameEditorAssetPositionRecord").canonical(a,this.props.canvasSize);b("MediaEffectMetadataActionCreators").updateAssetPosition(c,d)}.bind(this))};e.exports=a}),null);
__d("MediaEffectReactFrameEditorSelectionBoxContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorSelectionBox.react","React","Vector","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").Map;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore")]};a.calculateState=function(a,c){var d=b("MediaEffectReactFrameEditorDataStore").getState().get("assets");a=h(c.selectedAssets.map(function(a){return[a,d.get(a)]}));var e=a.some(function(a){return a&&a.assetSize&&a.assetSize.aspect_ratio!==null});return{assets:a,canvasSize:new(b("Vector"))(c.canvasWidth,c.canvasHeight),fixedAspectRatio:e}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectReactFrameEditorSelectionBox.react"),a)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("XMediaEffectAsyncTemplateLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/template/load/",{template_id:{type:"FBID"}})}),null);
__d("MediaEffectReactFrameEditorTemplateRecord",["regeneratorRuntime","AsyncRequest","MediaEffectReactFrameDeserializer","XMediaEffectAsyncTemplateLoadController","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("immutable").List;d=b("immutable").Record;g=babelHelpers.inherits(a,d({templateFBID:null,previewURL:null,frameData:null,sourceTemplateFBID:null,variants:c(),colorPalette:null}));g&&g.prototype;a.prototype.getColor=function(){return!this.colorPalette?null:this.colorPalette.getMainColor()};a.prototype.genFrameData=function(){__p&&__p();var a,c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:if(!this.frameData){e.next=2;break}return e.abrupt("return",this.frameData);case 2:a=b("XMediaEffectAsyncTemplateLoadController").getURIBuilder().getURI();e.next=5;return b("regeneratorRuntime").awrap(new(b("AsyncRequest"))().setURI(a).setData({template_id:this.templateFBID}).exec());case 5:c=e.sent;d=c.payload.frameData;return e.abrupt("return",b("MediaEffectReactFrameDeserializer").deserializeData(d));case 8:case"end":return e.stop()}},null,this)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectReactFrameEditorTextAsset.react",["cx","CanvasToBlobImpl","DOMQuery","MediaEffectFrameEditorTextPropertiesDialogContainer.react","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorAssetPositionRecord","React","ReactDOM","Rect","Vector","debounce","html2canvas-v0.5","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=.5,j=.1;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a,c){__p&&__p();h.constructor.call(this,a,c),this.$6=function(a){if(this.props.readOnly)return;if(!this.props.editing)return;this.$3=a.target.textContent;this.$7()}.bind(this),this.$9=function(a){if(this.props.readOnly)return;if(!this.props.editing)return;var b=a.nativeEvent.srcElement;this.$8(b.clientWidth)||a.preventDefault()}.bind(this),this.$10=function(a){if(this.props.readOnly)return;if(!this.props.editing)return;(a.key==="Enter"||a.key==="Escape")&&(this.doneEditing(),a.preventDefault())}.bind(this),this.$11=function(a){if(this.props.readOnly)return;if(!this.props.editing)return;this.doneEditing()}.bind(this),this.$7=b("debounce")(function(){return this.updateAssetImage(!1)}.bind(this),500),this.$2=null,this.$1=null,this.$5=function(){},this.$3=a.assetData.content,this.$4=0,this.state={contextReady:!1}}a.prototype.$8=function(a){__p&&__p();var c=this.props.position||new(b("Rect"))(0,0,0,0),d=c.l,e=this.props.canvasSize.x,f=this.props.textboxHeight||60;f=f*i;d=d+a+f<e;if(d)return!0;a=c.sub(f,0);if(a.l>0){b("MediaEffectMetadataActionCreators").updateAssetPosition(this.props.localAssetID,b("MediaEffectReactFrameEditorAssetPositionRecord").canonical(a,new(b("Vector"))(this.props.canvasSize.x,this.props.canvasSize.y)));return!0}else return!1};a.prototype.$12=function(){return this.props.assetData.isDynamicText()};a.prototype.$13=function(){this.$4=window.getSelection().anchorOffset||0};a.prototype.$14=function(){__p&&__p();if(!this.isElementRendered())return;var a=b("DOMQuery").find(this.$1,"div.text-node");if(a.childNodes.length===0)return;var c=document.createRange(),d=window.getSelection(),e=Math.min(a.childNodes[0].length,this.$4);c.setStart(a.childNodes[0],e);c.collapse(!0);d.removeAllRanges();d.addRange(c)};a.prototype.doneEditing=function(){this.$5(),this.props.assetData.content!==this.$3&&b("MediaEffectMetadataActionCreators").updateTextContent(this.props.localAssetID,this.$3),setTimeout(function(){b("MediaEffectMetadataActionCreators").editText(null),setTimeout(function(){return b("MediaEffectMetadataActionCreators").deselectAll()},0)},0)};a.prototype.updateAssetImage=function(a){__p&&__p();if(this.props.readOnly)return;var c=this.$3;if(!this.$12()&&this.$1&&this.isElementRendered()&&c){var d=new(b("Rect"))(this.$1);if(!d.getWidth()||!d.getHeight())return;var e=new(b("Vector"))(d.getWidth(),d.getHeight());this.$13();b("html2canvas-v0.5")(this.$1,{onrendered:function(d){var f=d.toDataURL("image/png");this.$14();this.$5=function(){this.$5=function(){},b("MediaEffectMetadataActionCreators").updateTextImage(this.props.assetData.localAssetID,c,f,b("CanvasToBlobImpl").getBlob(f,"image/png"),e)}.bind(this);a&&this.$5()}.bind(this),background:undefined,useCORS:!0})}};a.prototype.componentWillUnmount=function(){if(this.props.readOnly)return;if(this.$12()&&this.props.assetData.content!==this.$3){b("MediaEffectMetadataActionCreators").updateTextContent(this.props.localAssetID,this.$3);return}this.$3&&this.$5()};a.prototype.componentDidUpdate=function(a,b){if(this.props.readOnly)return;this.isElementRendered()&&(this.$2=this.$2||setTimeout(function(){this.updateAssetImage(!0)}.bind(this),200));this.props!==a&&this.$7()};a.prototype.componentDidMount=function(){if(this.props.editing){var a=b("DOMQuery").find(this.$1,"div.text-node");if(a.childNodes.length===0)return;this.$4=a.childNodes[0].length;this.$14()}};a.prototype.isElementRendered=function(){return!!b("ReactDOM").findDOMNode(this.$1)};a.prototype.render=function(){var a=this.props.textboxHeight||60,c=a*i;a=a*(1-i)/2;var d=c*j,e=this.props.assetData&&this.props.assetData.font?this.props.assetData.font.getFontFamily():"",f=this.$12()?"_3lz7":"_1kg8",g=!this.props.readOnly&&this.props.editing;g&&(f=b("joinClasses")("_1r26",f));a=this.$12()?{padding:a+"px "+d+"px"}:{padding:a+"px "+d+"px",textAlign:"justify"};return b("React").createElement("div",{className:f,contentEditable:g,onBlur:this.$11,onInput:this.$6,onKeyDown:this.$10,onKeyPress:this.$9,ref:function(a){this.$1=a,this.setState({contextReady:!0})}.bind(this),style:{color:this.props.assetData.color,fontFamily:e,fontSize:c,textAlign:this.props.assetData.textHorizontalAlignment,lineHeight:c+"px"}},b("React").createElement("div",{className:"text-node",style:a},this.props.assetData.content),this.state.contextReady&&this.$1&&!this.props.readOnly&&this.props.editing&&this.props.enableFontSettingsDialog?b("React").createElement(b("MediaEffectFrameEditorTextPropertiesDialogContainer.react"),{assetData:this.props.assetData,context:this.$1,localAssetID:this.props.localAssetID,shown:!0}):null)};e.exports=a}),null);
__d("MediaEffectReactFrameEditorTextAssetRecord",["regeneratorRuntime","MediaEffectReactFrameEditorDataStore","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("immutable").Record;var h=/^\%.*\%$/;g=babelHelpers.inherits(a,c({assetSize:null,color:null,content:null,font:null,localAssetID:null,position:null,textHorizontalAlignment:null,readOnly:!1,sourceTemplateAssetFBID:null,assetFBID:null,dirty:!1}));g&&g.prototype;a.prototype.assetType=function(){return"MediaEffectReactFrameEditorTextAssetRecord"};a.prototype.getParentImageAsset=function(){var a=b("MediaEffectReactFrameEditorDataStore").getState().assets.get(this.localAssetID);return a===this?null:a};a.prototype.isDynamicText=function(){return h.test(this.content)};a.prototype.reColored=function(a,c){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",this);case 1:case"end":return a.stop()}},null,this)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectMetadataValidationUtils",["MediaEffectPlaceDescriptionRecord"],(function(a,b,c,d,e,f){"use strict";var g={validateName:function(a){return!!a&&a.trim()!==""},validateOwnerID:function(a){return!!a&&a.trim()!==""},validateTemplateCategoryID:function(a){return!!a&&a.trim()!==""},validateLocationPageID:function(a){return!!a&&a.toString().trim()!==""},validateLocation:function(a){return!!a&&(g.validateLocationPageID(a.key)||a.latitude!==null&&a.longitude!==null)},validateTimeRange:function(a,b){return a&&b&&a.getTime()>=b.getTime()?!1:!0}};e.exports=g}),null);
__d("PlaceSearchSuppressionVersion",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS_TARGETING:"ads_targeting_suppression",CAMERA_LOCATION_FRAMES:"camera_location_frames_suppression",GRAPH_API:"graph_api_suppression",MAIN_TYPEAHEAD:"main_typeahead_suppression",QUERIED_CHECKIN:"queried_checkin_suppression",QUERYLESS_CHECKIN:"queryless_checkin_suppression",SET_SEARCH:"set_search_suppression",SUGGESTIFIER:"suggestifier_suppression",HEALTH_BLOOD_DONATION_HOSPITALS:"health_blood_donation_hospitals_suppression",PROD_SUPPRESSION:"prod_suppression"})}),null);
__d("MediaEffectLocationTargetingPageTypeahead.react",["cx","fbt","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","MediaEffectEditorFunnelLogger","MediaEffectMetadataValidationUtils","PlaceSearchConstants","PlaceSearchSuppressionVersion","React","ReactComposerLocationSearchSource","SearchableEntry","XUISpinner.react","XUITextInput.react","XUITypeahead.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$4=function(a,c){var d=a.getUniqueID();b("MediaEffectEditorFunnelLogger").logChangeLocation();this.setState({query:a.getTitle()},function(){return this.props.onLocationSelected(d)}.bind(this))}.bind(this),this.$5=function(event){this.setState({query:event.target.value})}.bind(this),this.$6=function(){this.props.onLocationSelected(null),this.setState({query:""})}.bind(this),this.state=this.$1()}a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b={};this.props.isLoading&&!a.isLoading&&!((a=a.location)!=null?a.name:a)&&(b.query="");this.setState(b)};a.prototype.$2=function(){return b("ReactComposerLocationSearchSource")({},{hide_geo:!1,allow_poi:!0,allow_country:!0,suppression_version:b("PlaceSearchSuppressionVersion").CAMERA_LOCATION_FRAMES},{event_name:b("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,event_specific_data:{context:"places_typeahead:"+b("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,source:b("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,ref:"MediaEffectMetadataLocation.react"}})};a.prototype.$1=function(){var a;return{query:((a=this.props.location)!=null?a.name:a)||"",searchSource:this.$2()}};a.prototype.$3=function(){var a=this.props,c=a.isValidating;a=a.location;if(c&&this.props.isLoading)return h._("\u0110ang t\u1ea3i d\u1eef li\u1ec7u v\u1ecb tr\u00ed");a=b("MediaEffectMetadataValidationUtils").validateLocationPageID((a=a)!=null?a.key:a);return c&&!a?h._("Vui l\u00f2ng nh\u1eadp v\u1ecb tr\u00ed"):null};a.prototype.render=function(){if(this.state.isLoading||this.props.location&&this.props.location.key&&!this.props.location.name)return b("React").createElement(b("FBOverlayContainer.react"),{className:"_3_kx"},b("React").createElement(b("FBOverlayBase.react"),null,b("React").createElement(b("XUITextInput.react"),{className:"_3_kx",defaultValue:this.state.query,disabled:!0,height:"tall",xuiError:this.$3()})),b("React").createElement(b("FBOverlayElement.react"),{horizontal:"right"},b("React").createElement(b("XUISpinner.react"),{className:"_61s8",size:"large"})));var a=this.props.location&&this.props.location.key&&this.props.location.name?new(b("SearchableEntry"))({uniqueID:this.props.location.key,title:this.props.location.name,type:this.props.location.type}):null;return b("React").createElement(b("XUITypeahead.react"),{className:"_3_kx",clearable:!0,disabled:this.props.disabled,highlightOnSelect:!0,onChange:this.$5,onClear:this.$6,onSelectAttempt:this.$4,placeholder:h._("Nh\u1eadp qu\u1ed1c gia, t\u1ec9nh\/th\u00e0nh ph\u1ed1 ho\u1eb7c m\u1ed1c ranh gi\u1edbi"),queryString:this.state.query,searchSource:this.state.searchSource,selectedEntry:a,showEntriesOnFocus:!0,tallInput:!0,viewStyle:"rich",xuiError:this.$3()})};e.exports=a}),null);
__d("MediaEffectLocationTargetingGeoCoordinateTypeahead.react",["cx","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","GeoCoordinates","MediaEffectLocationStrings","React","XUICloseButton.react","XUITextInput.react"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("FBOverlayContainer.react"),{className:"_3_kx"},b("React").createElement(b("FBOverlayBase.react"),null,b("React").createElement(b("XUITextInput.react"),{className:"_3_kx",disabled:!0,height:"tall",value:b("MediaEffectLocationStrings").geoLocation(this.props.location.latitude,this.props.location.longitude).toString()})),b("React").createElement(b("FBOverlayElement.react"),{horizontal:"right"},b("React").createElement(b("XUICloseButton.react"),{className:"_61te"+(this.props.disabled?" hidden_elem":""),onClick:this.props.onClear,size:"medium",type:"button"})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectLocationTargetingTypeahead.react",["GeoCoordinates","MediaEffectLocationTargetingGeoCoordinateTypeahead.react","MediaEffectLocationTargetingPageTypeahead.react","MediaEffectPlaceDescriptionRecord","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=function(){return this.props.onLocationSelected(null)}.bind(this),b}a.prototype.render=function(){return this.props.location&&this.props.location.latitude&&this.props.location.longitude&&!this.props.location.key?b("React").createElement(b("MediaEffectLocationTargetingGeoCoordinateTypeahead.react"),{disabled:this.props.disabled,location:new(b("GeoCoordinates"))(this.props.location.latitude,this.props.location.longitude),onClear:this.$1}):b("React").createElement(b("MediaEffectLocationTargetingPageTypeahead.react"),{disabled:this.props.disabled,isLoading:this.props.isLoading,isValidating:this.props.isValidating,location:this.props.location,onLocationSelected:this.props.onLocationSelected,selectedOwner:this.props.selectedOwner})};e.exports=a}),null);
__d("MediaEffectCard.react",["cx","React","Tooltip.react","XUICard.react","XUICardHeader.react","XUICardHeaderTitle.react","XUICardSection.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a="_-jo",c=null;if(!this.props.hideHeader){var d=this.props.tooltip?b("React").createElement(b("Tooltip.react"),{className:"_3-99",tooltip:this.props.tooltip},b("React").createElement("span",{className:"_3o-c"})):null;c=b("React").createElement(b("XUICardHeaderTitle.react"),null,this.props.title,d)}return b("React").createElement(b("XUICard.react"),{className:b("joinClasses")(a,this.props.className),style:{border:"none"}},b("React").createElement(b("XUICardHeader.react"),{className:"_-jp",type:"primary"},c),b("React").createElement(b("XUICardSection.react"),{background:"transparent",className:b("joinClasses")("_-jq _190n",this.props.sectionClassName),style:{borderTop:"none"}},this.props.children))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectExceptionReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTIVATION_ADD_BOOSTING_FAIL:"activation_add_boosting_fail",ACTIVATION_REMOVE_BOOSTING_FAIL:"activation_remove_boosting_fail",ACTIVATION_SERIALIZE_FAIL:"activation_serialize_fail",ACTIVATION_CREATE_FAIL:"activation_create_fail",EFFECT_STATUS_CHANGE_FAIL:"effect_status_change_fail",RENDER:"render",RESIZE_FAIL:"resize_fail",DIRECT_SUPPORT_CASE_CREATION_FAIL:"direct_support_case_creation_fail",OPEN_DETAIL_DIALOG_FAIL:"open_detail_dialog_fail",LOCATION_TARGET_TYPE_SELECTION_FAIL:"location_target_type_selection_fail",TYPEAHEAD_LOCATION_SELECTION_FAIL:"typeahead_location_selection_fail",MAP_LOCATION_SELECTION_FAIL:"map_location_selection_fail",RADIUS_SELECTION_FAIL:"radius_selection_fail",MANNUAL_GEO_SELECTION_FAIL:"manual_geo_selection_fail",NOTIFICATION_FAIL:"notification_fail",RTCS_GET_FAIL:"rtcs_get_fail",RTCS_GET_UNIQUE_FAIL:"rtcs_get_unique_fail",SCREENCAST_UPLOAD_FAIL:"screencast_upload_fail",ARFX_VALIDATE_FAIL:"arfx_validate_fail",MASK_CREATION_FAIL:"mask_creation_fail",PROJECT_PROCESS_FAIL:"project_process_fail",THUMBNAIL_FAIL:"thumbnail_fail",LASER_TIER_FAIL:"laser_tier_fail",SRT_REVIEW_PRIORITY_PREDICTOR_FAIL:"srt_review_priority_predictor_fail",MANIFEST_TRIGGER_GK_FAIL:"manifest_trigger_gk_fail",JSON_PARSE_ADS_TARGETING_FAIL:"json_parse_ads_targeting_fail",MAIN_FILE_PARSING_FAIL:"main_file_parsing_fail",SRT_RENDER_FAIL:"srt_render_fail"})}),null);
__d("MediaEffectExceptionSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DIALOG_LOCATION_SECTION:"dialog_location_section",MEDIA_EFFECT_ACTIVATION_HELPER:"media_effect_activation_helper",SAVE_DRAFT:"save_draft",UPLOAD_FORM:"upload_form",REACT_ERROR_BOUNDARY:"react_error_boundary"})}),null);
__d("MediaEffectExceptionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MediaEffectExceptionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MediaEffectExceptionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MediaEffectExceptionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEffectID=function(a){this.$1.effect_id=a;return this};a.prototype.setExceptionMessage=function(a){this.$1.exception_message=a;return this};a.prototype.setExceptionReason=function(a){this.$1.exception_reason=a;return this};a.prototype.setExceptionSource=function(a){this.$1.exception_source=a;return this};a.prototype.setExceptionTrace=function(a){this.$1.exception_trace=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setOwnerID=function(a){this.$1.owner_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={effect_id:!0,exception_message:!0,exception_reason:!0,exception_source:!0,exception_trace:!0,owner_id:!0,vc:!0};e.exports=a}),null);
__d("MediaEffectLocationRadiusSlider.react",["cx","fbt","FBSimpleSlider.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=.05,k=100;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){this.props.onChange(Math.max(j,Math.min(k,Math.pow(10,a))))}.bind(this),b}a.prototype.render=function(){var a=b("joinClasses")("_13tx",this.props.className);return b("React").createElement("div",{className:a},b("React").createElement("span",{className:"_13ty"},h._("\u0110i\u1ec1u ch\u1ec9nh b\u00e1n k\u00ednh:")),b("React").createElement("span",{className:"_13uk"},b("React").createElement(b("FBSimpleSlider.react"),{disabled:this.props.disabled,max:Math.log10(k),min:Math.log10(j),onChange:this.$1,value:Math.log10(this.props.radius)})))};e.exports=a}),null);
__d("MediaEffectLocationTargetingEnabledSelector.react",["fbt","React","XUIRadioList.react","XUIText.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("XUIRadioList.react").Item;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIRadioList.react"),{disabled:this.props.disabled,onValueChange:this.props.onTypeSelected,selectedValue:this.props.locationTargetType},b("React").createElement(i,{disabled:this.props.disabled,value:"everyone"},b("React").createElement(b("XUIText.react"),{display:"block"},g._("C\u00f3 \u1edf b\u1ea5t c\u1ee9 n\u01a1i n\u00e0o"))),b("React").createElement(i,{disabled:this.props.disabled,value:"targeted"},b("React").createElement(b("XUIText.react"),{display:"block",key:"title"},g._("Ch\u1ec9 c\u00f3 \u1edf m\u1ed9t v\u1ecb tr\u00ed c\u1ee5 th\u1ec3"))))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectPageFetcherQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"id",type:"ID!"}],c={kind:"LinkedField",alias:null,name:"polygons",storageKey:null,args:null,concreteType:"Polygon",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"points",storageKey:null,args:null,concreteType:"Location",plural:!0,selections:[{kind:"ScalarField",alias:"lat",name:"latitude",args:null,storageKey:null},{kind:"ScalarField",alias:"lng",name:"longitude",args:null,storageKey:null}]}]},d={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",operationKind:"query",name:"MediaEffectPageFetcherQuery",id:"1749336131764185",text:null,metadata:{},fragment:{kind:"Fragment",name:"MediaEffectPageFetcherQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"Page",selections:[{kind:"LinkedField",alias:null,name:"geo_polygon",storageKey:null,args:null,concreteType:"MultiPolygon",plural:!1,selections:[c]}]}]}]},operation:{kind:"Operation",name:"MediaEffectPageFetcherQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},d,{kind:"InlineFragment",type:"Page",selections:[{kind:"LinkedField",alias:null,name:"geo_polygon",storageKey:null,args:null,concreteType:"MultiPolygon",plural:!1,selections:[c,d]}]}]}]}}}();e.exports=a}),null);
__d("MediaEffectPageFetcher",["Promise","GraphAPI","RelayFBEnvironment","RelayModern","MediaEffectPageFetcherQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").fetchQuery;b("RelayModern").graphql;var h=function(){return b("MediaEffectPageFetcherQuery.graphql")};a={fetchLocation:function(a){return b("Promise").all([b("GraphAPI")("2.5").object("page",a).get({fields:"name, location, place_type"}),g(b("RelayFBEnvironment"),h,{id:a})]).then(function(a){var b,c=a[0];a=(a=a[1])!=null?(a=a.node)!=null?(a=a.geo_polygon)!=null?a.polygons:a:a:a;((b=c)!=null?b.location:b)&&a&&(c.location.geo_polygon=a.map(function(a){return(a=a)!=null?a.points:a}));return c})}};e.exports=a}),null);
__d("MediaEffectMetadataLocationV2.react",["cx","fbt","GeoCoordinates","InputLabel.react","Log","MediaEffectCard.react","MediaEffectExceptionReason","MediaEffectExceptionSource","MediaEffectExceptionsTypedLogger","MediaEffectLocationRadiusSlider.react","MediaEffectLocationTargetingEnabledSelector.react","MediaEffectLocationTargetingMap.react","MediaEffectLocationTargetingTypeahead.react","MediaEffectPageFetcher","MediaEffectPlaceDescriptionRecord","React","XUICheckboxInput.react","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=.4;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={isLoading:!1},this.$4=function(a){this.$3(b("MediaEffectExceptionReason").LOCATION_TARGET_TYPE_SELECTION_FAIL,function(){a==="everyone"&&this.props.onLocationSelected(null),this.props.onLocationTargetTypeSelected(a)}.bind(this))}.bind(this),this.$5=function(a){this.$3(b("MediaEffectExceptionReason").TYPEAHEAD_LOCATION_SELECTION_FAIL,function(){this.props.onLocationSelected(a?new(b("MediaEffectPlaceDescriptionRecord"))({key:a}):null)}.bind(this))}.bind(this),this.$6=function(a){this.$3(b("MediaEffectExceptionReason").MAP_LOCATION_SELECTION_FAIL,function(){this.props.onLocationSelected(new(b("MediaEffectPlaceDescriptionRecord"))({latitude:a.latitude,longitude:a.longitude,radius:j,manual_geo:!0}))}.bind(this))}.bind(this),this.$7=function(a){this.$3(b("MediaEffectExceptionReason").RADIUS_SELECTION_FAIL,function(){this.props.location&&this.props.onLocationSelected(this.props.location.merge({radius:a,manual_geo:!0}))}.bind(this))}.bind(this),this.$8=function(a){this.$3(b("MediaEffectExceptionReason").MANNUAL_GEO_SELECTION_FAIL,function(){this.props.location&&this.props.onLocationSelected(this.props.location.merge({manual_geo:a}))}.bind(this))}.bind(this),this.$9=function(){this.props.location&&this.props.onLocationSelected(this.props.location.merge({constrain_eligibility:!this.props.location.constrain_eligibility}))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b;this.state.isLoading&&(((b=a.location)!=null?b.name:b)||!((b=a.location)!=null?b.name:b))&&this.setState({isLoading:!1})};a.prototype.componentDidUpdate=function(a,b){this.$1()};a.prototype.$1=function(){this.props.location&&this.props.location.key&&!(this.props.location.name&&this.props.location.latitude&&this.props.location.longitude)&&!this.state.isLoading&&this.$2(this.props.location.key)};a.prototype.$2=function(a){this.setState({isLoading:!0},function(){b("promiseDone")(b("MediaEffectPageFetcher").fetchLocation(a),function(a){this.props.onLocationSelected(new(b("MediaEffectPlaceDescriptionRecord"))({name:a.name,key:a.id,latitude:a.location.latitude,longitude:a.location.longitude,polygons:a.location.geo_polygon,radius:j,manual_geo:!1}))}.bind(this),function(){b("Log").info("Failed to fetch Page %s",a),this.props.onLocationSelected(null)}.bind(this))}.bind(this))};a.prototype.$3=function(a,c){try{c!==undefined&&c()}catch(c){new(b("MediaEffectExceptionsTypedLogger"))().setExceptionReason(a).setExceptionSource(b("MediaEffectExceptionSource").DIALOG_LOCATION_SECTION).setExceptionTrace(c.stack.split("\n")).setExceptionMessage(c.name+": "+c.message)}};a.prototype.render=function(){var a=this.props.location,c=h._("Ch\u1ecdn n\u01a1i b\u1ea1n mu\u1ed1n m\u1ecdi ng\u01b0\u1eddi ph\u00e1t hi\u1ec7n ra hi\u1ec7u \u1ee9ng n\u00e0y.");return b("React").createElement("div",null,b("React").createElement(b("MediaEffectCard.react"),{className:"_64q4",title:h._("V\u1ecb tr\u00ed"),tooltip:c},b("React").createElement(b("MediaEffectLocationTargetingEnabledSelector.react"),{disabled:!!this.props.disabled,locationTargetType:this.props.locationTargetType,onTypeSelected:this.$4})),this.props.locationTargetType==="targeted"?b("React").createElement("div",null,b("React").createElement(b("InputLabel.react"),{className:"_3bu1",label:h._("Cho ph\u00e9p nh\u1eefng ng\u01b0\u1eddi ngo\u00e0i v\u1ecb tr\u00ed n\u00e0y d\u00f9ng th\u1eed hi\u1ec7u \u1ee9ng n\u1ebfu \u0111\u01b0\u1ee3c chia s\u1ebb")},b("React").createElement(b("XUICheckboxInput.react"),{defaultChecked:((c=this.props.location)!=null?c.constrain_eligibility:c)===!1||this.props.location===null,disabled:this.props.disabled,onClick:this.$9})),b("React").createElement(b("MediaEffectLocationTargetingTypeahead.react"),{disabled:this.props.disabled,isLoading:this.state.isLoading,isValidating:this.props.isValidating,location:this.props.location,onLocationSelected:this.$5,selectedOwner:this.props.selectedOwner}),!this.props.disabled&&a&&a.latitude&&a.longitude&&(a.manual_geo||!a.polygons)?b("React").createElement(b("MediaEffectLocationRadiusSlider.react"),{className:"_4szz _4sz-",onChange:this.$7,radius:a.radius||j}):null,b("React").createElement(b("MediaEffectLocationTargetingMap.react"),{className:"_4szz _4sz_",disabled:this.props.disabled,isLoading:this.state.isLoading,location:this.props.location,onLocationSelected:this.$6,onManualLocationToggled:this.$8})):null)};e.exports=a}),null);
__d("MediaEffectHubDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("XMediaEffectHubEffectActivationAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/effects/async/activation/",{activate:{type:"Bool",defaultValue:!1},effect_ids:{type:"FBIDVector"}})}),null);
__d("XMediaEffectHubEffectBoostedWeightAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/effects/async/boosted_weight/",{weight:{type:"String",required:!0},effect_id:{type:"String",required:!0}})}),null);
__d("MediaEffectMetadataDataLoader",["Promise","AsyncRequest","XMediaEffectHubEffectActivationAsyncController","XMediaEffectHubEffectBoostedWeightAsyncController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={changeActiveStatus:function(a,c){return new(b("Promise"))(function(d,e){var f=b("XMediaEffectHubEffectActivationAsyncController").getURIBuilder().setBool("activate",a).setFBIDVector("effect_ids",c.toSeq().map(function(a){return a.id}).toArray()).getURI();new(b("AsyncRequest"))().setURI(f).setHandler(d).setErrorHandler(e).send()})},changeBoostedWeight:function(a,c){return new(b("Promise"))(function(d,e){var f=b("XMediaEffectHubEffectBoostedWeightAsyncController").getURIBuilder().setString("weight",a).setString("effect_id",c.id).getURI();new(b("AsyncRequest"))().setURI(f).setHandler(d).setErrorHandler(e).send()})}};e.exports=a}),null);
__d("MediaEffectUploadManager",["Arbiter"],(function(a,b,c,d,e,f){"use strict";var g="MediaEffectUploadManager/upload";a={subscribeToUploadDone:function(a,c){return b("Arbiter").subscribe(g,a,c)},informUploadDone:function(a,c){return b("Arbiter").inform(g,a,c)}};e.exports=a}),null);
__d("XMediaEffectAsyncEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/effects/activation/submit/",{media_effect_id:{type:"FBID"}})}),null);
__d("XProcessImageBackgroundController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/media_effect/swipeable_frame/image/process_background/",{image_id:{type:"FBID",required:!0}})}),null);
__d("XRemoveImageBackgroundController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/media_effect/swipeable_frame/image/remove_background/",{image_id:{type:"FBID",required:!0}})}),null);
__d("MediaEffectMetadataActionCreators",["cx","invariant","regeneratorRuntime","Animation","AsyncRequest","AsyncResponse","AsyncUploadRequest","MediaEffectFlowType","MediaEffectFrameEditorDispatcher","MediaEffectHubDispatcher","MediaEffectMetadataDataLoader","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectTemplateVariationRecord","MediaEffectUploadManager","SimpleXUIDialog","Style","XMediaEffectAsyncEditController","XProcessImageBackgroundController","XRemoveImageBackgroundController","immutable","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("immutable").Set,j="_1tp7",k={addImage:function(a,c,d){a={type:"add/image",imageFile:a,position:c&&d?new(b("MediaEffectReactFrameEditorAssetPositionRecord").fromCenter)(c,d):null};b("MediaEffectFrameEditorDispatcher").dispatch(a)},replaceImage:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"replace/image",localAssetID:a,imageFile:c})},addTag:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"add/tag",data:a})},addText:function(a,c,d){a={type:"add/text",content:a,position:null};c&&d&&(a.position=new(b("MediaEffectReactFrameEditorAssetPositionRecord").fromCenter)(c,d));b("MediaEffectFrameEditorDispatcher").dispatch(a)},addWhitelistedUser:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"add/fbWhitelistedUser",data:a})},changeScheduleRange:function(a,c,d){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/scheduleRange",startTime:a,endTime:c,timezone:d})},changeBackgroundColor:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/backgroundColor",color:a})},changeBackgroundImage:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/backgroundImage",image:a})},changeCategory:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/category",value:a})},changePageLiked:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbPageLiked",value:a})},changeCatalogGKs:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbCatalogGKs",value:a})},changeEligibilityGKs:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbEligibilityGKs",value:a})},changeManualRankWeight:function(event){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbRankWeight",value:event.target.value})},changeLocales:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locales",value:a})},changeLocationPage:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locationPageID",value:a})},changeLocation:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/location",value:a})},changeLocationTarget:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locationTarget",value:a})},changeName:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/name",value:a})},changeOwner:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/selectedOwnerID",value:a})},changeInstagramAttribution:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/selectedInstagramAttributionID",value:a})},setUseOwnerSelector:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/setUseOwnerSelector",value:a})},resetLocation:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locationTarget",value:"everyone"})},updateNameValidation:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/nameValidation",isError:a})},changeProductVisibiilityPolicy:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/productVisibilityPolicy",value:a})},changeRankingStrategy:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbRankingStrategy",value:a})},changeTimingSchedule:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/timingSchedule",value:a})},changeWhitelistCheckEligibility:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbWhitelistCheckEligibility",value:a})},removeBackground:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"replace/startRemovingBackground",localAssetID:a});c=b("XRemoveImageBackgroundController").getURIBuilder().setFBID("image_id",c).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(c){return c.payload.updated_id&&b("MediaEffectFrameEditorDispatcher").dispatch({type:"replace/imageBackground",localAssetID:a,imageID:c.payload.updated_id,imageURI:c.payload.updated_uri})}).send()},processBackground:function(a,c){c=b("XProcessImageBackgroundController").getURIBuilder().setFBID("image_id",c).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(c){return c.payload.updated_uri&&b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/image",localAssetID:a,imageURI:c.payload.updated_uri})}).send()},updateTextImage:function(a,c,d,e,f){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textImage",localAssetID:a,textContent:c,localImageURI:d,file:e,assetSize:f})},checkOfflineOnly:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/offlineOnly",value:a})},changeAdsTargetingSpec:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/adsTargetingSpec",adsTargetingSpec:a})},checkSelfBirthday:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/selfBirthday",value:a})},removeWhitelistedUser:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"remove/fbWhitelistedUser",data:a})},removeTag:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"remove/tag",data:a})},updateAssetPosition:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/assetPosition",localAssetID:a,position:c})},setAutoSnapping:function(a,c,d){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/autoSnapping",localAssetID:a,autoSnappedType:c,specs:d})},setIsDragging:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/isDragging",isDragging:a})},setIsSaving:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/isSaving",isSaving:a})},updateAssetSize:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/assetSize",localAssetID:a,size:c})},updateAssetNativeSize:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/assetNativeSize",localAssetID:a,size:c})},updateStickerFBID:function(a,c,d){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/stickerFBID",localAssetID:a,stickerFBID:c,localTemplateID:d})},updateTextContent:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textContent",localAssetID:a,content:c})},updateTextFonts:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textFonts",localTextIDs:a,font:c})},updateTextColors:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textColors",localTextIDs:a,color:c})},updateTextAlignments:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textAlignments",localTextIDs:a,textAlignment:c})},setFrameFilterID:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/frameFilterID",filterID:a})},setThumbnail:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/thumbnail",thumbnail:a})},save:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"save",effectID:a})},saveAsDraft:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"save/draft"})},selectAssetOnly:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"select/assetOnly",localAssetID:a})},selectAsset:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"select/asset",localAssetID:a})},deselectAsset:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"deselect/asset",localAssetID:a})},editText:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"edit/text",localAssetID:a})},selectAll:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"select/all"})},deselectAll:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"deselect/all"})},startCamera:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/cameraSource",cameraSource:a})},pauseCamera:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"pause/camera"})},resumeCamera:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"resume/camera"})},stopCamera:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/cameraSource",cameraSource:null})},selectInstruction:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"select/instruction",instructionID:a})},raiseAsset:function(a,c){c===void 0&&(c=!1),b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/asset/raise",localAssetID:a,toTop:c})},lowerAsset:function(a,c){c===void 0&&(c=!1),b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/asset/lower",localAssetID:a,toBottom:c})},deleteAsset:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"delete/asset",localAssetID:a})},duplicateAsset:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"duplicate/asset",localAssetID:a})},initEffectMetadata:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"init/effectMetadata",data:a})},addValidation:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"validation/add",validation:a})},removeValidation:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"validation/remove",validation:a})},initFrameData:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"init/frameData",data:a})},changeStep:function(a){a>=0&&b("MediaEffectFrameEditorDispatcher").dispatch({type:"change/step",step:a})},changeDistributionType:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"change/distributionType",distributionType:a})},validate:function(a){a>=0&&(b("MediaEffectFrameEditorDispatcher").dispatch({type:"form/validate",step:a}),k.scrollToFirstError())},scrollToFirstError:function(){window.setTimeout(function(){var a=document.getElementsByClassName(j);if(a.length>0){var c=a[0].offsetTop-40;a=b("Style").getScrollParent(a[0]);new(b("Animation"))(a).to("scrollTop",c).duration(750).go()}},750)},initDialog:function(a,c,d,e){__p&&__p();b("MediaEffectFrameEditorDispatcher").dispatch({type:"init/dialog",creationReferrer:a,flowType:c,sourceID:e});switch(c){case b("MediaEffectFlowType").EVENT:if(e&&d){k.changeOwner(b("nullthrows")(e));a=d.ownersData.find(function(a){return a.id===e});a||h(0,undefined);this.changeName(a.name)}break;default:break}},addFontData:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"add/fontData",data:a})},addTemplateData:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"add/templateData",data:a,variants:c})},applyTemplate:function(a){k._genApplyTemplate(a)["catch"](function(a){})},_genApplyTemplate:function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:c=this;if(a){e.next=5;break}b("MediaEffectFrameEditorDispatcher").dispatch({type:"clear/template"});e.next=16;break;case 5:c.deselectAll();e.prev=6;e.next=9;return b("regeneratorRuntime").awrap(a.genFrameData());case 9:d=e.sent;b("MediaEffectFrameEditorDispatcher").dispatch({type:"apply/template",templateFBID:a.templateFBID,frameData:d});e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),b("SimpleXUIDialog").showConfirm(e.t0.message,"Template loading failed. Retry?",function(b){b&&c.applyTemplate(a)},null);case 16:case"end":return e.stop()}},null,this,[[6,13]])},changeEffectHasText:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/effectHasText",value:a})},changeProductionVerification:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/productionVerification",value:a})},setScreenDimensions:function(a,c,d){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/screenDimensions",screenWidth:a,dialogHeight:c,flowType:d})},initEventDialogContext:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"init/eventDialog",dialogContext:a})},addInspirationCategoryNames:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"add/inspirationCategoryNames",value:a})},removeInspirationCategoryNames:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"remove/inspirationCategoryNames",value:a})},changeGatelogic:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/gatelogic",value:a})},changeIGCameraFormat:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/igCameraFormat",value:a})},changeHumanReadableDescription:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/humanReadableDescription",value:a})},setPlaceDescription:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/placeDescription",placeDescription:a})},selectTemplateCategoryID:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"select/templateCategoryID",value:a})},changeAttributedOwner:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"select/attributedOwnerID",value:a})},initEffectData:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"init/effectData",data:a})},changeActiveStatus:function(a,c,d,e){b("promiseDone")(b("MediaEffectMetadataDataLoader").changeActiveStatus(a,c).then(function(a){a=a.payload.effects;b("MediaEffectFrameEditorDispatcher").dispatch({type:"effect/edited",data:a[0]});b("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:a}});d&&d()})["catch"](function(a){b("AsyncResponse").defaultErrorHandler(a),e&&e()}))},notifyEnterCreationFlowFromInlineNUX:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"inlineNUX/enterCreationFlow"})},updateValidationResult:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"asset/validate",result:c,stickerFBID:a})},muteNotifications:function(){var a=i.of.apply(i,arguments);b("MediaEffectFrameEditorDispatcher").dispatch({type:"notification/mute",notificationTypes:a})},unmuteNotifications:function(){var a=i.of.apply(i,arguments);b("MediaEffectFrameEditorDispatcher").dispatch({type:"notification/unmute",notificationTypes:a})},highlightNotification:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"notification/highlight",location:a})},addSystemColorPalettes:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"add/systemColorPalettes",paletteData:a})},bootstrapFontData:function(){b("MediaEffectFrameEditorDispatcher").dispatch({type:"bootstrap/fontData"})},createNewTemplateVariation:function(a){a=b("MediaEffectTemplateVariationRecord").fromSourceTemplate(a);a.then(function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"new/templateVariation",templateVariation:a})})["catch"](function(a){})},setCurrentTemplateVariation:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/currentTemplateVariation",localTemplateID:a})},setTemplateSourceColorPalette:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/templateSourceColorPalette",palette:a})},setUserColorPalette:function(a,c){b("MediaEffectFrameEditorDispatcher").dispatch({type:"set/userColorPalette",palette:a,index:c})},checkFBOnlyMediaRestriction:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbOnlyMediaRestriction",value:a})},updateEffectID:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"update/effectID",effectID:a})},updateMetadata:function(a,c,d,e){a=b("XMediaEffectAsyncEditController").getURIBuilder().setFBID("media_effect_id",a).getURI();a=new(b("AsyncUploadRequest"))().setURI(a).setAllowCrossOrigin(!1).setData(c).setFiles(d);a.subscribe("success",function(a,c){b("MediaEffectUploadManager").informUploadDone(c.getResponse().payload),e&&e()});a.subscribe("failure",function(a,c){b("AsyncResponse").defaultErrorHandler(c)});a.send()},addCaptureMode:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"add/captureMode",value:a})},removeCaptureMode:function(a){b("MediaEffectFrameEditorDispatcher").dispatch({type:"remove/captureMode",value:a})}};e.exports=k}),null);
__d("MediaEffectMetadataCategoryAndTags.react",["cx","fbt","MediaEffectCard.react","MediaEffectMetadataTagsTypeahead.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement(b("MediaEffectCard.react"),{className:"_2x0s",title:h._("T\u1eeb kh\u00f3a"),tooltip:h._("Th\u00eam t\u1ed1i \u0111a 10 t\u1eeb kh\u00f3a \u0111\u1ec3 gi\u00fap m\u1ecdi ng\u01b0\u1eddi t\u00ecm hi\u1ec7u \u1ee9ng c\u1ee7a b\u1ea1n. T\u1eeb kh\u00f3a ph\u1ea3i tu\u00e2n th\u1ee7 \u0111i\u1ec1u kho\u1ea3n v\u00e0 ch\u00ednh s\u00e1ch c\u1ee7a n\u1ec1n t\u1ea3ng.")},b("React").createElement(b("MediaEffectMetadataTagsTypeahead.react"),this.props))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("XMediaEffectFBOnlySettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/targeting/",{flow_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MediaEffectMetadataContainer.react",["cx","fbt","AsyncRequest","DOMContainer.react","FluxContainer","FXEntMediaEffectSubmissionStatus","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameCreationStepsConfig","MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectMetadataCategoryAndTags.react","MediaEffectMetadataLocationV2.react","MediaEffectMetadataNameContainer.react","MediaEffectMetadataSchedule.react","MediaEffectMetadataStore","MediaEffectMetadataViewStore","MediaEffectWarnings.react","React","XMediaEffectFBOnlySettingsController","XUICard.react","XUIText.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MediaEffectFrameCreationStepsConfig").CreationSteps;b("immutable").List;var k="124024574287414",l="ig_camera_core_team";i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.getStores=function(){return[b("MediaEffectFrameCreateDialogDataStore"),b("MediaEffectMetadataStore"),b("MediaEffectMetadataViewStore")]};a.calculateState=function(a,c){a=b("MediaEffectMetadataStore").getState();var d=b("MediaEffectMetadataViewStore").getState(),e=a.get("selectedOwnerID");c=b("MediaEffectFrameCreationStepsConfig").getStep(c.flowType,b("MediaEffectFrameCreateDialogDataStore").getState().get("validatingStep"));c=c===j.TARGETING;var f=a.get("gatelogic")===null&&e===k?l:a.get("gatelogic");b("MediaEffectMetadataActionCreators").changeGatelogic(f);return{endTime:a.get("endTime"),errors:d.get("errors"),location:a.get("location"),startTime:a.get("startTime"),selectedCategoryID:a.get("selectedCategoryID"),selectedOwner:b("MediaEffectMetadataViewStore").getOwner(e),tags:a.get("tags"),timezone:a.get("timezone"),isValidating:c,locationTarget:a.get("locationTarget"),fbOnlySection:a.get("fbOnlySection")}};a.prototype.componentDidMount=function(){this.$1()};a.prototype.$1=function(){var a=b("XMediaEffectFBOnlySettingsController").getURIBuilder().setEnum("flow_type",this.props.flowType).getURI();new(b("AsyncRequest"))().setURI(a).setAllowCrossOrigin(!0).send()};a.prototype.$2=function(a){b("MediaEffectMetadataActionCreators").changeOwner(a),b("MediaEffectMetadataActionCreators").resetLocation()};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores([b("MediaEffectFrameCreateDialogDataStore"),b("MediaEffectMetadataStore"),b("MediaEffectMetadataViewStore")])};a.prototype.getLocationSection=function(){var a=this.state,c=a.isValidating,d=a.location,e=a.locationTarget;a=a.selectedOwner;return!a?null:b("React").createElement("div",null,b("React").createElement(b("MediaEffectMetadataLocationV2.react"),{disabled:this.props.disabled,isValidating:c,location:d,locationTargetType:e,onLocationSelected:b("MediaEffectMetadataActionCreators").changeLocation,onLocationTargetTypeSelected:b("MediaEffectMetadataActionCreators").changeLocationTarget,selectedOwner:a}),b("React").createElement("div",{className:"_204i"}))};a.prototype.render=function(){var a=this.props.flowType,c=this.state,d=c.endTime,e=c.fbOnlySection,f=c.selectedCategoryID,g=c.selectedOwner,i=c.startTime,j=c.tags;c=c.timezone;var k=this.props.bootstrapData.metadataJSData.submissionStatus,l=!!this.props.bootstrapData.metadataJSData.id;k=k===b("FXEntMediaEffectSubmissionStatus").DRAFT||k===b("FXEntMediaEffectSubmissionStatus").DENIED||g&&g.isFirstParty;var m=this.state.errors.toArray().map(function(a,c){return b("React").createElement(b("MediaEffectWarnings.react"),{items:a.messageItems,key:c+a.code,message:a.message||""})});e=e!==null?b("React").createElement(b("DOMContainer.react"),null,e):null;return b("React").createElement("div",{className:"_2041 _190n"},m,!l||k?b("React").createElement("div",{className:"_3or3"},b("React").createElement("div",{className:"_4s2u"},b("React").createElement(b("XUIText.react"),{className:"_3os1",display:"block"},h._("C\u1ea7n c\u00f3 chi ti\u1ebft"))),b("React").createElement(b("XUICard.react"),{className:"_3os2"},b("React").createElement(b("MediaEffectMetadataNameContainer.react"),{disabled:!1,flowType:a,placeholder:h._("\u0110\u1eb7t t\u00ean hi\u1ec7u \u1ee9ng c\u1ee7a b\u1ea1n")}))):null,b("React").createElement("div",{className:"_3or3"},b("React").createElement("div",{className:"_4s2u"},b("React").createElement(b("XUIText.react"),{className:"_3os1",display:"block"},h._("Chi ti\u1ebft t\u00f9y ch\u1ecdn"))),b("React").createElement(b("XUICard.react"),{className:"_3os2"},this.getLocationSection(),b("React").createElement(b("MediaEffectMetadataSchedule.react"),{disabled:this.props.disabled,endTime:d,onDateRangeChange:b("MediaEffectMetadataActionCreators").changeScheduleRange,owner:g,startTime:i,timezone:c}),b("React").createElement("div",{className:"_204i"}),b("React").createElement(b("MediaEffectMetadataCategoryAndTags.react"),{disabled:this.props.disabled,onAddTag:b("MediaEffectMetadataActionCreators").addTag,onCategorySelected:b("MediaEffectMetadataActionCreators").changeCategory,onRemoveTag:b("MediaEffectMetadataActionCreators").removeTag,selectedCategoryID:f,tags:j}))),e)};function a(){i.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectMetadataName.react",["cx","fbt","MediaEffectCard.react","MediaEffectEditorFunnelLogger","MediaEffectMetadataValidationUtils","MediaEffectWebdriverIDs","React","XUITextInput.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$2=function(event){b("MediaEffectEditorFunnelLogger").logChangeName(),this.props.onNameChange(event.target.value)}.bind(this),this.props.handleServerValidationResponse(a.nameData)}a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.props.handleServerValidationResponse(a.nameData)};a.prototype.$1=function(){if(this.props.isValidating){var a=b("MediaEffectMetadataValidationUtils").validateName(this.props.nameData);if(!a)return h._("B\u1ea1n ph\u1ea3i \u0111\u1eb7t t\u00ean.")}return this.props.isError?h._("T\u00ean kh\u00f4ng h\u1ee3p l\u1ec7"):null};a.prototype.render=function(){return b("React").createElement(b("MediaEffectCard.react"),{className:"_2x0s",title:h._("T\u00ean"),tooltip:h._("Ch\u1ecdn t\u00ean hi\u1ec7u \u1ee9ng c\u1ee7a b\u1ea1n.")},b("React").createElement(b("XUITextInput.react"),{className:"_3_kx","data-testid":b("MediaEffectWebdriverIDs").LWE_EFFECT_FRAME_NAME_INPUT,disabled:this.props.disabled,height:"tall",onChange:this.$2,placeholder:this.props.placeholder,value:this.props.nameData,xuiError:this.$1()},this.props.nameData))};e.exports=a}),null);
__d("XMediaEffectValidationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/media_effect/datasource/validation/",{name:{type:"String"},description:{type:"String"}})}),null);
__d("MediaEffectMetadataNameContainer.react",["cx","AsyncRequest","FluxContainer","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameCreationStepsConfig","MediaEffectMetadataActionCreators","MediaEffectMetadataName.react","MediaEffectMetadataStore","React","XMediaEffectValidationController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MediaEffectFrameCreationStepsConfig").CreationSteps;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){if(a){var c=b("XMediaEffectValidationController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setData({name:a}).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(this.$2).send()}}.bind(this),c}a.getStores=function(){return[b("MediaEffectFrameCreateDialogDataStore"),b("MediaEffectMetadataStore")]};a.calculateState=function(a,c){a=b("MediaEffectFrameCreationStepsConfig").getStep(c.flowType,b("MediaEffectFrameCreateDialogDataStore").getState().get("validatingStep"));c=b("MediaEffectMetadataStore").getState().hasFrameNameError;return{isError:c,isValidating:a===i.TARGETING,nameData:b("MediaEffectMetadataStore").getState().get("name")}};a.prototype.$2=function(a){a=!a.payload.valid;b("MediaEffectMetadataActionCreators").updateNameValidation(a)};a.prototype.render=function(){return b("React").createElement(b("MediaEffectMetadataName.react"),babelHelpers["extends"]({},this.props,{className:"_1wl8",handleServerValidationResponse:this.$1,isError:this.state.isError,isValidating:this.state.isValidating,nameData:this.state.nameData,onNameChange:b("MediaEffectMetadataActionCreators").changeName}))};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectError.react",["cx","React","XUIText.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.children;a=a.error;return b("React").createElement("div",{className:a?"_6ucz":""},c,a!=null&&b("React").createElement(b("XUIText.react"),{className:"_6uc-",color:"negative",display:"block",size:"body1"},a))}e.exports=a}),null);
__d("MediaEffectDateTimePicker.react",["cx","AbstractDateTimePicker.react","AdsTimezone","Arbiter","BUIDatePicker.react","BUITimeInput.react","DatePickerRestraints","LocalDateTime","MediaEffectError.react","MediaEffectWebdriverIDs","React","ReactComponentWithPureRenderMixin","ReactDOM","SUIAudiencePlatformTheme","SUITimeZoneSelector.react","Timezone","immutable","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=b("React").PropTypes;c=b("immutable").Map;d=b("React").createClass({displayName:"MediaEffectDateTimePicker",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{dateRestraints:a.arrayOf(a.func),disabled:a.bool,height:a.oneOf(["short","tall"]),layout:a.oneOf(["one-line","two-line","three-line"]),onChange:a.func.isRequired,showTimezoneName:a.bool,timestamp:a.number,timezone:a.string,showTimezoneSelector:a.bool,dataTestID:a.string},getDefaultProps:function(){return{dateRestraints:o(),disabled:!1,height:"short",layout:"one-line",showTimezoneName:!0,showTimezoneSelector:!0,timezone:k(),dataTestID:null}},render:function(){__p&&__p();var a=this.props,c=a.className;a.dateRestraints;var d=a.disabled,e=a.height,f=a.layout;a.onChange;var g=a.showTimezoneName,h=a.showTimezoneSelector,j=a.timestamp,k=a.timezone,l=a.error,m=a.dataTestID;a=babelHelpers.objectWithoutProperties(a,["className","dateRestraints","disabled","height","layout","onChange","showTimezoneName","showTimezoneSelector","timestamp","timezone","error","dataTestID"]);var o=n(k),q=i(j,o);k=b("joinClasses")("_6feb"+(d?" _6fec":""),c);c=f==="two-line"&&g&&202||!g&&110||"auto";h=h?b("React").createElement(p,{className:"_6fed"+(f==="one-line"?" _6fee":"")+(f!=="one-line"?" _6fej":""),"data-testid":b("MediaEffectWebdriverIDs").DATETIME_PICKER_TIMEZONE,isDisabled:d,onChange:function(a){return this._handleChange(q,a.get("timeZoneId"))}.bind(this),shouldShowSubtitleInSelector:g,style:!j&&{display:"none"},value:b("SUITimeZoneSelector.react").VALUE({timeZoneId:o}),width:c}):null;return b("React").createElement(b("MediaEffectError.react"),{error:l},b("React").createElement("div",{className:k,"data-testid":m},b("React").createElement(b("AbstractDateTimePicker.react"),babelHelpers["extends"]({},a,{className:"_6fek",classNames:{innerWrapper:"_6fel"},datePicker:b("React").createElement(b("BUIDatePicker.react"),{className:"_6fem","data-testid":b("MediaEffectWebdriverIDs").DATETIME_PICKER_DATE,dateRestraints:this._dateRestraints(o),height:e,placeholder:"mm/dd/yyyy"}),disabled:d,onChange:function(a){return this._handleChange(a,o)}.bind(this),timeInput:b("React").createElement(b("BUITimeInput.react"),{className:"_6fen"+(f!=="three-line"?" _6fee":"")+(f==="three-line"?" _6fej":""),"data-testid":b("MediaEffectWebdriverIDs").DATETIME_PICKER_TIME,height:e}),timezoneID:o,value:q})),h))},_handleChange:function(a,b){a=j(a,b);b=l(b);this.props.onChange({timestamp:a,timezone:b})},_dateRestraints:function(a){return this.props.dateRestraints&&this.props.dateRestraints.map(function(b){return function(c){return b(c&&c.toDateTime(a).toDate())}})}});function i(a,c){try{if(a&&c!=null)return b("LocalDateTime").fromInstant(Math.round(a/1e3),c);else return null}catch(a){return null}}function j(a,b){try{if(a&&b!=null){a=a.toInstant(b)*1e3;b=a-a%6e4;return b}else return null}catch(a){return null}}function k(){var a=b("Timezone").getEnvironmentTimezoneID();return l(a)}function l(a){a=b("AdsTimezone").names[a];return a}var m=c(b("AdsTimezone").names.map(function(a,b){return[a,b]}));function n(a){a=m.get(a);return a||m.get("America/Los_Angeles")}function o(){var a=new Date();a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()));var c=new Date(+a),d=new Date(+a);c.setFullYear(a.getFullYear()-5);d.setFullYear(a.getFullYear()+5);return[b("DatePickerRestraints").enforceDateIsNoEarlierThan(c),b("DatePickerRestraints").enforceDateIsNoLaterThan(d)]}h=babelHelpers.inherits(p,b("React").PureComponent);h&&h.prototype;p.prototype.componentDidMount=function(){b("ReactDOM").findDOMNode(this.refs.timezoneSelector).addEventListener("focusout",function(a){return window.setTimeout(function(a){return b("Arbiter").inform("reflow")})})};p.prototype.render=function(){return b("React").createElement(b("SUITimeZoneSelector.react"),babelHelpers["extends"]({},this.props,{ref:"timezoneSelector",theme:b("SUIAudiencePlatformTheme")}))};function p(){h.apply(this,arguments)}d.timezoneIDForName=n;e.exports=d}),null);
__d("MediaEffectMetadataScheduleDatePicker.react",["cx","fbt","DateConsts","DatePickerRestraints","DateTime","Grid.react","Link.react","MediaEffectDateTimePicker.react","MediaEffectMetadataValidationUtils","React","XUICloseButton.react","XUIText.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("Grid.react").GridItem;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){var b=a&&a.timezone;!a||!a.timestamp?this.props.onEndTimeChange(null,b):this.props.onEndTimeChange(new Date(a.timestamp),b)}.bind(this),this.$3=function(a){var b=a&&a.timezone;!a||!a.timestamp?this.props.onStartTimeChange(null,b):this.props.onStartTimeChange(new Date(a.timestamp),b)}.bind(this),this.$4=function(){if(!this.props.startTime)return;var a=new Date(this.props.startTime);a.setDate(a.getDate()+b("DateConsts").DAYS_PER_WEEK);this.props.onEndTimeChange(a,this.props.timezone)}.bind(this),this.$5=function(){this.props.onEndTimeChange(null,this.props.timezone)}.bind(this),c}a.prototype.$1=function(){var a=this.props,c=a.startTime;a=a.endTime;c=b("MediaEffectMetadataValidationUtils").validateTimeRange(c,a);return!c?h._("Kho\u1ea3ng th\u1eddi gian kh\u00f4ng h\u1ee3p l\u1ec7."):null};a.prototype.render=function(){__p&&__p();var a=this.props.startTime||new Date(),c=b("MediaEffectDateTimePicker.react").timezoneIDForName(this.props.timezone),d=[b("DatePickerRestraints").enforceDateIsNoEarlierThan(b("DateTime").now(c).startOfDay().toDate())],e=null;if(this.props.endTime){var f=this.props.endTime,g=new(b("DateTime"))(f/1e3,c);d.push(b("DatePickerRestraints").enforceDateIsNoLaterThan(g.endOfDay().toDate()));g=new(b("DateTime"))(a/1e3,c);e=b("React").createElement(b("MediaEffectDateTimePicker.react"),{dateRestraints:[b("DatePickerRestraints").enforceDateIsNoEarlierThan(g.startOfDay().toDate())],disabled:this.props.disabled,error:this.$1(),height:"tall",layout:"two-line",onChange:this.$2,showTimezoneSelector:!1,timestamp:f.getTime(),timezone:this.props.timezone})}else e=this.props.disabled?h._("Ch\u01b0a ch\u1ec9 \u0111\u1ecbnh"):b("React").createElement(b("Link.react"),{onClick:this.$4},h._("Th\u00eam ng\u00e0y k\u1ebft th\u00fac"));c="_9vd";return b("React").createElement(b("Grid.react"),{alignv:"middle",className:"_3-8m",cols:3},b("React").createElement(j,null,b("React").createElement(b("XUIText.react"),null,h._("B\u1eaft \u0111\u1ea7u"))),b("React").createElement(j,null,b("React").createElement("div",{className:b("joinClasses")(c,"_3-8h _2pir")},b("React").createElement(b("MediaEffectDateTimePicker.react"),{dateRestraints:d,disabled:this.props.disabled,height:"tall",layout:"two-line",onChange:this.$3,timestamp:a.getTime(),timezone:this.props.timezone}))),b("React").createElement(j,null),b("React").createElement(j,null,b("React").createElement(b("XUIText.react"),null,h._("K\u1ebft th\u00fac"))),b("React").createElement(j,null,b("React").createElement("div",{className:b("joinClasses")(c,"_3-8h _2pir")},e)),b("React").createElement(j,null,this.props.endTime&&!this.props.disabled?b("React").createElement(b("XUICloseButton.react"),{className:"_3-9a",onClick:this.$5,size:"small"}):null))};e.exports=a}),null);
__d("MediaEffectMetadataSchedule.react",["cx","fbt","MediaEffectEditorFunnelLogger","MediaEffectMetadataScheduleDatePicker.react","MediaEffectProfilePolicy","React","XUIRadioList.react","MediaEffectCard.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("XUIRadioList.react").Item;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a==="no_constraint"?this.props.onDateRangeChange(null,null,null):this.props.onDateRangeChange(new Date(),null,null)}.bind(this),this.$4=function(a,c){var d=this.props.startTime;b("MediaEffectEditorFunnelLogger").logChangeEndTime();this.props.onDateRangeChange(d,a,c)}.bind(this),this.$5=function(a,c){var d=this.props.endTime;b("MediaEffectEditorFunnelLogger").logChangeStartTime();this.props.onDateRangeChange(a,d,c)}.bind(this),c}a.prototype.$2=function(){if(this.props.startTime||this.props.endTime)return"specified";else return"no_constraint"};a.prototype.$3=function(){return this.$2()!=="specified"?null:b("React").createElement("div",{className:"_2pis"},b("React").createElement(b("MediaEffectMetadataScheduleDatePicker.react"),babelHelpers["extends"]({onEndTimeChange:this.$4,onStartTimeChange:this.$5},this.props)))};a.prototype.render=function(){var a=!this.props.owner||this.props.owner.policies.includes(b("MediaEffectProfilePolicy").USE_TRAILING_REVIEW)?h._("\u0110\u01b0a v\u00e0o ho\u1ea1t \u0111\u1ed9ng ngay"):h._("Ho\u1ea1t \u0111\u1ed9ng sau khi \u0111\u01b0\u1ee3c ph\u00ea duy\u1ec7t");return b("React").createElement(b("MediaEffectCard.react"),{className:"_64q4",title:h._("L\u1ecbch tr\u00ecnh"),tooltip:h._("Ch\u1ecdn cho ph\u00e9p m\u1ecdi ng\u01b0\u1eddi s\u1eed d\u1ee5ng hi\u1ec7u \u1ee9ng c\u1ee7a b\u1ea1n ngay sau khi hi\u1ec7u \u1ee9ng \u0111\u01b0\u1ee3c ph\u00ea duy\u1ec7t hay ch\u1ec9 trong nh\u1eefng ng\u00e0y c\u1ee5 th\u1ec3.")},b("React").createElement(b("XUIRadioList.react"),{disabled:this.props.disabled,onValueChange:this.$1,selectedValue:this.$2()},b("React").createElement(j,{disabled:this.props.disabled,value:"no_constraint"},a),b("React").createElement(j,{disabled:this.props.disabled,value:"specified"},h._("\u0110\u1eb7t ng\u00e0y b\u1eaft \u0111\u1ea7u v\u00e0 k\u1ebft th\u00fac"))),this.$3())};a.propTypes={endTime:c.oneOfType([c.oneOf([null]),c.instanceOf(Date)]),onDateRangeChange:c.func.isRequired,startTime:c.oneOfType([c.oneOf([null]),c.instanceOf(Date)]),timezone:c.string};e.exports=a}),null);
__d("MediaEffectMetadataRecord",["FXEntMediaEffectSubmissionStatus","React","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record;g=babelHelpers.inherits(a,c({adsTargetingSpec:"{age_min: 13, age_max: 65}",attributedOwnerID:null,captureModes:[],connectAppID:null,effectHasText:!1,endTime:null,fbBoosted:!1,fbCatalogGKs:[],fbEligibilityGKs:[],fbExperimentID:null,fbOnlyMediaRestriction:!1,fbOnlySection:null,fbPageLiked:null,fbRankWeight:null,fbWhitelistCheckEligibility:!1,fbWhitelistedUsers:[],gatelogic:null,igGatekeeper:null,hasFrameNameError:!1,humanReadableDescription:null,id:null,igCameraFormat:null,inspirationCategoryNames:[],locales:[],location:null,locationPageID:null,locationTarget:"everyone",name:null,offlineOnly:!1,placeDescription:null,productionVerification:!1,productVisibilityPolicy:null,rejectReasons:null,saveAsDraft:!1,selectedCategoryID:null,selectedInstagramAttributionID:null,selectedInstructionID:null,selectedOwnerID:null,selectedTemplateCategoryID:null,selfBirthday:!1,sourceTemplateID:null,startTime:null,submissionStatus:b("FXEntMediaEffectSubmissionStatus").DRAFT,tags:[],thumbnail:null,thumbnailURI:null,timezone:null,timingSchedule:null,use_owner_selector:!0}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectMetadataStore",["FluxReduceStore","LocationConstants","MediaEffectFlowType","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorDispatcher","MediaEffectMetadataRecord","MediaEffectMetadataValidationUtils","MediaEffectMetadataViewStore","MediaEffectPlaceDescriptionRecord"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("MediaEffectMetadataRecord"))()};a.prototype.reduce=function(a,c){__p&&__p();var d,e;switch(c.type){case"add/tag":d=a.get("tags");d.push(c.data);a=a.set("tags",d);break;case"apply/template":a=a.set("sourceTemplateID",c.templateFBID);break;case"clear/template":a=a.set("sourceTemplateID",null);break;case"remove/tag":var f=c.data;d=a.get("tags");d=d.filter(function(a){return a.uniqueID!==f.uniqueID&&a.title!==f.title});a=a.set("tags",d);break;case"add/fbWhitelistedUser":d=a.get("fbWhitelistedUsers");d.push(c.data);a=a.set("fbWhitelistedUsers",d);break;case"remove/fbWhitelistedUser":var g=c.data;d=a.get("fbWhitelistedUsers");d=d.filter(function(a){return a.uniqueID!==g.uniqueID&&a.name!==g.name});a=a.set("fbWhitelistedUsers",d);break;case"save/draft":a=a.set("saveAsDraft",!0);break;case"select/instruction":a=a.set("selectedInstructionID",c.instructionID);break;case"update/category":a=a.set("selectedCategoryID",c.value);break;case"update/effectID":a=this.getState().set("id",c.effectID);break;case"update/fbRankingStrategy":a=a.set("fbBoosted",c.value==="BOOST");c.value!=="MANUAL"&&(a=a.set("fbRankWeight",null));break;case"update/fbRankWeight":a=a.set("fbRankWeight",c.value);break;case"update/fbWhitelistCheckEligibility":a=a.set("fbWhitelistCheckEligibility",c.value);break;case"update/fbCatalogGKs":a=a.set("fbCatalogGKs",c.value);break;case"update/fbEligibilityGKs":a=a.set("fbEligibilityGKs",c.value);break;case"update/fbOnlyMediaRestriction":a=a.set("fbOnlyMediaRestriction",c.value);break;case"update/fbPageLiked":a=a.set("fbPageLiked",c.value);break;case"update/gatelogic":a=a.set("gatelogic",c.value);break;case"update/igGatekeeper":a=a.set("igGatekeeper",c.value);break;case"update/igCameraFormat":a=a.set("igCameraFormat",c.value);break;case"update/locales":a=a.set("locales",c.value);break;case"update/locationPageID":a=a.set("locationPageID",c.value);c.value===null&&(a=a.set("placeDescription",null));break;case"update/location":a=a.set("location",c.value);break;case"update/locationTarget":a=a.set("locationTarget",c.value);break;case"update/name":a=a.set("name",c.value);break;case"update/offlineOnly":a=a.set("offlineOnly",c.value);break;case"update/productVisibilityPolicy":a=a.set("productVisibilityPolicy",c.value);break;case"update/selectedInstagramAttributionID":a=a.set("selectedInstagramAttributionID",c.value);break;case"update/selectedOwnerID":a=a.set("selectedOwnerID",c.value);break;case"update/selfBirthday":a=a.set("selfBirthday",c.value);break;case"update/thumbnail":a=a.set("thumbnail",c.thumbnail);break;case"update/timingSchedule":a=a.set("timingSchedule",c.value);break;case"update/adsTargetingSpec":a=a.set("adsTargetingSpec",c.adsTargetingSpec);break;case"update/scheduleRange":a=a.set("startTime",c.startTime).set("endTime",c.endTime).set("timezone",c.timezone);break;case"update/nameValidation":a=a.set("hasFrameNameError",c.isError);break;case"init/effectMetadata":d=Object.assign({},c.data.activationJSData);d=Object.assign(d,c.data.metadataJSData);d.startTime&&(d.startTime=new Date(d.startTime*1e3));d.endTime&&(d.endTime=new Date(d.endTime*1e3));d.locationPageID&&(d.locationTarget="targeted");d.location&&(d.locationTarget="targeted",d.location.distance_unit=b("LocationConstants").KILOMETER_UNIT,d.location=new(b("MediaEffectPlaceDescriptionRecord"))(d.location));a=new(b("MediaEffectMetadataRecord"))(d);break;case"update/effectHasText":a=a.set("effectHasText",c.value);break;case"update/humanReadableDescription":a=a.set("humanReadableDescription",c.value);break;case"update/productionVerification":a=a.set("productionVerification",c.value);break;case"set/placeDescription":a=a.set("placeDescription",c.placeDescription);break;case"select/templateCategoryID":a=a.set("selectedTemplateCategoryID",c.value);break;case"select/attributedOwnerID":a=a.set("attributedOwnerID",c.value);break;case"remove/inspirationCategoryNames":e=c.value;d=a.get("inspirationCategoryNames");d=d.filter(function(a){return a!==e});a=a.set("inspirationCategoryNames",d);break;case"add/inspirationCategoryNames":e=c.value;d=a.get("inspirationCategoryNames");d.push(e);a=a.set("inspirationCategoryNames",d);break;case"update/setUseOwnerSelector":a=a.set("use_owner_selector",c.value);break;case"remove/captureMode":e=c.value;d=a.get("captureModes");d=d.filter(function(a){return a!==e});a=a.set("captureModes",d);break;case"add/captureMode":e=c.value;d=a.get("captureModes");d.push(e);a=a.set("captureModes",d);break;case"update/fbOnlySection":a=a.set("fbOnlySection",c.section);break}return a};a.prototype.getUseOwnerSelector=function(){return this.getState().get("use_owner_selector")};a.prototype.hasEffectID=function(){return this.getState().get("id")!==null};a.prototype.getRequestData=function(a){__p&&__p();var c=this.getState(),d=c.get("selectedOwnerID"),e=c.get("location");e=e?{page_id:e.key||undefined,location:e.manual_geo?{latitude:e.latitude,longitude:e.longitude,radius_km:e.radius}:undefined,constrain_eligibility:!!e.constrain_eligibility}:undefined;d={effect_description:"",end_time:c.get("endTime")?Math.floor(c.get("endTime").getTime()/1e3):undefined,flow_type:b("MediaEffectFrameCreateDialogDataStore").getState().flowType,media_effect_category:c.get("selectedCategoryID"),media_effect_owner:d,media_effect_save_as_draft:c.get("saveAsDraft"),media_effect_tags:c.get("tags").map(function(a){return a.title}),name:c.get("name"),start_time:c.get("startTime")?Math.floor(c.get("startTime").getTime()/1e3):undefined,source_template_id:c.get("sourceTemplateID"),targeting_place_page:c.get("locationPageID"),targeting_place:e,timezone:c.get("timezone"),ads_targeting_spec:c.get("adsTargetingSpec")};if(!a)return d;e=c.get("selectedTemplateCategoryID");e!==null?e=[e]:e=[];d=Object.assign(d,{fb_catalog_gks:c.get("fbCatalogGKs").length>0?c.get("fbCatalogGKs"):undefined,fb_eligibility_gks:c.get("fbEligibilityGKs").length>0?c.get("fbEligibilityGKs"):undefined,fb_only_media_restriction:c.get("fbOnlyMediaRestriction"),fb_page_liked:c.get("fbPageLiked")||undefined,fb_ranking_boosted:c.get("fbBoosted"),fb_ranking_weight:c.get("fbRankWeight"),fb_whitelisted_user_ids:c.get("fbWhitelistedUsers").map(function(a){return a.uniqueID}),fb_whitelist_check_eligibility:c.get("fbWhitelistCheckEligibility"),gatelogic:c.get("gatelogic"),igGatekeeper:c.get("igGatekeeper"),has_text:c.get("effectHasText"),human_readable_description:c.get("humanReadableDescription"),ig_camera_format:c.get("igCameraFormat"),locales:c.get("locales"),meida_effect_instruction:c.get("selectedInstructionID"),media_effect_template_categories:e,offline_only:!!c.get("offlineOnly"),product_visibility_policy:c.get("productVisibilityPolicy"),self_birthday:!!c.get("selfBirthday"),timing_schedule:c.get("timingSchedule"),thumbnail:c.get("thumbnail"),inspiration_category_names:c.get("inspirationCategoryNames"),capture_modes:c.get("captureModes"),instagram_attribution_id:c.get("selectedInstagramAttributionID")});a=c.get("attributedOwnerID");a!==null?d.attributed_owner=a:delete d.attributed_owner;return d};a.prototype.isBasicMetadataValid=function(){var a=this.getState(),c=b("MediaEffectFrameCreateDialogDataStore").getState().flowType===b("MediaEffectFlowType").TEMPLATE;if(a.get("hasFrameNameError"))return!1;if(!b("MediaEffectMetadataValidationUtils").validateTimeRange(a.get("startTime"),a.get("endTime")))return!1;if(a.get("locationTarget")==="targeted"&&!b("MediaEffectMetadataValidationUtils").validateLocationPageID(a.get("locationPageID"))&&!b("MediaEffectMetadataValidationUtils").validateLocation(a.get("location")))return!1;return c&&a.selectedTemplateCategoryID===null?!1:!0};a.prototype.isOwnerValid=function(){__p&&__p();var a=this.getState(),c=a.get("selectedOwnerID"),d=!a.get("id");if(!b("MediaEffectMetadataValidationUtils").validateOwnerID(c))return!1;if(d){d=a.get("productionVerification");a=b("MediaEffectMetadataViewStore").getOwner(c);if(a&&a.isProductionFirstParty&&!d)return!1}return!0};a.prototype.isNameValid=function(){return b("MediaEffectMetadataValidationUtils").validateName(this.getState().get("name"))};a.prototype.isAllMetadataValid=function(){if(!this.isNameValid())return!1;return!this.isOwnerValid()?!1:this.isBasicMetadataValid()};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("XMediaEffectTagsDataSourceController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/media_effect/datasource/tags/",{is_featured:{type:"Bool",defaultValue:!1},value:{type:"String"}})}),null);
__d("MediaEffectMetadataTagsTypeahead.react",["fbt","MediaEffectEditorFunnelLogger","React","SearchableEntry","WebAsyncSearchSource","XMediaEffectTagsDataSourceController","XUITokenizer.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=10;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;a.prototype.componentDidUpdate=function(){this.state.resetQueryString&&this.setState({resetQueryString:!1})};function a(a){h.constructor.call(this,a),this.searchSource=new(b("WebAsyncSearchSource"))({queryRequests:[{uri:b("XMediaEffectTagsDataSourceController").getURIBuilder().setBool("is_featured",!1).getURI()}]}),this.state={resetQueryString:!1}}a.prototype.render=function(){return b("React").createElement(b("XUITokenizer.react"),{disabled:this.props.disabled,entries:this.props.tags.map(function(a){return new(b("SearchableEntry"))({title:a.title,uniqueID:a.uniqueID||a.title})}),limit:i,onAddEntryAttempt:this.$1.bind(this),onEnterWithoutSelection:this.$2.bind(this),onRemoveEntryAttempt:this.$3.bind(this),placeholder:g._("Th\u00eam t\u1ed1i \u0111a 10 t\u1eeb kh\u00f3a"),queryString:this.state.resetQueryString?"":undefined,searchSource:this.searchSource,tokenizeQueryStringOnBlur:this.$2.bind(this)})};a.prototype.$1=function(a){__p&&__p();this.$2();if(this.props.tags.length>=i)return;var b=a.getTitle();if(!b||!b.length)return;var c=this.props.tags.map(function(a){return a.title});if(c.includes(b))return;c=a.getUniqueID();this.$4();this.props.onAddTag({uniqueID:c,title:b})};a.prototype.$3=function(a){this.$2();var b=a.getUniqueID();a=a.getTitle();this.$4();this.props.onRemoveTag({uniqueID:b,title:a})};a.prototype.$2=function(){this.setState({resetQueryString:!0})};a.prototype.$4=function(){b("MediaEffectEditorFunnelLogger").logChangeTag()};a.propTypes={disabled:c.bool,tags:c.array,onAddTag:c.func.isRequired,onRemoveTag:c.func.isRequired};a.defaultProps={tags:[]};e.exports=a}),null);
__d("MediaEffectProfileOwnerTile.react",["cx","ProfileTile.react","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=a.owner;return!a?null:b("React").createElement(b("ProfileTile.react"),{id:a.id,imageProps:{className:"_etu"},name:a.name,tileProps:{className:"_etv"},titleProps:{className:"_eu3"}})};e.exports=a}),null);
__d("MediaEffectOwnerByline.react",["MediaEffectEventOwnerBylineTileContainer.react","MediaEffectProfileOwnerTile.react","React"],(function(a,b,c,d,e,f){"use strict";a=function(a){switch(a.owner.type){case"event":return b("React").createElement(b("MediaEffectEventOwnerBylineTileContainer.react"),null);default:return b("React").createElement(b("MediaEffectProfileOwnerTile.react"),{owner:a.owner})}};e.exports=a}),null);
__d("MediaEffectDialogValidationConfigs",["fbt","MediaEffectValidationTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=(c={},c[b("MediaEffectValidationTypes").CANVAS_COVERAGE_LIMIT]={title:g._("Vui l\u00f2ng xem l\u1ea1i khung c\u1ee7a b\u1ea1n"),content:g._("Khung kh\u00f4ng \u0111\u01b0\u1ee3c che qu\u00e1 nhi\u1ec1u kh\u00f4ng gian canvas b\u1eb1ng pixel m\u1edd.")},c[b("MediaEffectValidationTypes").ASSET_NUMBER_LIMIT]={title:g._("Vui l\u00f2ng xem l\u1ea1i khung c\u1ee7a b\u1ea1n"),content:g._("Vui l\u00f2ng ch\u1ec9 t\u1ea3i l\u00ean t\u1ed1i \u0111a 15 \u1ea3nh trong m\u1ed9t khung.")},c);d=[b("MediaEffectValidationTypes").CANVAS_COVERAGE_LIMIT,b("MediaEffectValidationTypes").ASSET_NUMBER_LIMIT];function a(a){return h[a]}e.exports={getContentByType:a,blockingTypes:d}}),null);
__d("MediaEffectValidationStore",["FluxReduceStore","MediaEffectDialogValidationConfigs","MediaEffectFrameEditorDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return b("immutable").Set()};a.prototype.reduce=function(a,c){switch(c.type){case"validation/add":return a.add(c.validation);case"validation/remove":return a.remove(c.validation);case"init/dialog":return b("immutable").Set()}return a};a.prototype.getBlockingValidation=function(){__p&&__p();for(var a=b("MediaEffectDialogValidationConfigs").blockingTypes,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(this.getState().has(e))return e}return null};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectValidationDialogContainer.react",["fbt","FluxContainer","MediaEffectDialogValidationConfigs","MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectValidationStore","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.state.validationType&&b("MediaEffectMetadataActionCreators").removeValidation(this.state.validationType)}.bind(this),c}a.getStores=function(){return[b("MediaEffectValidationStore")]};a.calculateState=function(){return{validationType:b("MediaEffectValidationStore").getBlockingValidation()}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){return this.state.validationType?b("React").createElement(b("XUIDialog.react"),{layerHideOnBlur:!1,shown:!0,width:445},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},b("MediaEffectDialogValidationConfigs").getContentByType(this.state.validationType).title),b("React").createElement(b("XUIDialogBody.react"),null,b("MediaEffectDialogValidationConfigs").getContentByType(b("nullthrows")(this.state.validationType)).content),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIButton.react"),{label:g._("OK"),onClick:this.$1,use:"confirm"}))):null};e.exports=b("FluxContainer").create(a)}),null);
__d("MediaEffectFrameEditorTemplateGrid.react",["cx","ix","Grid.react","MediaEffectMetadataActionCreators","Image.react","React","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=b("Grid.react").GridItem;c=babelHelpers.inherits(l,b("React").PureComponent);i=c&&c.prototype;function l(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("MediaEffectMetadataActionCreators").applyTemplate(this.props.template)}.bind(this),c}l.prototype.render=function(){var a=this.props.template?this.props.template.previewURL:h("86677");return b("React").createElement("a",{className:"_2w6x"+(this.props.selected?" _2w6_":"")+" _3-fi"+(this.props.template?"":" _2w70")+" _3-fj",href:"#",onClick:this.$1},b("React").createElement(b("Image.react"),{className:"_2w71",src:a}))};j=babelHelpers.inherits(a,b("React").PureComponent);j&&j.prototype;a.prototype.render=function(){var a=98*this.props.rows+6,c=this.props,d=c.activeTemplate,e=c.showNoTemplate;c=c.templates;return b("React").createElement("div",{className:"_2w72"},b("React").createElement(b("ScrollableArea.react"),{height:a},b("React").createElement("div",{className:"_2w73"},b("React").createElement(b("Grid.react"),{cols:2},e?b("React").createElement(k,null,b("React").createElement(l,{selected:d===null})):null,c.toArray().map(function(a){return b("React").createElement(k,{key:a.templateFBID},b("React").createElement(l,{selected:a===d||d&&d.sourceTemplateFBID&&a.templateFBID===d.sourceTemplateFBID,template:a}))})))))};function a(){j.apply(this,arguments)}a.defaultProps={rows:3,showNoTemplate:!0};e.exports=a}),null);
__d("MediaEffectColorPaletteWheel.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,b("React").PureComponent);h&&h.prototype;j.prototype.render=function(){var a=360*this.props.size,c=Math.max(a,180)-180;a=Math.min(a,180);return b("React").createElement("div",{className:"_3p7c",style:{transform:"rotate("+this.props.offset*360+"deg)"}},b("React").createElement("div",{className:"_3p7f _3p7e"},b("React").createElement("div",{className:"_3p7d",style:{backgroundColor:this.props.color,transform:"translateX(-100%) rotate("+c+"deg)"}})),b("React").createElement("div",{className:"_3p7g _3p7e"},b("React").createElement("div",{className:"_3p7d",style:{backgroundColor:this.props.color,transform:"translateX(-100%) rotate("+a+"deg)"}})))};function j(){h.apply(this,arguments)}c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onHover&&this.props.onHover(!0)}.bind(this),this.$2=function(){this.props.onHover&&this.props.onHover(!1)}.bind(this),b}a.prototype.render=function(){var a=this.props.ratio.reduce(function(a,b){return a+b},0),c=this.props.ratio.map(function(b,c){return this.props.ratio.slice(0,c).reduce(function(a,b){return a+b},0)/a}.bind(this)),d=this.props.palette.components.map(function(d,e){return b("React").createElement(j,{color:d.toRGB(),key:e,offset:c[e],size:this.props.ratio[e]/a})}.bind(this));return b("React").createElement("div",{className:"_3p7b",onClick:this.props.onClick,onMouseEnter:this.$1,onMouseLeave:this.$2,role:"presentation",style:{height:this.props.size,width:this.props.size}},d)};a.defaultProps={ratio:[4,3,2,1],size:50};e.exports=a}),null);
__d("MediaEffectFrameEditorTemplatePaletteSelector.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;c=babelHelpers.inherits(j,b("React").PureComponent);h=c&&c.prototype;function j(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){this.props.onPaletteSelect(a?this.props.palette:null)}.bind(this),b}j.prototype.render=function(){return b("React").createElement("div",{className:"_4xob"},b("React").createElement(b("MediaEffectColorPaletteWheel.react"),{onHover:this.$1,palette:this.props.palette}))};i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_4xob"},this.props.colorPalettes.map(function(a,c){return b("React").createElement(j,{key:c,onPaletteSelect:this.props.onPaletteSelect,palette:a})}.bind(this)))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFrameEditorTemplatePaletteSelectorContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorTemplatePaletteSelector.react","MediaEffectTemplateDataStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectTemplateDataStore")]};a.calculateState=function(a,c,d){return{colorPalettes:b("MediaEffectTemplateDataStore").getState().systemColorPalettes}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectFrameEditorTemplatePaletteSelector.react"),a)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectFrameEditorTemplatePanel.react",["cx","fbt","MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react","MediaEffectFrameEditorMultiCategoryTemplateSelector.react","MediaEffectFrameEditorTemplateGrid.react","MediaEffectFrameEditorTemplateVariationPicker.react","React","XUIText.react","immutable","mediaEffectGKCheck"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("immutable").List;function k(a){var c=a.templates;return!c||c.size<2||!b("mediaEffectGKCheck")("media_effect_frame_editor_template_variations")?null:b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_2dih",display:"block"},h._("B\u1ea3ng m\u00e0u")),b("React").createElement(b("MediaEffectFrameEditorTemplateVariationPicker.react"),{activeTemplate:a.activeTemplate,templates:c}))}i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.$1=function(a,c){__p&&__p();if(a===1||c<=5){c=this.props.categories.reduce(function(a,b){return a.concat(b)},j());return b("React").createElement(b("MediaEffectFrameEditorTemplateGrid.react"),{activeTemplate:this.props.activeTemplate,templates:c})}if(a===2&&this.props.categories.has("Birthdays")&&this.props.categories.get("Birthdays").size>0&&this.props.categories.has("Celebrations")&&this.props.categories.get("Celebrations").size>0){c=this.props.categories.get("Birthdays");a=this.props.categories.get("Celebrations");return b("React").createElement(b("MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react"),{activeTemplate:this.props.activeTemplate,birthdayTemplates:c,celebrationTemplates:a})}return b("React").createElement(b("MediaEffectFrameEditorMultiCategoryTemplateSelector.react"),{activeTemplate:this.props.activeTemplate,categories:this.props.categories})};a.prototype.render=function(){var a=this.props,c=a.activeTemplate;a=a.categories;var d=a.count();a=a.reduce(function(a,b){return a+b.size},0);return d===0||a===0?null:b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_2dih",display:"block"},h._("M\u1eabu")),this.$1(d,a),b("React").createElement("div",{className:"_3-8x"},b("React").createElement(k,{activeTemplate:c,templates:this.props.variations})))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectFrameEditorTemplatePanelContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorTemplatePanel.react","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore")]};a.calculateState=function(a,c){a=b("MediaEffectReactFrameEditorDataStore").getState();var d=b("MediaEffectReactFrameEditorCanvasDataStore").getState();return{activeTemplate:d.getTemplate(a.templateFBID),categories:d.templateCategories.map(function(a){return h(a.map(function(a){return d.templates.get(a)}))}),templates:d.templates,variations:d.getTemplateVariants(a.templateFBID)}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectFrameEditorTemplatePanel.react"),a)};function a(){g.apply(this,arguments)}a.defaultProps={};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MediaEffectFrameEditorTemplateVariationPicker.react",["cx","Grid.react","MediaEffectMetadataActionCreators","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("Grid.react").GridItem;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){return function(){return b("MediaEffectMetadataActionCreators").applyTemplate(a)}},c}a.prototype.render=function(){return b("React").createElement(b("Grid.react"),{cols:5},this.props.templates.map(function(a){return b("React").createElement(i,{key:a.templateFBID},b("React").createElement("a",{className:"_18pf _2w6x"+(a===this.props.activeTemplate?" _2w6_":"")+" _zjf",href:"#",onClick:this.$1(a),style:{backgroundColor:a.getColor()}}))}.bind(this)))};e.exports=a}),null);
__d("MediaEffectFrameEditorTemplatePaletteComponentEditor.react",["cx","Event","FBSimpleSlider.react","React","SubscriptionsHandler","chroma","color-picker"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,b("React").PureComponent);h&&h.prototype;j.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement("span",null,this.props.label),b("React").createElement(b("FBSimpleSlider.react"),{max:1,min:0,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,value:this.props.value}))};function j(){h.apply(this,arguments)}c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$4=function(a){var c=this.props.component;if(!c)return;a=b("chroma").hex(a).hsl();isNaN(a[0])&&(a[0]=c.hue);this.props.onComponentChange(c.set("hue",a[0]/360).set("saturation",a[1]).set("lightness",a[2]))}.bind(this),this.$5=function(a){var b=this.props.component;if(!b)return;this.props.onComponentChange(b.set("hueVariation",a/2))}.bind(this),this.$6=function(a){var b=this.props.component;if(!b)return;this.props.onComponentChange(b.set("saturationVariation",a))}.bind(this),this.$7=function(a){var b=this.props.component;if(!b)return;this.props.onComponentChange(b.set("lightnessVariation",a))}.bind(this),this.$8=function(){this.props.onHighlightComponent&&this.props.onHighlightComponent(this.props.componentIndex),this.$2=!0}.bind(this),this.$3=function(){this.$2&&(this.props.onHighlightComponent&&this.props.onHighlightComponent(null),this.$2=!1)}.bind(this),this.$1=new(b("SubscriptionsHandler"))()}a.prototype.UNSAFE_componentWillMount=function(){this.$1.addSubscriptions(b("Event").listen(document.body,"mouseup",this.$3))};a.prototype.componentWillUnmount=function(){this.$1.release()};a.prototype.render=function(){var a=this.props.component;return b("React").createElement("div",{className:"_1m8o"},a?b("React").createElement("div",null,b("React").createElement("div",{className:"_5-nq",onMouseDown:this.$8},b("React").createElement(b("color-picker"),{color:a.toRGB(),onChange:this.$4})),this.props.showVariation?b("React").createElement("div",null,b("React").createElement(j,{label:"Hue Variation",onChange:this.$5,onMouseDown:this.$8,onMouseUp:this.$3,value:a.hueVariation*2}),b("React").createElement(j,{label:"Saturation Variation",onChange:this.$6,onMouseDown:this.$8,onMouseUp:this.$3,value:a.saturationVariation}),b("React").createElement(j,{label:"Lightness Variation",onChange:this.$7,onMouseDown:this.$8,onMouseUp:this.$3,value:a.lightnessVariation})):null):null)};a.defaultProps={showVariation:!0,onHighlightComponent:null};e.exports=a}),null);
__d("MediaEffectFrameEditorTemplatePaletteComponentSelector.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=4;c=babelHelpers.inherits(k,b("React").PureComponent);h=c&&c.prototype;function k(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onButtonClick(this.props.index)}.bind(this),this.$2=function(){this.props.onHighlightComponent&&this.props.onHighlightComponent(this.props.index)}.bind(this),this.$3=function(){this.props.onHighlightComponent&&this.props.onHighlightComponent(null)}.bind(this),b}k.prototype.render=function(){return b("React").createElement("a",{className:"_wru _2w6x"+(this.props.selected?" _2w6_":"")+" _3-fi",href:"#",onClick:this.$1,onMouseEnter:this.$2,onMouseLeave:this.$3,style:{backgroundColor:this.props.color}},this.props.index)};i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_2__5"},this.props.colorPalette.components.map(function(a,c){return b("React").createElement(k,{color:a.toRGB(),index:c+1,key:c+1,onButtonClick:this.props.onButtonClick,onHighlightComponent:this.props.onHighlightComponent,selected:this.props.selectedComponentIndex===c+1})}.bind(this)),this.props.onAddComponent&&this.props.colorPalette.components.size<j?b("React").createElement("a",{className:"_wru",href:"#",onClick:this.props.onAddComponent},"+"):null)};function a(){i.apply(this,arguments)}a.defaultProps={onAddComponent:null,onHighlightComponent:null};e.exports=a}),null);
__d("MediaEffectTemplateColorStep.react",["cx","MediaEffectColorPaletteComponentRecord","MediaEffectFrameEditorPixelCanvasContainer.react","MediaEffectFrameEditorTemplatePaletteComponentEditor.react","MediaEffectFrameEditorTemplatePaletteComponentSelector.react","MediaEffectFrameEditorTemplatePaletteSelectorContainer.react","MediaEffectMetadataActionCreators","React","colr-convert"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.$1=[],this.$2=function(a){if(a[3]===0)return;this.$1.push(a);this.state.selectedComponentIndex&&b("MediaEffectMetadataActionCreators").setTemplateSourceColorPalette(this.props.colorPalette.set("components",this.props.colorPalette.components.set(this.state.selectedComponentIndex-1,this.$3())))}.bind(this),this.$4=function(){this.$1=[]}.bind(this),this.$5=function(a){this.setState({selectedComponentIndex:a})}.bind(this),this.$6=function(){var a=this.props.colorPalette.set("components",this.props.colorPalette.components.push(new(b("MediaEffectColorPaletteComponentRecord"))()));b("MediaEffectMetadataActionCreators").setTemplateSourceColorPalette(a);this.setState({selectedComponentIndex:a.components.size})}.bind(this),this.$7=function(a){var c=this.state.selectedComponentIndex;if(!c)return;c=this.props.colorPalette.set("components",this.props.colorPalette.components.set(c-1,a));b("MediaEffectMetadataActionCreators").setTemplateSourceColorPalette(c)}.bind(this),this.$8=function(a){this.setState({transformPalette:a})}.bind(this),this.$9=function(a){this.setState({highlightComponent:a})}.bind(this),this.state={selectedComponentIndex:this.props.colorPalette.components.size>0?1:null,transformPalette:null,highlightComponent:null}}a.prototype.$3=function(){__p&&__p();var a=this.$1.map(b("colr-convert").rgb.hsl),c=a.map(function(a){return a[0]/360}).sort(),d=a.map(function(a){return a[1]/100});a=a.map(function(a){return a[2]/100});var e=d.reduce(function(a,b){return Math.max(a,b)});d=d.reduce(function(a,b){return Math.min(a,b)});var f=a.reduce(function(a,b){return Math.max(a,b)});a=a.reduce(function(a,b){return Math.min(a,b)});var g=c.map(function(a,b){return b===c.length-1?c[0]-a+1:c[b+1]-a}),h=g.indexOf(Math.max.apply(Math,g));g=1-g[h];h=c[h]-g/2;h<0&&(h+=1);return new(b("MediaEffectColorPaletteComponentRecord"))({hue:h,saturation:(e+d)/2,lightness:(f+a)/2,hueVariation:Math.min(g*1.1+.05,.5),saturationVariation:Math.min((e-d)/2*1.1+.1,1),lightnessVariation:Math.min((f-a)/2*1.1+.1,1)})};a.prototype.render=function(){return b("React").createElement("div",{className:"_2yb8"},b("React").createElement("div",{className:"_2yb9"},b("React").createElement("div",{className:"_2yba"},b("React").createElement(b("MediaEffectFrameEditorPixelCanvasContainer.react"),{highlightComponent:this.state.highlightComponent,onAddSample:this.$2,onSamplingStart:this.$4,sourcePalette:this.props.colorPalette,transformPalette:this.state.transformPalette})),b("React").createElement(b("MediaEffectFrameEditorTemplatePaletteComponentSelector.react"),{colorPalette:this.props.colorPalette,onAddComponent:this.$6,onButtonClick:this.$5,onHighlightComponent:this.$9,selectedComponentIndex:this.state.selectedComponentIndex}),b("React").createElement(b("MediaEffectFrameEditorTemplatePaletteComponentEditor.react"),{component:this.state.selectedComponentIndex?this.props.colorPalette.components.get(this.state.selectedComponentIndex-1):null,componentIndex:this.state.selectedComponentIndex,onComponentChange:this.$7,onHighlightComponent:this.$9})),b("React").createElement(b("MediaEffectFrameEditorTemplatePaletteSelectorContainer.react"),{onPaletteSelect:this.$8}))};e.exports=a}),null);
__d("MediaEffectTemplateColorStepContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectTemplateColorStep.react","MediaEffectTemplateDataStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectTemplateDataStore")]};a.calculateState=function(a,c){a=b("MediaEffectTemplateDataStore").getState();return{colorPalette:a.sourceColorPalette}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){return b("React").createElement(b("MediaEffectTemplateColorStep.react"),this.state)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("MediaEffectTemplateDataStore",["FluxReduceStore","MediaEffectColorPaletteRecord","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameDeserializer","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectTemplateVariationRecord","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c=b("immutable").List;d=b("immutable").Map;f=b("immutable").Record;var i=1,j=3;function k(){return i++}g=babelHelpers.inherits(l,f({systemColorPalettes:c(),userColorPalettes:c(),sourceColorPalette:new(b("MediaEffectColorPaletteRecord"))({components:c()}),templateVariations:d(),currentTemplateVariationID:null,sourceFrameData:b("MediaEffectReactFrameEditorDataStore").getInitialState()}));g&&g.prototype;l.prototype.withSystemColorPalettes=function(a){var c=this.systemColorPalettes.withMutations(function(c){a.forEach(function(a){a=b("MediaEffectReactFrameDeserializer").deserializeColorPalette(a);c.contains(a)||c.push(a)})});while(c.size<j)c=c.push(b("MediaEffectColorPaletteRecord").random());return this.set("systemColorPalettes",c)};l.prototype.withVariationMutation=function(a,b){var c=this.templateVariations,d=c.get(a);return!d?this:this.set("templateVariations",c.set(a,d.withMutations(b)))};l.prototype.reset=function(){return new l().set("systemColorPalettes",this.systemColorPalettes)};function l(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new l()};a.prototype.reduce=function(a,c){__p&&__p();if(!b("MediaEffectFrameCreateDialogDataStore").isTemplateFlow())return a;switch(c.type){case"add/systemColorPalettes":a=a.withSystemColorPalettes(c.paletteData);break;case"set/userColorPalette":a=a.set("userColorPalettes",a.userColorPalettes.set(c.index-1,c.palette));break;case"set/currentTemplateVariation":a=a.set("currentTemplateVariationID",c.localTemplateID);break;case"change/step":a=a.set("currentTemplateVariationID",null);break;case"set/templateSourceColorPalette":a=a.set("sourceColorPalette",c.palette);break;case"new/templateVariation":var d=k(),e=c.templateVariation.set("localTemplateID",d);a=a.set("templateVariations",a.templateVariations.set(d,e));a=a.set("currentTemplateVariationID",d);e.frameData.assets.forEach(function(a){a instanceof b("MediaEffectReactFrameEditorImageAssetRecord")&&a.uploadForVariation(d)});break;case"init/frameData":a=this.$MediaEffectTemplateDataStore1(a.reset());e=c.data;e&&(a=a.set("sourceColorPalette",b("MediaEffectReactFrameDeserializer").deserializeColorPalette(e.color_palette)),e.variations.forEach(function(d){var c=k();a=a.set("templateVariations",a.templateVariations.set(c,new(b("MediaEffectTemplateVariationRecord"))({localTemplateID:c,colorPalette:b("MediaEffectReactFrameDeserializer").deserializeColorPalette(d.color_palette),templateVariationFBID:d.fbid,frameData:b("MediaEffectReactFrameDeserializer").deserializeData(d)})))}));break;case"add/image":case"replace/image":case"add/text":case"duplicate/asset":case"update/assetPosition":case"update/assetSize":case"update/assetNativeSize":case"update/asset/raise":case"update/asset/lower":case"delete/asset":case"update/textContent":case"update/textFonts":case"update/textColors":case"update/textAlignments":a=this.$MediaEffectTemplateDataStore1(a);break;case"update/stickerFBID":var f=c.localAssetID,g=c.stickerFBID;!c.localTemplateID?a.set("sourceFrameData",a.sourceFrameData.withAssetMutation(f,function(a){return a.set("stickerFBID",g)})):a=a.withVariationMutation(c.localTemplateID,function(a){return a.set("frameData",a.frameData.withAssetMutation(f,function(a){return a.set("stickerFBID",g)}))});break}return a};a.prototype.$MediaEffectTemplateDataStore1=function(a){b("MediaEffectFrameEditorDispatcher").waitFor([b("MediaEffectReactFrameEditorDataStore").getDispatchToken()]);!a.currentTemplateVariationID?a=a.set("sourceFrameData",b("MediaEffectReactFrameEditorDataStore").getState()):a=a.withVariationMutation(a.currentTemplateVariationID,function(a){return a.set("frameData",b("MediaEffectReactFrameEditorDataStore").getState())});return a};a.prototype.getFrameData=function(a){var b=this.getState();if(!a)return b.sourceFrameData;else return b.templateVariations.get(a).frameData};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectTemplatePalettePicker.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;c=babelHelpers.inherits(j,b("React").PureComponent);h=c&&c.prototype;function j(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){this.props.previewPalette(a?this.props.palette:null)}.bind(this),this.$2=function(){this.props.selectPalette(this.props.palette,this.props.userIndex)}.bind(this),b}j.prototype.render=function(){return b("React").createElement("div",{className:"_4xob"},b("React").createElement(b("MediaEffectColorPaletteWheel.react"),{onClick:this.$2,onHover:this.$1,palette:this.props.palette}))};i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_w63"},b("React").createElement(j,{palette:this.props.sourcePalette,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:null}),this.props.systemPalettes.map(function(a,c){return b("React").createElement(j,{key:c,palette:a,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:null})}.bind(this)),this.props.userPalettes.map(function(a,c){return b("React").createElement(j,{key:c,palette:a,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:c+1})}.bind(this)))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectTemplateNewColorStep.react",["cx","MediaEffectFrameEditorPixelCanvasContainer.react","MediaEffectFrameEditorTemplatePaletteComponentEditor.react","MediaEffectFrameEditorTemplatePaletteComponentSelector.react","MediaEffectMetadataActionCreators","MediaEffectTemplatePalettePicker.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.$1=function(a){this.setState({selectedComponentIndex:a})}.bind(this),this.$2=function(a){var c=this.state.selectedComponentIndex;if(!c)return;c=this.state.selectedPalette.set("components",this.state.selectedPalette.components.set(c-1,a));a=this.state.selectedUserPaletteIndex;a=a?a:this.props.userPalettes.size+1;b("MediaEffectMetadataActionCreators").setUserColorPalette(c,a);this.setState({selectedUserPaletteIndex:a,selectedPalette:c})}.bind(this),this.$3=function(a,b){this.setState({selectedPalette:a,selectedUserPaletteIndex:b,selectedComponentIndex:1})}.bind(this),this.$4=function(a){this.setState({previewPalette:a})}.bind(this),this.state={selectedComponentIndex:this.props.sourcePalette.components.size>0?1:null,previewPalette:null,selectedUserPaletteIndex:null,selectedPalette:a.sourcePalette}}a.prototype.render=function(){return b("React").createElement("div",{className:"_2yb9"},b("React").createElement(b("MediaEffectTemplatePalettePicker.react"),{previewPalette:this.$4,selectPalette:this.$3,sourcePalette:this.props.sourcePalette,systemPalettes:this.props.systemPalettes,userPalettes:this.props.userPalettes}),b("React").createElement(b("MediaEffectFrameEditorTemplatePaletteComponentSelector.react"),{colorPalette:this.state.selectedPalette,onButtonClick:this.$1,selectedComponentIndex:this.state.selectedComponentIndex}),b("React").createElement(b("MediaEffectFrameEditorTemplatePaletteComponentEditor.react"),{component:this.state.selectedComponentIndex&&this.state.selectedPalette?this.state.selectedPalette.components.get(this.state.selectedComponentIndex-1):null,componentIndex:this.state.selectedComponentIndex,onComponentChange:this.$2,showVariation:!1}),b("React").createElement("div",{className:"_2yba"},b("React").createElement(b("MediaEffectFrameEditorPixelCanvasContainer.react"),{sourcePalette:this.props.sourcePalette,transformPalette:this.state.previewPalette?this.state.previewPalette:this.state.selectedPalette})))};e.exports=a}),null);
__d("MediaEffectTemplateNewColorStepContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectTemplateDataStore","MediaEffectTemplateNewColorStep.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectTemplateDataStore")]};a.calculateState=function(a,c){a=b("MediaEffectTemplateDataStore").getState();return{sourcePalette:a.sourceColorPalette,systemPalettes:a.systemColorPalettes,userPalettes:a.userColorPalettes}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){return b("React").createElement(b("MediaEffectTemplateNewColorStep.react"),this.state)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("MediaEffectTemplateVariationCanvas.react",["cx","MediaEffectReactFrameEditorCanvasContainer.react","React","ResponsiveBlock.react","Vector","mediaEffectGKCheck"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$2=function(a,c){this.setState({size:new(b("Vector"))(a,c)})}.bind(this),this.state={size:null}}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.setState=function(a){this.$1&&h.setState.call(this,a)};a.prototype.$3=function(){var a=this.state.size;return!a?null:b("React").createElement("div",{className:"_3g0k"},b("React").createElement(b("MediaEffectReactFrameEditorCanvasContainer.react"),{enableEditorFreeText:b("mediaEffectGKCheck")("media_effect_template")||b("mediaEffectGKCheck")("media_effect_frame_editor_free_text"),enableFontSettingsDialog:b("mediaEffectGKCheck")("media_effect_font_settings_dialog"),height:a.y,width:a.x}))};a.prototype.render=function(){return b("React").createElement("div",{className:"_2yba"},b("React").createElement(b("ResponsiveBlock.react"),{className:"_3g0j",onResize:this.$2},this.$3()))};e.exports=a}),null);
__d("MediaEffectTemplateVariationRecord",["regeneratorRuntime","Promise","MediaEffectColorPaletteRecord","MediaEffectReactFrameEditorDataStore","MediaEffectTemplateDataStore","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").Map;a=b("immutable").Record;g=babelHelpers.inherits(i,a({localTemplateID:null,colorPalette:b("MediaEffectColorPaletteRecord"),templateVariationFBID:null,frameData:b("MediaEffectReactFrameEditorDataStore").getInitialState()}));g&&g.prototype;i.fromSourceTemplate=function(a){__p&&__p();var c,d,e,f,g,j,k;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:c=b("MediaEffectTemplateDataStore").getState();d=c.sourceColorPalette;e=c.sourceFrameData;f=e.assets.valueSeq().toArray().map(function(b){return b.reColored(d,a)});l.next=6;return b("regeneratorRuntime").awrap(b("Promise").all(f));case 6:g=l.sent;j=h(g.map(function(a){return[a.localAssetID,a]}));k=e.withMutations(function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a.set("frameFBID",null),a.set("templateFBID",null),a.set("assets",j);case 3:case"end":return b.stop()}},null,this)});return l.abrupt("return",new i({colorPalette:a,frameData:k}));case 10:case"end":return l.stop()}},null,this)};function i(){g.apply(this,arguments)}e.exports=i}),null);
__d("MediaEffectTemplateVariationAvailablePalettePicker.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;c=babelHelpers.inherits(j,b("React").PureComponent);h=c&&c.prototype;function j(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){this.props.previewPalette(a?this.props.palette:null)}.bind(this),this.$2=function(){this.props.createVariation(this.props.palette)}.bind(this),b}j.prototype.render=function(){return b("React").createElement("div",{className:"_4xob"},b("React").createElement(b("MediaEffectColorPaletteWheel.react"),{onClick:this.$2,onHover:this.$1,palette:this.props.palette}))};i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_w63"},this.props.colorPalettes.map(function(a,c){return b("React").createElement(j,{createVariation:this.props.createVariation,key:c,palette:a,previewPalette:this.props.previewPalette})}.bind(this)))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectTemplateVariationSelector.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;c=babelHelpers.inherits(j,b("React").PureComponent);h=c&&c.prototype;function j(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){if(!this.props.onVariationSelect)return;this.props.onVariationSelect(this.props.localTemplateID)}.bind(this),b}j.prototype.render=function(){return b("React").createElement("div",{className:"_4xob"},b("React").createElement(b("MediaEffectColorPaletteWheel.react"),{onClick:this.$1,palette:this.props.palette}))};d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){if(!this.props.onVariationSelect)return;this.props.onVariationSelect(null)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{className:"_w64"},b("React").createElement("div",{className:"_4xob"},b("React").createElement(b("MediaEffectColorPaletteWheel.react"),{onClick:this.$1,palette:this.props.sourceColorPalette})),this.props.templateVariations.valueSeq().map(function(a){return b("React").createElement(j,{key:a.localTemplateID,localTemplateID:a.localTemplateID,onVariationSelect:this.props.onVariationSelect,palette:a.colorPalette,selected:this.props.currentTemplateVariationID===a.localTemplateID})}.bind(this)))};e.exports=a}),null);
__d("MediaEffectTemplateVariationStep.react",["cx","MediaEffectFrameEditorConstants","MediaEffectFrameEditorPixelCanvasContainer.react","MediaEffectMetadataActionCreators","MediaEffectTemplateVariationAvailablePalettePicker.react","MediaEffectTemplateVariationCanvas.react","MediaEffectTemplateVariationSelector.react","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE,j=b("immutable").OrderedSet;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$1=function(a){b("MediaEffectMetadataActionCreators").setCurrentTemplateVariation(a),this.$2(null)}.bind(this),this.$3=function(a){b("MediaEffectMetadataActionCreators").createNewTemplateVariation(a),this.$2(null)}.bind(this),this.$2=function(a){this.setState({previewPalette:a})}.bind(this),this.state={previewPalette:null}}a.prototype.render=function(){var a=j(this.props.templateVariations.valueSeq().map(function(a){return a.colorPalette}));a=j(this.props.systemPalettes).union(this.props.userPalettes).subtract(a).toList();return b("React").createElement("div",{className:"_w62"},b("React").createElement(b("MediaEffectTemplateVariationAvailablePalettePicker.react"),{colorPalettes:a,createVariation:this.$3,previewPalette:this.$2}),b("React").createElement(b("MediaEffectTemplateVariationSelector.react"),{currentTemplateVariationID:this.props.currentTemplateVariationID,onVariationSelect:this.$1,sourceColorPalette:this.props.sourceColorPalette,templateVariations:this.props.templateVariations}),this.state.previewPalette?b("React").createElement("div",{className:"_2yba"},b("React").createElement("div",{style:{position:"absolute",top:i,bottom:i,left:i,right:i}},b("React").createElement(b("MediaEffectFrameEditorPixelCanvasContainer.react"),{sourcePalette:this.props.sourceColorPalette,transformPalette:this.state.previewPalette?this.state.previewPalette:this.props.sourceColorPalette}))):b("React").createElement(b("MediaEffectTemplateVariationCanvas.react"),null))};e.exports=a}),null);
__d("MediaEffectTemplateVariationStepContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectTemplateDataStore","MediaEffectTemplateVariationStep.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MediaEffectTemplateDataStore")]};a.calculateState=function(a,c){a=b("MediaEffectTemplateDataStore").getState();return{systemPalettes:a.systemColorPalettes,userPalettes:a.userColorPalettes,sourceColorPalette:a.sourceColorPalette,templateVariations:a.templateVariations,currentTemplateVariationID:a.currentTemplateVariationID}};a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.state);return b("React").createElement(b("MediaEffectTemplateVariationStep.react"),a)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("EventPermalinkCameraFramesCreateWithDefaultFrame.react",["cx","fbt","ix","AsyncDialog","AsyncRequest","Button.react","DialogX","EventPermalinkCameraFramesLogging","EventsActionsLogger","FBToggleSwitch.react","FXEntMediaEffectStatus","Image.react","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubViewTab","MediaEffectMetadataActionCreators","MediaEffectOwnerHubHeader.react","React","XMediaEffectCreateDialogController","XUICard.react","XUICardSection.react","XUIText.react","BackgroundImage.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=100,l=158;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("EventPermalinkCameraFramesLogging").logClick(b("EventsActionsLogger").Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var a=b("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",b("MediaEffectFlowType").EVENT).setFBID("source_id",this.props.eventID).setEnum("step",b("MediaEffectCreateStep").CREATE).setEnum("ref",b("MediaEffectCreationReferrer").EVENT_PAGE).getURI(),c=this.props.effect.effectData.id;b("AsyncDialog").send(new(b("AsyncRequest"))(a),function(a){a.subscribe(["hide","success"],function(a,event){this.props.effectUpdateHandler(c)}.bind(this))}.bind(this))}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectMetadataActionCreators").initFrameData(this.props.effect.effectEditorData)};a.prototype.isToggleEnabled=function(){var a=this.props.effect.effectData.status;return a===b("FXEntMediaEffectStatus").INACTIVE||a===b("FXEntMediaEffectStatus").ACTIVE};a.prototype.render=function(){var a=this.props.effect.effectData,c=a.status;return b("React").createElement(b("XUICard.react"),{className:"_634s"},b("React").createElement(b("MediaEffectOwnerHubHeader.react"),{title:this.props.title,hubLinkTab:b("MediaEffectHubViewTab").HOME}),b("React").createElement(b("XUICardSection.react"),null,b("React").createElement("div",{className:"_46ca"},a.hasEnabledActivations?b("React").createElement(b("Image.react"),{src:i("353079")}):b("React").createElement(b("Image.react"),{src:i("353078")}),b("React").createElement("div",{className:"_46cb"},this.isToggleEnabled()?b("React").createElement(b("FBToggleSwitch.react"),{checked:c===b("FXEntMediaEffectStatus").ACTIVE,animate:!0,onToggle:function(){return this.props.toggleEventHandler(a.id,c===b("FXEntMediaEffectStatus").INACTIVE)}.bind(this),tooltip:c===b("FXEntMediaEffectStatus").ACTIVE?h._("Khung m\u00e1y \u1ea3nh c\u1ee7a b\u1ea1n \u0111ang b\u1eadt"):h._("Khung m\u00e1y \u1ea3nh \u0111ang t\u1eaft")}):null),b("React").createElement("div",{className:"_46cd"},b("React").createElement(b("BackgroundImage.react"),{backgroundSize:"contain",height:l,src:a.thumbnailPortrait,width:k})),b("React").createElement("div",{className:"_46cf"},b("React").createElement(b("XUIText.react"),{size:"header4",weight:"bold",className:"_46cg"},h._("Gi\u00fap m\u1ecdi ng\u01b0\u1eddi chia s\u1ebb t\u1ea1i s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n")),b("React").createElement("p",{className:"_46ch"},h._("B\u1ea1n c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng khung m\u00e1y \u1ea3nh m\u1eb7c \u0111\u1ecbnh ho\u1eb7c t\u1ea1o khung t\u00f9y ch\u1ec9nh \u0111\u1ec3 kh\u00e1ch m\u1eddi s\u1eed d\u1ee5ng trong \u1ea3nh v\u00e0 video h\u1ecd chia s\u1ebb.")),b("React").createElement("div",{className:"_46ci"},b("React").createElement(b("Button.react"),{onClick:this.$1,use:"default",label:h._("T\u1ea3i l\u00ean khung m\u1edbi")}))))))};e.exports=a}),null);
__d("MediaEffectsPlatformPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MediaEffectsPlatformPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MediaEffectsPlatformPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MediaEffectsPlatformPerformanceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEffectID=function(a){this.$1.effect_id=a;return this};a.prototype.setEffectType=function(a){this.$1.effect_type=a;return this};a.prototype.setExecTimeMs=function(a){this.$1.exec_time_ms=a;return this};a.prototype.setGkOff=function(a){this.$1.gk_off=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setGkOn=function(a){this.$1.gk_on=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setIdentifier=function(a){this.$1.identifier=a;return this};a.prototype.setMemoryUsage=function(a){this.$1.memory_usage=a;return this};a.prototype.setOwnerType=function(a){this.$1.owner_type=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={effect_id:!0,effect_type:!0,exec_time_ms:!0,gk_off:!0,gk_on:!0,identifier:!0,memory_usage:!0,owner_type:!0,vc:!0};e.exports=a}),null);
__d("MediaEffectHubFunnelLogger",["FunnelLogger","URI","UserAgentData","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="CREATIVE_STUDIO_HUB_FUNNEL",h=b("keyMirror")({HUB_VIEW_CHANGE:"",HUB_FILTER_APPLY:"",HUB_ACTOR_CHANGE:"",HUB_GRID_VIEW_SWITCH:"",HUB_EFFECT_SELECT:"",HUB_EFFECT_OPEN:"",HUB_EFFECT_PAGER_CHANGE:"",HUB_EFFECT_ACTIVE_STATUS_CHANGE:"",HUB_EFFECT_ARCHIVE:"",HUB_EFFECT_DUPLICATE:"",HUB_EFFECT_CHANGE_PROFILE_PICTURE:"",HUB_NEW_FRAME:"",HUB_NEW_MASK:""}),i=b("keyMirror")({BROWSER_NAME:"",DOMAIN:"",PATH:""}),j=!1;a={startFunnel:function(){if(j)return;b("FunnelLogger").startFunnel(g);j=!0;b("FunnelLogger").addFunnelTag(g,i.BROWSER_NAME,b("UserAgentData").browserName);b("FunnelLogger").addFunnelTag(g,i.DOMAIN,b("URI").getRequestURI().getDomain());b("FunnelLogger").addFunnelTag(g,i.PATH,b("URI").getRequestURI().getPath())},logActionWithTag:function(a,c){if(!j)return;b("FunnelLogger").appendActionWithTag(g,h[a],c||"")}};e.exports=a}),null);
__d("FXMediaEffectProduct",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AML_CAMERA:"aml_camera",BIRTHDAY_CAMERA:"birthday_camera",BONFIRE:"bonfire",FACEBOOK:"facebook",FLASH:"flash",FLASH_ALDRIN:"flash_aldrin",INSTAGRAM:"instagram",MESSENGER:"messenger",MSQRD:"msqrd",TALK:"talk",ALOHA:"aloha",AVATAR:"avatar",MOBILE_ID_CAPTURE:"mobile_id_capture"})}),null);
__d("MediaEffectDialogsDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("MediaEffectContentOwnerStore",["FluxReduceStore","FXMediaEffectProduct","MediaEffectDialogsDispatcher","MediaEffectProfilePolicy","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c=b("immutable").Record;g=babelHelpers.inherits(i,c({selectedOwner:{value:null},owners:[],isConfirmFirstParty:{value:!1},showAnalytics:!1}));g&&g.prototype;function i(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new i()};a.prototype.reduce=function(a,b){__p&&__p();switch(b.type){case"MediaEffectContentOwner/init":a=this.getState().set("owners",b.payload.owners);var c=b.payload.owners[0];c&&(a=a.set("showAnalytics",c.showAnalytics));break;case"MediaEffectContentOwner/selectedOwner/update":a=this.getState().set("selectedOwner",Object.assign({},a.get("selectedOwner"),{error:null},b.payload)).set("isConfirmFirstParty",{value:null});break;case"MediaEffectContentOwner/isConfirmFirstParty/update":a=this.getState();a=a.set("isConfirmFirstParty",Object.assign({},a.get("isConfirmFirstParty"),{error:null},b.payload));break;case"MediaEffectARStudioDetailDialog/open":case"ARStudioFileUploadDialog/open":case"MediaEffectARStudioPagesStore/startPageFlow":a=this.getInitialState();break}return a};a.prototype.getSelectedOwner=function(){var a=this.getState(),b=a.get("owners"),c=a.get("selectedOwner").value;return b&&c?b.filter(function(a){return a.id===c})[0]:null};a.prototype.populateSelectedOwner=function(){return Object.assign({},this.getState().get("selectedOwner"),{value:this.getSelectedOwner()})};a.prototype.hasSelectedOwnerTrailingReview=function(){var a=this.getSelectedOwner();return a?a.policies.includes(b("MediaEffectProfilePolicy").USE_TRAILING_REVIEW):!1};a.prototype.isSelectedOwnerInstagram=function(){var a=this.getSelectedOwner();return a?a.product===b("FXMediaEffectProduct").INSTAGRAM:!1};a.prototype.isSelectedOwnerFirstParty=function(){var a=this.getSelectedOwner();return a?a.isFirstParty:!1};a.prototype.isSelectedOwnerThirdParty=function(){return!this.isSelectedOwnerFirstParty()};a.prototype.isSelectedOwnerPage=function(){var a=this.getSelectedOwner();return a?a.type==="page":!1};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectDialogsDispatcher"))}),null);
__d("mediaEffectOwnerCanPublishToInstagram",["MediaEffectContentOwnerStore","gkx"],(function(a,b,c,d,e,f){"use strict";a=function(){if(!b("gkx")("AT6C3JeMv0iYZDV0XtLxD1k84UZqFnaqhbY2-300YjtqAQ4PdQ2rKlPLXY3Qb8yGi433r5OMammWHPPzcEOAO7s--DW2VIk5cnfEmJ8eBl9kaw"))return!1;if(!b("MediaEffectContentOwnerStore").getSelectedOwner())return!1;return b("MediaEffectContentOwnerStore").isSelectedOwnerFirstParty()?!1:!0};e.exports=a}),null);
__d("MediaEffectPerformanceLogger",["invariant","MediaEffectsPlatformPerformanceTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a.prototype.setIdentifier=function(a){this.identifier=a;return this};a.prototype.setEffectType=function(a){this.effectType=a;return this};a.prototype.setOwnerType=function(a){this.ownerType=a;return this};a.prototype.setEffectID=function(a){this.effectID=a;return this};a.prototype.setGKOn=function(a){this.gkOn=a;return this};a.prototype.setGKOff=function(a){this.gkOff=a;return this};a.prototype.startRecording=function(){this.startTime&&g(0,undefined);this.startTime=window.performance.now();this.startMemory=window.performance.memory?window.performance.memory.usedJSHeapSize:0;return this};a.prototype.endRecordingAndLog=function(){this.endTime&&g(0,undefined);this.endTime=window.performance.now();this.endMemory=window.performance.memory?window.performance.memory.usedJSHeapSize:0;this.$1();return this};a.prototype.$1=function(){this.startTime>0||g(0,undefined);this.endTime>0||g(0,undefined);var a=this.startMemory>this.endMemory?0:this.endMemory-this.startMemory;new(b("MediaEffectsPlatformPerformanceTypedLogger"))().setIdentifier(this.identifier).setExecTimeMs(Math.round(this.endTime-this.startTime)).setMemoryUsage(a).setEffectType(this.effectType).setOwnerType(this.ownerType).setEffectID(this.effectID).setGkOn(this.gkOn).setGkOff(this.gkOff).log();this.$2()};a.prototype.$2=function(){this.startTime=0,this.endTime=0,this.startMemory=0,this.endMemory=0};function a(){}e.exports=a}),null);
__d("MediaEffectARStudioFileUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={projectFileIcon:"/images/media_effect/icon/arprojpkg-icon.png",getProjectFileIcon:function(a){return a&&!a.iconSrc&&a.name?this.projectFileIcon:null},getArfxFileIcon:function(a){return a&&!a.iconSrc&&a.name?"/images/media_effect/icon/arfx-icon.png":null},getDefaultContentNameFromFile:function(a){if(a&&a.name){a=a.name;var b=a.lastIndexOf(".");return b===-1?a:a.substring(0,b)}return""}};e.exports=a}),null);
__d("MediaEffectARStudioFileDetailsStore",["FluxReduceStore","MediaEffectARStudioFileUtils","MediaEffectDialogsDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c=b("immutable").Record;g=babelHelpers.inherits(i,c({thumbnailFile:{width:0,height:0,size:0,isFetching:!1,src:""},projectFile:{isFetching:!1},etcArfxFile:{},pvrArfxFile:{},uncompressedArfxFile:{},screencastFile:{isFetching:!1,src:""},reviewDescription:{value:""},previousVersions:[],isAgreedWithLegalAgreement:{value:!1},legalAgreementText:"",isAutoupgraded:!1,latestVersion:null,minVersion:null,currentVersion:null,discontinuationDate:null,isOutOfDate:!1,projectHardSizeLimit:null,arfxSizeSoftLimit:null,arfxSizeHardLimit:null,isStoreDirty:!1}));g&&g.prototype;function i(){g.apply(this,arguments)}d=babelHelpers.inherits(a,b("FluxReduceStore"));h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.arfxTypeToFieldName={"@etc.arfx":"etcArfxFile","@pvr.arfx":"pvrArfxFile","@uncompressed.arfx":"uncompressedArfxFile"},b}a.prototype.getInitialState=function(){return new i()};a.prototype.reduce=function(a,c){__p&&__p();var d,e,f,g,h=!1;switch(c.type){case"ARStudioFileDetails/init":var i=c.payload;i.effectThumbnailIsAutogenerated||(a=a.set("thumbnailFile",Object.assign({},i.effectThumbnailFile,{iconSrc:i.effectThumbnailSrc,src:i.effectThumbnailSrc})));d=Object.assign({},i.projectFile);f=b("MediaEffectARStudioFileUtils").getProjectFileIcon(d);f&&(d=Object.assign({},d,{iconSrc:f}));a=a.set("projectFile",d);a=a.set("screencastFile",Object.assign({},i.screencastFile,{src:i.screencastSrc,reviewMaterialID:i.reviewMaterialID}));i.arfxFiles&&i.arfxFiles.forEach(function(c){if(!c||!c.name)return;e=this.arfxTypeToFieldName[c.name.substr(c.name.lastIndexOf("@"))];e&&(g=b("MediaEffectARStudioFileUtils").getArfxFileIcon(c),g&&(c=Object.assign({},c,{iconSrc:g})),a=a.set(e,c))}.bind(this));a=a.set("reviewDescription",{value:i.effectDescription}).set("previousVersions",i.previousVersions).set("isAutoupgraded",i.isAutoupgraded);var j=i.currentARStudioVersions,k=i.arStudioVersionDiscontinuationDates;if(j&&j.length>0){var l=Math.max.apply(Math,j);j=Math.min.apply(Math,j);var m=Math.max.apply(Math,i.arfxFiles.map(function(a){return Number(a.version)||0}));k=k?k[m]:null;var n=Boolean(m)&&Boolean(j)&&m<j;a=a.set("latestVersion",l).set("minVersion",j).set("currentVersion",m).set("discontinuationDate",k).set("isOutOfDate",n)}l=i.projectHardSizeLimit;j=i.arfxSizeSoftLimit;a=a.set("projectHardSizeLimit",l).set("arfxSizeSoftLimit",j);break;case"ARStudioFileDetails/projectFile/update":a=this.getState();d=a.get("projectFile");d=Object.assign({},d,{error:null,warn:null,noticeTitle:null},c.payload);f=b("MediaEffectARStudioFileUtils").getProjectFileIcon(d);f&&(d=Object.assign({},d,{iconSrc:f}));a=a.set("projectFile",d);c.payload.file&&(a=a.set("etcArfxFile",{}).set("pvrArfxFile",{}).set("uncompressedArfxFile",{}));h=!0;break;case"ARStudioFileDetails/projectFile/startFetching":a=this.getState();d=a.get("projectFile");a=a.set("projectFile",Object.assign({},d,{isFetching:!0}));break;case"ARStudioFileDetails/projectFile/stopFetching":a=this.getState();d=a.get("projectFile");a=a.set("projectFile",Object.assign({},d,{isFetching:!1}));break;case"ARStudioFileDetails/screencastFile/update":a=this.getState();m=a.get("screencastFile");a=a.set("screencastFile",Object.assign({},m,{error:null},c.payload));h=!0;break;case"ARStudioFileDetails/screencastFile/startFetching":a=this.getState();m=a.get("screencastFile");a=a.set("screencastFile",Object.assign({},m,{isFetching:!0}));break;case"ARStudioFileDetails/screencastFile/stopFetching":a=this.getState();m=a.get("screencastFile");a=a.set("screencastFile",Object.assign({},m,{isFetching:!1}));break;case"ARStudioFileDetails/arfxFile/update":a=this.getState();e=this.arfxTypeToFieldName[c.arfxType];e&&(k=a.get(e),f=b("MediaEffectARStudioFileUtils").getProjectFileIcon(k),f&&(k=Object.assign({},k,{iconSrc:f})),k=Object.assign({},k,{error:null,isVersionValid:null,canUploadVersion:null,version:null},c.payload),a=a.set(e,k));h=!0;break;case"ARStudioFileDetails/arfxFile/startFetching":a=this.getState();e=this.arfxTypeToFieldName[c.arfxType];a=a.set(e,Object.assign({},a.get(e),{isFetching:!0}));break;case"ARStudioFileDetails/arfxFile/stopFetching":a=this.getState();e=this.arfxTypeToFieldName[c.arfxType];a=a.set(e,Object.assign({},a.get(e),{isFetching:!1}));break;case"ARStudioFileDetails/thumbnailFile/update":a=this.getState();n=a.get("thumbnailFile");a=a.set("thumbnailFile",Object.assign({},n,{error:null},c.payload));h=!0;break;case"ARStudioFileDetails/thumbnailFile/startFetching":a=this.getState();n=a.get("thumbnailFile");a=a.set("thumbnailFile",Object.assign({},n,{isFetching:!0}));break;case"ARStudioFileDetails/thumbnailFile/stopFetching":a=this.getState();n=a.get("thumbnailFile");a=a.set("thumbnailFile",Object.assign({},n,{isFetching:!1}));break;case"ARStudioFileDetails/isAgreedWithLegalAgreement/update":a=this.getState();a=a.set("isAgreedWithLegalAgreement",Object.assign({},a.get("isAgreedWithLegalAgreement"),{error:null},c.payload));c.isInit||(h=!0);break;case"ARStudioFileDetails/legalAgreementText/update":a=this.getState().set("legalAgreementText",c.payload.legalAgreementText);break;case"ARStudioFileDetails/reviewDescription/update":a=this.getState();a=a.set("reviewDescription",Object.assign({},a.get("reviewDescription"),{error:null},c.payload));h=!0;break;case"MediaEffectARStudioPagesStore/restoreInternalSettings":a=this.getState().set("thumbnailFile",c.payload.thumbnailFile);break;case"MediaEffectARStudioDetailDialog/open":case"ARStudioFileUploadDialog/open":case"MediaEffectARStudioPagesStore/startPageFlow":a=this.getInitialState();break}h&&(a=a.set("isStoreDirty",!0));return a};a.prototype.shouldShowArfxFiles=function(){var a=this.getState();a=a.get("projectFile");return Boolean(a&&a.name&&!a.name.endsWith(".arexport"))};a.prototype.connectedAppRequired=function(){var a=this.getState().get("projectFile");return Boolean(a.hasIdentityCapability||a.hasCameraSharedCapability)};a.__moduleID=e.id;e.exports=new a(b("MediaEffectDialogsDispatcher"))}),null);
__d("FXInspirationsCategoryName",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOP:"top",PRECAPTURE_TOP:"precapture_top",POSTCAPTURE_TOP:"postcapture_top",ALPHA_TOP:"alpha_top",MOST_RECENT:"most_recent",PRECAPTURE_MOST_RECENT:"precapture_most_recent",POSTCAPTURE_MOST_RECENT:"postcapture_most_recent",MASKS:"masks",STYLE:"style",PRECAPTURE_STYLE:"precapture_style",POSTCAPTURE_STYLE:"postcapture_style",FRAMES:"frames",PRECAPTURE_FRAMES:"precapture_frames",POSTCAPTURE_FRAMES:"postcapture_frames",FB_ONLY:"fb_only",PRECAPTURE_FB_ONLY:"precapture_fb_only",POSTCAPTURE_FB_ONLY:"postcapture_fb_only",SELF:"self",DOODLES:"doodles",ADJUSTMENT_MODES:"adjustment_modes",EDITING:"editing"})}),null);
__d("FXProductVisibilityPolicyType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALL_PRODUCTS:0,OWNING_PRODUCT_ONLY:1,SPECIFIC_PRODUCTS:2,ALL_EXCEPT_PRODUCTS:3,ANY_FACEBOOK_UNIVERSE:4})}),null);
__d("InspirationsCaptureMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRECAPTURE_PHOTO:"precapture_photo",POSTCAPTURE_PHOTO:"postcapture_photo",PRECAPTURE_VIDEO:"precapture_video",POSTCAPTURE_VIDEO:"postcapture_video",LIVE:"live",CARDS:"cards",DIRECT:"direct",AR_ADS:"ar_ads"})}),null);
__d("MediaEffectContentGeneralDetailsStore",["fbt","DayPartingGrid","FluxReduceStore","FXEntMediaEffectStatus","FXInspirationsCategoryName","FXMediaEffectProduct","FXProductVisibilityPolicyType","FXProductVisibilityPolicyTypeLabels","InspirationsCaptureMode","MediaEffectARStudioFileUtils","MediaEffectARStudioSaveUtils","MediaEffectDialogsDispatcher","MediaEffectExceptionReason","MediaEffectExceptionSource","MediaEffectExceptionsTypedLogger","immutable","mediaEffectOwnerCanPublishToInstagram"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;c=b("immutable").Record;var j="124024574287414",k="ig_camera_core_team";d=function(){return{value:[b("FXInspirationsCategoryName").MASKS,b("FXInspirationsCategoryName").FRAMES,b("FXInspirationsCategoryName").STYLE].map(function(a){return{name:a,value:!1}})}};f=function(){return{value:Object.keys(b("InspirationsCaptureMode")).map(function(a){return{name:a,value:!1}})}};var l=function(){return Object.keys(b("FXProductVisibilityPolicyType")).map(function(a){return{label:b("FXProductVisibilityPolicyTypeLabels")[a],value:b("FXProductVisibilityPolicyType")[a]}})},m=function(){return{value:Object.keys(b("FXMediaEffectProduct")).map(function(a){return{name:a,value:!1}})}},n=function(a){return!a?[]:Object.keys(a).map(function(b){return{label:a[b],value:b}})};h=babelHelpers.inherits(o,c({contentName:{value:""},vanityName:{value:""},showSchedule:!1,startTime:{},endTime:{},timezone:{},keywords:{value:[]},inspirationCategories:d(),humanDescription:{},isContentContainLiteralText:{value:!1},isFBOnlyVisibility:{value:!1},selectedPolicyType:{value:1},productVisibility:m(),selectedInstruction:{},offlineOnly:{value:!1},selfBirthdayOnly:{value:!1},fbExperimentID:null,page:{value:{}},selectedRankingType:{},rankingCustomValue:{},locales:{value:[]},adsTargeting:{},hasWhitelistUsersEligibility:{value:!1},whitelistUsers:{value:[]},eligibilityGateKeepers:{value:[]},catalogGateKeepers:{value:[]},attributedOwner:{value:{}},selectedInstagramAttribution:{value:null},instagramAttribution:null,selectedInstagramDistribution:[],instagramCameraFormat:{},instagramGatelogic:{value:null},igGatekeeper:{value:[]},igLaunchTimeForBadging:{value:null},timing:{value:new(b("DayPartingGrid"))()},showTiming:!1,showLocation:!1,showMultiLocation:!0,location:{value:{}},locationPin:{isFetching:!1,showRadius:!1,value:{}},locationConstrained:{value:!1},id:null,status:{},reviewStatus:null,additionalStatus:null,couldToggleManually:!1,submissionStatus:null,flowType:null,creationTime:"",creator:null,trailingReviewRejected:!1,hasEnabledActivations:!1,rejectedReasons:[],policyTypes:l(),instructions:[],instagramAttributions:[],additionalInstagramDistributions:[],igShowDistribution:!1,captureModes:f(),cryptoHash:"",surface:null,testingLinkRemainingDailyUses:null,effectDestination:b("FXMediaEffectProduct").FACEBOOK,isStoreDirty:!1,fbOnlySection:null}));h&&h.prototype;function o(){h.apply(this,arguments)}i=babelHelpers.inherits(a,b("FluxReduceStore"));i&&i.prototype;a.prototype.getInitialState=function(){return new o()};a.prototype.reduce=function(a,c){__p&&__p();var d,e=!0;switch(c.type){case"MediaEffectGeneralContentDetails/contentName/update":a=this.getState();a=a.set("contentName",Object.assign({},a.get("contentName"),{error:null},c.payload));break;case"MediaEffectGeneralContentDetails/humanDescription/update":a=this.getState();a=a.set("humanDescription",Object.assign({},a.get("humanDescription"),c.payload));break;case"ARStudioFileDetails/projectFile/update":a=this.getState();a.get("contentName").value||(a=a.set("contentName",Object.assign({},a.get("contentName"),{error:null,value:b("MediaEffectARStudioFileUtils").getDefaultContentNameFromFile(c.payload)})));break;case"MediaEffectGeneralContentDetails/vanityName/update":a=this.getState();a=a.set("vanityName",Object.assign({},a.get("vanityName"),{error:null},c.payload));break;case"MediaEffectGeneralContentDetails/showSchedule/update":a=this.getState().set("showSchedule",c.payload);break;case"MediaEffectGeneralContentDetails/startTime/update":a=this.getState();a=a.set("startTime",Object.assign({},a.get("startTime"),c.payload));break;case"MediaEffectGeneralContentDetails/endTime/update":a=this.getState();var f=c.payload.value,h=a.get("startTime").value;a=a.set("endTime",Object.assign({},a.get("endTime"),c.payload,{error:f<h?g._("Ng\u00e0y k\u1ebft th\u00fac ph\u1ea3i sau ng\u00e0y b\u1eaft \u0111\u1ea7u."):null}));break;case"MediaEffectGeneralContentDetails/timezone/update":a=this.getState();a=a.set("timezone",Object.assign({},a.get("timezone"),c.payload));break;case"MediaEffectGeneralContentDetails/schedule/clear":a=this.getState().set("startTime",{}).set("endTime",{}).set("timezone",{});break;case"MediaEffectGeneralContentDetails/endTime/clear":a=this.getState().set("endTime",{});break;case"MediaEffectGeneralContentDetails/keywords/add":a=this.getState();f=a.get("keywords").value;a=a.set("keywords",{value:f.concat([c.payload])});break;case"MediaEffectGeneralContentDetails/keywords/remove":a=this.getState();f=a.get("keywords").value;var i=c.payload;h=f.findIndex(function(a){return a.title===i.title});a=a.set("keywords",{value:[].concat(f.slice(0,h),f.slice(h+1))});break;case"MediaEffectGeneralContentDetails/whitelistUsers/add":a=this.getState();f=a.get("whitelistUsers").value;a=a.set("whitelistUsers",{value:f.concat([c.payload])});break;case"MediaEffectGeneralContentDetails/whitelistUsers/remove":a=this.getState();f=a.get("whitelistUsers").value;var l=c.payload;h=f.findIndex(function(a){return a.title===l.title});a=a.set("whitelistUsers",{value:[].concat(f.slice(0,h),f.slice(h+1))});break;case"MediaEffectGeneralContentDetails/hasWhitelistUsersEligibility/update":a=this.getState();a=a.set("hasWhitelistUsersEligibility",Object.assign({},a.get("hasWhitelistUsersEligibility"),c.payload));break;case"MediaEffectGeneralContentDetails/isContentContainLiteralText/update":a=this.getState();a=a.set("isContentContainLiteralText",Object.assign({},a.get("isContentContainLiteralText"),c.payload));break;case"MediaEffectGeneralContentDetails/isFBOnlyVisibility/update":a=this.getState();a=a.set("isFBOnlyVisibility",Object.assign({},a.get("isFBOnlyVisibility"),c.payload));break;case"MediaEffectGeneralContentDetails/selectedPolicyType/update":a=this.getState();a=a.set("selectedPolicyType",Object.assign({},a.get("selectedPolicyType"),c.payload));this.shouldShowProducts()||(a=a.set("productVisibility",m()));break;case"MediaEffectGeneralContentDetails/productVisibility/update":a=this.getState();f=a.get("productVisibility").value;var o=c.payload;h=f.findIndex(function(a){return a.name===o.name});a=a.set("productVisibility",{value:[].concat(f.slice(0,h),[o],f.slice(h+1))});break;case"MediaEffectGeneralContentDetails/effectDestination/update":a=this.getState();a=a.set("effectDestination",c.payload).set("surface",c.payload).set("selectedInstagramAttribution",{value:null}).set("selectedInstagramDistribution",[]).set("igShowDistribution",!1);a=this.checkAndMaybePreselectAttribution(a);break;case"MediaEffectGeneralContentDetails/offlineOnly/update":a=this.getState();a=a.set("offlineOnly",Object.assign({},a.get("offlineOnly"),c.payload));break;case"MediaEffectGeneralContentDetails/selfBirthdayOnly/update":a=this.getState();a=a.set("selfBirthdayOnly",Object.assign({},a.get("selfBirthdayOnly"),c.payload));break;case"MediaEffectGeneralContentDetails/page/update":a=this.getState();a=a.set("page",Object.assign({},a.get("page"),c.payload));e=!1;break;case"MediaEffectGeneralContentDetails/page/clear":a=this.getState().set("page",{value:{}});e=!1;break;case"MediaEffectGeneralContentDetails/attributedOwner/update":a=this.getState();a=a.set("attributedOwner",Object.assign({},a.get("attributedOwner"),c.payload));break;case"MediaEffectGeneralContentDetails/attributedOwner/clear":a=this.getState().set("attributedOwner",{value:{}});break;case"MediaEffectGeneralContentDetails/selectedRankingType/update":a=this.getState();a=a.set("selectedRankingType",Object.assign({},a.get("selectedRankingType"),c.payload));c.payload.value!=="MANUAL"&&(a=a.set("rankingCustomValue",{}));break;case"MediaEffectGeneralContentDetails/rankingCustomValue/update":a=this.getState();a=a.set("rankingCustomValue",Object.assign({},a.get("rankingCustomValue"),c.payload));break;case"MediaEffectGeneralContentDetails/eligibilityGateKeepers/add":a=this.getState();f=a.get("eligibilityGateKeepers").value;a=a.set("eligibilityGateKeepers",{value:f.concat([c.payload])});break;case"MediaEffectGeneralContentDetails/eligibilityGateKeepers/remove":a=this.getState();f=a.get("eligibilityGateKeepers").value;d=c.payload;h=f.findIndex(function(a){return a.title===d.title});a=a.set("eligibilityGateKeepers",{value:[].concat(f.slice(0,h),f.slice(h+1))});break;case"MediaEffectGeneralContentDetails/catalogGateKeepers/add":a=this.getState();f=a.get("catalogGateKeepers").value;a=a.set("catalogGateKeepers",{value:f.concat([c.payload])});break;case"MediaEffectGeneralContentDetails/catalogGateKeepers/remove":a=this.getState();f=a.get("catalogGateKeepers").value;d=c.payload;h=f.findIndex(function(a){return a.title===d.title});a=a.set("catalogGateKeepers",{value:[].concat(f.slice(0,h),f.slice(h+1))});break;case"MediaEffectGeneralContentDetails/IGGateKeepers/add":a=this.getState();a=a.set("igGatekeeper",{value:[c.payload]});break;case"MediaEffectGeneralContentDetails/IGGateKeepers/remove":a=this.getState();f=a.get("igGatekeeper").value;d=c.payload;h=f.findIndex(function(a){return a.title===d.title});a=a.set("igGatekeeper",{value:[].concat(f.slice(0,h),f.slice(h+1))});break;case"MediaEffectGeneralContentDetails/instagramCameraFormat/update":a=this.getState();a=a.set("instagramCameraFormat",Object.assign({},a.get("instagramCameraFormat"),c.payload));break;case"MediaEffectGeneralContentDetails/instagramGatelogic/update":a=this.getState();a=a.set("instagramGatelogic",Object.assign({},a.get("instagramGatelogic").value,c.payload));break;case"MediaEffectGeneralContentDetails/igLaunchTimeForBadging/update":a=this.getState();a=a.set("igLaunchTimeForBadging",Object.assign({},a.get("igLaunchTimeForBadging").value,c.payload));break;case"MediaEffectContentOwner/selectedOwner/update":f=c.payload.value;h=null;a=this.getState();f===j&&(h=a.get("instagramGatelogic").value,h===null&&a.get("id")===null&&(h=k));a=a.set("instagramGatelogic",{value:h});c.isInit&&(e=!1);break;case"MediaEffectGeneralContentDetails/timing/update":a=this.getState();a=a.set("timing",Object.assign({},c.payload));break;case"MediaEffectGeneralContentDetails/timing/clear":a=this.getState().set("timing",{value:new(b("DayPartingGrid"))()});break;case"MediaEffectGeneralContentDetails/showTiming/update":a=this.getState().set("showTiming",c.payload);break;case"MediaEffectGeneralContentDetails/location/update":a=this.getState();a=a.set("location",Object.assign({},a.get("location"),{error:null},c.payload));break;case"MediaEffectGeneralContentDetails/location/clear":a=this.getState().set("location",{value:{}});break;case"MediaEffectGeneralContentDetails/showLocation/update":a=this.getState().set("showLocation",c.payload);break;case"MediaEffectGeneralContentDetails/locationPin/update":a=this.getState();a=a.set("locationPin",Object.assign({},a.get("locationPin"),{error:null},c.payload));break;case"MediaEffectGeneralContentDetails/locationPin/clear":a=this.getState().set("locationPin",{value:{}});break;case"MediaEffectGeneralContentDetails/locationPin/startFetching":a=this.getState();a=a.set("locationPin",Object.assign({},a.get("locationPin"),{error:null},{isFetching:!0}));e=!1;break;case"MediaEffectGeneralContentDetails/locationPin/stopFetching":a=this.getState();a=a.set("locationPin",Object.assign({},a.get("locationPin"),{error:null},{isFetching:!1}));a=a.set("location",Object.assign({},a.get("location"),{error:null}));e=!1;break;case"MediaEffectGeneralContentDetails/showRadius/update":a=this.getState();f=a.get("locationPin");a=a.set("locationPin",Object.assign({},f,{showRadius:c.payload}));break;case"MediaEffectGeneralContentDetails/radius/update":a=this.getState();f=a.get("locationPin");a=a.set("locationPin",Object.assign({},f,{value:Object.assign({},f.value,{radius:c.payload})}));break;case"MediaEffectGeneralContentDetails/locationAll/clear":f=a.get("adsTargeting");delete f.value.excluded_geo_locations;delete f.value.geo_locations;a=this.getState().set("location",{value:{}}).set("locationPin",{value:{}}).set("adsTargeting",f);break;case"MediaEffectGeneralContentDetails/locationConstrained/update":a=this.getState();a=a.set("locationConstrained",Object.assign({},c.payload));break;case"MediaEffectGeneralContentDetails/multiLocation/update":a=this.getState();(c.payload.value.geo_locations||c.payload.value.exclude_geo_locations)&&(a=a.set("showLocation",!0),a=a.set("showMultiLocation",!0));a=a.set("adsTargeting",Object.assign({},a.get("adsTargeting"),c.payload));break;case"MediaEffectGeneralContentDetails/inspirationCategory/update":a=this.getState();f=a.get("inspirationCategories").value;var p=c.payload,q=f.findIndex(function(a){return a.name===p.name});a=a.set("inspirationCategories",{value:[].concat(f.slice(0,q),[p],f.slice(q+1))});break;case"MediaEffectGeneralContentDetails/locales/update":a=this.getState();a=a.set("locales",Object.assign({},a.get("locales"),c.payload));break;case"MediaEffectGeneralContentDetails/adsTargeting/update":a=this.getState();a=a.set("adsTargeting",Object.assign({},a.get("adsTargeting"),c.payload));break;case"MediaEffectGeneralContentDetails/selectedInstruction/update":a=this.getState();a=a.set("selectedInstruction",Object.assign({},a.get("selectedInstruction"),c.payload));break;case"MediaEffectGeneralContentDetails/status/startFetching":a=this.getState();a=a.set("status",Object.assign({},a.get("status"),{error:null},{isFetching:!0}));e=!1;break;case"MediaEffectGeneralContentDetails/status/stopFetching":a=this.getState();a=a.set("status",Object.assign({},a.get("status"),{error:null},{isFetching:!1}));e=!1;break;case"MediaEffectGeneralContentDetails/status/update":a=this.getState();a=a.set("status",Object.assign({},c.payload));break;case"MediaEffectGeneralContentDetails/hasEnabledActivations/update":a=this.getState();a=a.set("hasEnabledActivations",c.payload);break;case"MediaEffectGeneralContentDetails/testingLink/update":a=this.getState();a=a.set("cryptoHash",c.payload);break;case"MediaEffectGeneralContentDetails/initEffect":a=this.getState();f=c.payload.activationData;f.startTime&&(a=a.set("startTime",{value:f.startTime*1e3}).set("showSchedule",!0));f.endTime&&(a=a.set("endTime",{value:f.endTime*1e3}));a=a.set("timezone",{value:f.timezone});q=f.location;if(q){var r=f.multiLocationTargeting;(!r||!r.location)&&(a=a.set("showMultiLocation",!1));a=a.set("showLocation",!0);a=a.set("location",{value:{uniqueID:q.key,title:q.name}});a=a.set("locationPin",{showRadius:q.manual_geo,value:{latitude:q.latitude,longitude:q.longitude,polygons:q.polygons,radius:q.radius}});a=a.set("locationConstrained",{value:q.constrain_eligibility})}r=c.payload.metadataData;a=a.set("keywords",{value:r.tags}).set("submissionStatus",r.submissionStatus).set("effectDestination",(q=r.effectDestination)!=null?q:b("FXMediaEffectProduct").FACEBOOK).set("attributedOwner",{value:{uniqueID:r.attributedOwnerID,title:r.attributedOwnerTitle}}).set("vanityName",{value:r.vanityName});q=c.payload.content;a=a.set("id",q.id).set("status",{value:q.status}).set("reviewStatus",q.reviewStatus).set("additionalStatus",q.additionalStatus).set("couldToggleManually",q.couldToggleManually).set("creator",q.creator).set("trailingReviewRejected",q.trailingReviewRejected).set("flowType",q.flowType).set("contentName",{value:q.name}).set("hasEnabledActivations",q.hasEnabledActivations).set("rejectedReasons",q.rejectedReasons||[]).set("creationTime",q.creationTime).set("cryptoHash",q.cryptoHash).set("surface",q.surface).set("testingLinkRemainingDailyUses",q.testingLinkRemainingDailyUses);a=a.set("catalogGateKeepers",{value:f.fbCatalogGKs.map(function(a){return{uniqueID:a,title:a}})});a=a.set("eligibilityGateKeepers",{value:f.fbEligibilityGKs.map(function(a){return{uniqueID:a,title:a}})});a=a.set("page",{value:f.fbPageLiked});a=a.set("selectedRankingType",{value:f.fbBoosted?"BOOST":f.fbRankWeight!==null?"MANUAL":"DEFAULT"});f.fbRankWeight!==null&&(a=a.set("rankingCustomValue",{value:f.fbRankWeight}));a=a.set("whitelistUsers",{value:r.fbWhitelistedUsers.map(function(a){return{uniqueID:a.uniqueID,title:a.name}})});a=a.set("hasWhitelistUsersEligibility",{value:r.fbWhitelistCheckEligibility});h=f.gatelogic;h===null&&a.get("id")===null&&r.connectAppID===j&&(h=k);a=a.set("instagramGatelogic",{value:h});a=a.set("igGatekeeper",{value:r.igGatekeeper?[{uniqueID:r.igGatekeeper,title:r.igGatekeeper}]:[]});a=a.set("isContentContainLiteralText",{value:r.effectHasText});a=a.set("isFBOnlyVisibility",{value:r.fbOnlyMediaRestriction});a=a.set("humanDescription",{value:r.humanReadableDescription});a=a.set("instagramCameraFormat",{value:f.igCameraFormat});a=a.set("locales",{value:f.locales});a=a.set("selectedInstruction",{value:r.selectedInstructionID});a=a.set("offlineOnly",{value:r.offlineOnly});a=a.set("selfBirthdayOnly",{value:f.selfBirthday});a=a.set("selectedPolicyType",{value:r.productVisibilityPolicy.type});q=r.productVisibilityPolicy.products;if(q&&q.length>0){h=a.get("productVisibility").value;var s=q.map(function(a){return a.toUpperCase()});h=h.map(function(a){return{name:a.name,value:s.includes(a.name)}});a=a.set("productVisibility",{value:h})}q=c.payload.instagramData;a=a.set("instagramAttribution",q.instagramAttribution).set("instagramAttributions",q.instagramAttributions).set("selectedInstagramAttribution",{value:q.instagramAttribution?q.instagramAttribution.id:null}).set("selectedInstagramDistribution",q.selectedInstagramDistributionIDs).set("additionalInstagramDistributions",q.additionalInstagramDistributions).set("igShowDistribution",Boolean(q.selectedInstagramDistributionIDs)&&q.selectedInstagramDistributionIDs.length>0);a=this.checkAndMaybePreselectAttribution(a);a=a.set("timing",{value:b("MediaEffectARStudioSaveUtils").convertTimingToGrid(f.timingSchedule)});a=a.set("showTiming",f.timingSchedule&&f.timingSchedule.length>0);h=null;q=null;var t=f.multiLocationTargeting;if(t){var u=t.location;if(u)try{h=JSON.parse(u);a=a.set("showLocation",!0);a=a.set("showMultiLocation",!0);u=t.constrain_eligibility;a=a.set("locationConstrained",{value:u})}catch(a){this.logJsonParseAdsTargetingException(a)}}if(f.adsTargetingSpec!==null)try{q=JSON.parse(f.adsTargetingSpec)}catch(a){this.logJsonParseAdsTargetingException(a)}a=a.set("adsTargeting",{value:Object.assign({},q,h)});var v=r.inspirationCategoryNames;if(v&&v.length>0){t=a.get("inspirationCategories").value;t=t.map(function(a){return{name:a.name,value:v.includes(a.name)}});a=a.set("inspirationCategories",{value:t})}var w=r.captureModes;if(w&&w.length>0){u=a.get("captureModes").value;u=u.map(function(a){return{name:a.name,value:w.includes(a.name.toLowerCase())}});a=a.set("captureModes",{value:u})}e=!1;break;case"MediaEffectGeneralContentDetails/initDropdowns":a=this.getState().set("instructions",n(c.payload.instructions));c.payload.instagramAttributions&&a.get("instagramAttributions").length===0&&(a=a.set("instagramAttributions",c.payload.instagramAttributions));a=this.checkAndMaybePreselectAttribution(a);e=!1;break;case"MediaEffectARStudioPagesStore/restoreInternalSettings":a=this.getState().set("adsTargeting",c.payload.adsTargeting).set("attributedOwner",c.payload.attributedOwner).set("captureModes",c.payload.captureModes).set("catalogGateKeepers",c.payload.catalogGateKeepers).set("eligibilityGateKeepers",c.payload.eligibilityGateKeepers).set("fbExperimentID",c.payload.fbExperimentID).set("hasWhitelistUsersEligibility",c.payload.hasWhitelistUsersEligibility).set("humanDescription",c.payload.humanDescription).set("igGatekeeper",c.payload.igGatekeeper).set("igLaunchTimeForBadging",c.payload.igLaunchTimeForBadging).set("inspirationCategories",c.payload.inspirationCategories).set("selectedInstagramAttribution",{value:c.payload.instagramAttribution?c.payload.instagramAttribution.id:null}).set("instagramCameraFormat",c.payload.instagramCameraFormat).set("instagramGatelogic",c.payload.instagramGatelogic).set("instructions",c.payload.instructions).set("isContentContainLiteralText",c.payload.isContentContainLiteralText).set("isFBOnlyVisibility",c.payload.isFBOnlyVisibility).set("locales",c.payload.locales).set("offlineOnly",c.payload.offlineOnly).set("page",c.payload.page).set("policyTypes",c.payload.policyTypes).set("productVisibility",c.payload.productVisibility).set("rankingCustomValue",c.payload.rankingCustomValue).set("selectedInstruction",c.payload.selectedInstruction).set("selectedPolicyType",c.payload.selectedPolicyType).set("selectedRankingType",c.payload.selectedRankingType).set("selfBirthdayOnly",c.payload.selfBirthdayOnly).set("showTiming",c.payload.showTiming).set("timing",c.payload.timing).set("whitelistUsers",c.payload.whitelistUsers);break;case"MediaEffectARStudioDetailDialog/open":case"ARStudioFileUploadDialog/open":case"MediaEffectARStudioPagesStore/startPageFlow":a=this.getInitialState();e=!1;break;case"MediaEffectGeneralContentDetails/captureModes/update":a=this.getState();f=a.get("captureModes").value;var x=c.payload;q=f.findIndex(function(a){return a.name.toLowerCase()===x.name.toLowerCase()});a=a.set("captureModes",{value:[].concat(f.slice(0,q),[x],f.slice(q+1))});break;case"MediaEffectGeneralContentDetails/instagramAttribution/update":a=this.getState();a=a.set("selectedInstagramAttribution",Object.assign({},a.get("selectedInstagramAttribution"),{error:null},c.payload));a=this.checkAndMaybeClearDistribution(a);break;case"MediaEffectGeneralContentDetails/igShowDistribution/update":a=this.getState();h=c.payload;a=a.set("igShowDistribution",h);h||(a=this.checkAndMaybeClearDistribution(a));break;case"MediaEffectGeneralContentDetails/igSelectedDistribution/update":a=this.getState();t=c.payload.value;var y=c.payload.name;r=a.get("selectedInstagramDistribution");t?r=[].concat(r,[y]):r=r.filter(function(a){return a!==y});a=a.set("selectedInstagramDistribution",r);break;case"MediaEffectGeneralContentDetails/additionalInstagramDistributions/add":a=this.getState();var z=c.payload;u=a.get("additionalInstagramDistributions");u.filter(function(a){return a.id===z.id}).length===0&&(u=[].concat(u,[z]),a=a.set("additionalInstagramDistributions",u));break;case"MediaEffectGeneralContentDetails/additionalInstagramDistributions/remove":a=this.getState();var A=c.payload;f=a.get("additionalInstagramDistributions");f=f.filter(function(a){return a.id!==A.id});a=a.set("additionalInstagramDistributions",f);break;case"MediaEffectGeneralContentDetails/update/fbOnlySection":a=a.set("fbOnlySection",c.payload);e=!1;break;default:e=!1;break}e&&(a=a.set("isStoreDirty",!0));return a};a.prototype.logJsonParseAdsTargetingException=function(a){new(b("MediaEffectExceptionsTypedLogger"))().setExceptionReason(b("MediaEffectExceptionReason").LOCATION_TARGET_TYPE_SELECTION_FAIL).setExceptionSource(b("MediaEffectExceptionSource").DIALOG_LOCATION_SECTION).setExceptionTrace(a.stack.split("\n")).setExceptionMessage(a.name+": "+a.message)};a.prototype.shouldShowProducts=function(){var a=this.getState().get("selectedPolicyType").value;return a===b("FXProductVisibilityPolicyType").SPECIFIC_PRODUCTS||a===b("FXProductVisibilityPolicyType").ALL_EXCEPT_PRODUCTS};a.prototype.shouldShowRankingCustom=function(){return this.getState().get("selectedRankingType").value==="MANUAL"};a.prototype.getInstagramAttribution=function(){var a=this.getState(),b=a.get("selectedInstagramAttribution").value;if(!b)return null;var c={id:b,name:"",src:"",username:""};a=a.get("instagramAttributions");a=a.filter(function(a){return a.id===b});a&&a.length>0&&(c=a[0]);return c};a.prototype.getInstagramDistributions=function(){var a=this.getState(),b=a.get("selectedInstagramDistribution");a=a.get("instagramAttributions");return this.filterDistributionsWithIDs(b,a)};a.prototype.getAdditionalInstagramDistributions=function(){var a=this.getState(),b=a.get("selectedInstagramDistribution");a=a.get("additionalInstagramDistributions");return this.filterDistributionsWithIDs(b,a)};a.prototype.getTotalInstagramDistributions=function(){var a;return((a=this.getInstagramDistributions())!=null?a:[]).concat((a=this.getAdditionalInstagramDistributions())!=null?a:[])};a.prototype.filterDistributionsWithIDs=function(a,b){if(!a)return[];b=b.filter(function(b){return a.includes(b.id)});return b};a.prototype.shouldShowLocation=function(){return this.getState().get("showLocation")};a.prototype.isInactiveBecauseOfSchedule=function(){var a=this.getState();if(a.get("showSchedule")){a=a.get("startTime").value;return a>Date.now()}return!1};a.prototype.isArchived=function(){return this.getState().get("status").value===b("FXEntMediaEffectStatus").ARCHIVED};a.prototype.isRejected=function(){return this.getState().get("status").value===b("FXEntMediaEffectStatus").NOT_APPROVED};a.prototype.isDraft=function(){return this.getState().get("status").value===b("FXEntMediaEffectStatus").DRAFT};a.prototype.isNewOrDraft=function(){var a=this.getState().get("status");return!a||!a.value||a.value===b("FXEntMediaEffectStatus").DRAFT};a.prototype.isNew=function(){var a=this.getState().get("id");return a===null};a.prototype.isEditDisabled=function(){var a=this.getState().get("status");return a.value===b("FXEntMediaEffectStatus").ARCHIVED||a.value===b("FXEntMediaEffectStatus").NOT_APPROVED||this.isSelectedDestinationInstagram()&&!b("mediaEffectOwnerCanPublishToInstagram")()};a.prototype.isSelectedDestination=function(a){return this.getState().get("effectDestination")===a};a.prototype.locationPin=function(){return this.getState().get("locationPin")};a.prototype.locationPinShowRadius=function(){return this.getState().get("locationPin").showRadius};a.prototype.shouldShowMultiLocation=function(){return this.getState().get("showMultiLocation")};a.prototype.isSelectedDestinationInstagram=function(){return this.isSelectedDestination(b("FXMediaEffectProduct").INSTAGRAM)};a.prototype.shouldShowIGAttributionDropdown=function(){return this.getState().get("instagramAttributions").length>0};a.prototype.shouldShowIGDistribution=function(){return this.getState().get("igShowDistribution")};a.prototype.shouldShowDistributionCheckbox=function(){var a=this.getState().get("instagramAttributions");return Boolean(a)&&a.length>1};a.prototype.checkAndMaybePreselectAttribution=function(a){var c=a.get("effectDestination");if(c!==b("FXMediaEffectProduct").INSTAGRAM)return a;c=a.get("selectedInstagramAttribution");var d=a.get("instagramAttributions");!c.value&&d.length>0&&(a=a.set("selectedInstagramAttribution",{value:d[0].id}));return a};a.prototype.checkAndMaybeClearDistribution=function(a){var b=a.get("additionalInstagramDistributions");b=b.map(function(a){return a.id});return a.set("igShowDistribution",!1).set("selectedInstagramDistribution",b)};function a(){i.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectDialogsDispatcher"))}),null);
__d("MediaEffectReactFrameSerializer",["regeneratorRuntime","Promise","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorSize","MediaEffectReactFrameEditorTextAssetRecord","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){a=a.position;return{horizontal_alignment:a.x.anchor_asset_size_percentage!==0?"center":a.x.asset_origin==="canvas_start"?"left":"right",horizontal_margin:a.x.asset_canvas_size_percentage,vertical_alignment:a.y.anchor_asset_size_percentage!==0?"center":a.y.asset_origin==="canvas_start"?"top":"bottom",vertical_margin:a.y.asset_canvas_size_percentage}}function h(a,c){c=b("nullthrows")(a.assetSize);a=g(a);if(c instanceof b("MediaEffectReactFrameEditorSize").Fill||c instanceof b("MediaEffectReactFrameEditorSize").ScaleWidth)return babelHelpers["extends"]({},a,{size:c.width.canvas_size_percentage,size_dimension:"width"});else if(c instanceof b("MediaEffectReactFrameEditorSize").Fit||c instanceof b("MediaEffectReactFrameEditorSize").ScaleHeight)return babelHelpers["extends"]({},a,{size:c.height.canvas_size_percentage,size_dimension:"height"});else throw new Error("Unserializable frame.")}function i(a,c){c=b("nullthrows")(a.assetSize);a=g(a);if(c instanceof b("MediaEffectReactFrameEditorSize").Fit||c instanceof b("MediaEffectReactFrameEditorSize").ScaleWidth)return babelHelpers["extends"]({},a,{size:c.width.canvas_size_percentage,size_dimension:"width"});else if(c instanceof b("MediaEffectReactFrameEditorSize").Fill||c instanceof b("MediaEffectReactFrameEditorSize").ScaleHeight)return babelHelpers["extends"]({},a,{size:c.height.canvas_size_percentage,size_dimension:"height"});else throw new Error("Unserializable frame.")}function j(a){__p&&__p();var c=a.getParentImageAsset();if(c){c=g(c);return babelHelpers["extends"]({},c,{size:0,textbox_width:0,text_horizontal_alignment:a.textHorizontalAlignment,size_dimension:"height"})}c=a.assetSize;var d=g(a);if(!c||!(c instanceof b("MediaEffectReactFrameEditorSize").Stretch))throw new Error("Unserializable frame.");return babelHelpers["extends"]({},d,{size:c.height?c.height.canvas_size_percentage:0,textbox_width:c.width?c.width.canvas_size_percentage:0,text_horizontal_alignment:a.textHorizontalAlignment,size_dimension:"height"})}function k(a,c){var d=b("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasSize;return{landscape_position:h(a,d),portrait_position:i(a,d),rotation:0,source_template_asset_id:a.sourceTemplateAssetFBID,z_index:c}}function l(a,b){var c=j(a);return{portrait_position:c,landscape_position:c,asset_id:a.assetFBID||-a.localAssetID,content:a.content,font_name:a.font.getSystemFontName(),font_size:c.size,custom_font_id:a.font.getCustomFontID(),color:a.color.substr(1),text_horizontal_alignment:a.textHorizontalAlignment,rotation:0,source_template_asset_id:a.sourceTemplateAssetFBID,z_index:b}}function m(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:if(!(a.assocTextAsset&&a.assocTextAsset.dirty)){e.next=3;break}e.next=3;return b("regeneratorRuntime").awrap(a.upload());case 3:d=a.getInstanceFromStore();return e.abrupt("return",babelHelpers["extends"]({},k(d,c),{sticker_id:d.stickerFBID,is_face_sticker:!1,dynamic_sticker_pack_id:null,dynamic_sticker_type:null,asset_id:d.assetFBID||-d.localAssetID,assoc_text_asset:d.assocTextAsset&&l(d.assocTextAsset,c)}));case 5:case"end":return e.stop()}},null,this)}function a(a){__p&&__p();var c,d,e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){__p&&__p();while(1)switch(k.prev=k.next){case 0:c={};d=[];e={};f=a.assetOrder;g=a.assets;h=f.map(function(a,c){a=g.get(a);return a instanceof b("MediaEffectReactFrameEditorTextAssetRecord")?l(a,c):null}).toArray();h.forEach(function(a){a&&(d.push(a),e[a.asset_id]=a)});i=[];f.forEach(function(a,c){a=g.get(a);a instanceof b("MediaEffectReactFrameEditorImageAssetRecord")&&i.push(m(a,c))});k.next=11;return b("regeneratorRuntime").awrap(b("Promise").all(i));case 11:j=k.sent;j.forEach(function(a){c[a.asset_id]=a});return k.abrupt("return",{stickers:j,sticker_edges:c,text:d,text_edges:e,fbid:a.frameFBID,filter_id:a.filterID});case 14:case"end":return k.stop()}},null,this)}e.exports={genSerializeFrame:a}}),null);
__d("XMediaEffectFrameAsyncSubmitController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/effects/frame/submit/",{flow_type:{type:"Enum",required:!0,enumType:1},creation_referrer:{type:"Enum",enumType:1},frame_distribution_types:{type:"EnumKeyset",enumType:null},source_id:{type:"FBID"},action_context:{type:"String"},active_tab:{type:"Enum",enumType:1},preview_on_camera:{type:"Bool",defaultValue:!1}})}),null);
__d("XMediaEffectMaskAsyncUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/effects/ar_effect/upload/",{effect_id:{type:"FBID"},preview_on_camera:{type:"Bool",defaultValue:!1}})}),null);
__d("MediaEffectRequestBuilder",["invariant","regeneratorRuntime","AsyncRequest","AsyncUploadRequest","Form","MediaEffectFrameCreateDialogDataStore","MediaEffectMetadataActionCreators","MediaEffectMetadataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameSerializer","MediaEffectTemplateDataStore","MediaEffectUserContext","XMediaEffectAsyncEditController","XMediaEffectFrameAsyncSubmitController","XMediaEffectMaskAsyncUploadController","emptyFunction","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l;function a(a){this.effectID=a,this.fbOnly=b("MediaEffectUserContext").includesFBOnly,this.previewOnCamera=!1,this.onSuccessComplete=b("emptyFunction"),this.onFailureComplete=b("emptyFunction")}a.forCreate=function(){return new this(null)};a.forUpdate=function(a){return new this(a)};a.prototype.setOnSuccessComplete=function(a){this.onSuccessComplete=a;return this};a.prototype.setOnFailureComplete=function(a){this.onFailureComplete=a;return this};a.prototype.setSendPreviewNotification=function(a){this.previewOnCamera=a;return this};a.prototype.genRequest=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("Abstract method!");case 1:case"end":return a.stop()}},null,this)};a.prototype.genSend=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.genRequest());case 2:a=c.sent,a.send();case 4:case"end":return c.stop()}},null,this)};h=babelHelpers.inherits(c,a);h&&h.prototype;c.prototype.getFrameData=function(a,c,d){return b("immutable").Map(b("MediaEffectMetadataStore").getRequestData(this.fbOnly)).withMutations(function(b){a.toSeq().forEach(function(a,c){b.set(c,a)}),c&&b.set("color_palette",c),d&&b.set("variant_of_template",d)})};c.prototype.getFrameUploadRequest=function(a){var c=b("MediaEffectFrameCreateDialogDataStore").getState(),d=b("gkx")("AT7CScl0-HXyXmonNUxfpJvmZM9qlccMSg9qWX6KylengPhRgdksKlwJRFCBxy5rEBhbWCW0Bn6dkzvTxGdB3RzGrVAMixRx5gd7H7mgh-vkzg")?[c.distributionType]:["profile_picture","camera"];c=b("XMediaEffectFrameAsyncSubmitController").getURIBuilder().setString("action_context",JSON.stringify(c.eventDialogContext.actionContext)).setEnum("active_tab",c.eventDialogContext.activeTab).setFBID("source_id",c.sourceID).setEnum("flow_type",c.flowType).setEnum("creation_referrer",c.creationReferrer).setEnumKeyset("frame_distribution_types",d).setBool("preview_on_camera",this.previewOnCamera).getURI();d=a.toObject();String(d.fbid)===String(this.effectID)||g(0,undefined,d.fbid,this.effectID);a={thumbnail_file:d.thumbnail};return new(b("AsyncUploadRequest"))().setURI(c).setAllowCrossOrigin(!1).setData(d).setFiles(a)};function c(){h.apply(this,arguments)}i=babelHelpers.inherits(d,c);i&&i.prototype;d.prototype.genRequest=function(){__p&&__p();var a,c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(b("MediaEffectReactFrameSerializer").genSerializeFrame(b("MediaEffectReactFrameEditorDataStore").getState()));case 2:a=e.sent;c=b("immutable").Map(a);d=this.getFrameUploadRequest(this.getFrameData(c,null));d.subscribe("success",function(a,b){this.onSuccessComplete(b.getResponse())}.bind(this));d.subscribe("failure",function(a,b){this.onFailureComplete(b.getResponse())}.bind(this));return e.abrupt("return",d);case 8:case"end":return e.stop()}},null,this)};function d(){i.apply(this,arguments)}j=babelHelpers.inherits(f,c);j&&j.prototype;f.prototype.genRequest=function(){__p&&__p();var a,c,d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:a=b("MediaEffectTemplateDataStore").getState();f.next=3;return b("regeneratorRuntime").awrap(b("MediaEffectReactFrameSerializer").genSerializeFrame(b("MediaEffectReactFrameEditorDataStore").getState()));case 3:c=f.sent;d=b("immutable").Map(c);e=this.getFrameUploadRequest(this.getFrameData(d,a.sourceColorPalette.toString()));e.subscribe("success",function(c,d){__p&&__p();var e=0;c=d.getResponse();var f=c.payload;a.templateVariations.map(function(d){var c,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(b("MediaEffectReactFrameSerializer").genSerializeFrame(d.frameData));case 2:c=h.sent,g=this.getFrameUploadRequest(this.getFrameData(b("immutable").Map(c),d.colorPalette.toString(),f.effect.id)),g.subscribe("success",function(b,c){e++,e===a.templateVariations.count()&&this.onSuccessComplete(f)}.bind(this)),g.send();case 6:case"end":return h.stop()}},null,this)}.bind(this))}.bind(this));e.subscribe("failure",function(a,b){this.onFailureComplete(b.getResponse())}.bind(this));return f.abrupt("return",e);case 9:case"end":return f.stop()}},null,this)};function f(){j.apply(this,arguments)}k=babelHelpers.inherits(m,a);k&&k.prototype;m.prototype.genRequest=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",this.getRequest());case 1:case"end":return a.stop()}},null,this)};m.prototype.getRequest=function(){var a=b("XMediaEffectAsyncEditController").getURIBuilder().setFBID("media_effect_id",this.effectID).getURI(),c=b("MediaEffectMetadataStore").getRequestData(this.fbOnly),d={thumbnail_file:c.thumbnail};a=new(b("AsyncUploadRequest"))().setURI(a).setAllowCrossOrigin(!1).setData(c).setFiles(d);a.subscribe("success",function(a,b){this.onSuccessComplete(b.getResponse())}.bind(this));a.subscribe("failure",function(a,b){this.onFailureComplete(b.getResponse())}.bind(this));return a};function m(){k.apply(this,arguments)}c=babelHelpers.inherits(n,a);l=c&&c.prototype;function n(a,b,c,d,e){l.constructor.call(this),this.effectID=a,this.previewOnCamera=b,this.isApproved=c,this.data=d,this.files=e}n.forSave=function(a,b,c,d,e){return new this(a,b,c,d,e)};n.prototype.genRequest=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",this.getRequest());case 1:case"end":return a.stop()}},null,this)};n.prototype.getRequest=function(){__p&&__p();var a=b("XMediaEffectMaskAsyncUploadController").getURIBuilder().setFBID("effect_id",this.effectID).setBool("preview_on_camera",this.previewOnCamera).getURI(),c=this.data,d=this.files,e=d.effect_review_material_id,f=d.thumbnail_file,g=d.project_file,h=d.mask_files;if(b("gkx")("AT55JzGHRt1CEdptYQIHStNYDGVhhlEfIa5UPkXsspKK_y3obyafLTj73W9S76ZEImyBuJT-SRFCUR9ah1dA0saJVI_cXsB0vO6Q_KOBwUhdqQ")){d=Object.assign({},c);d.effect_review_material_id=e;d=b("Form").createFormData(d);d.append("project_file",g);d.append("mask_files",h);d.append("mask_thumbnail_file",f);d=new(b("AsyncRequest"))().setURI(a).setAllowCrossOrigin(!1).setRawData(d).setHandler(this.onSuccessComplete).setErrorHandler(this.onFailureComplete)}else{var i=c.media_effect_save_as_draft,j=Object.assign({},c);c.media_effect_save_as_draft=!0;j.effect_review_material_id=e;d=new(b("AsyncUploadRequest"))().setURI(a).setAllowCrossOrigin(!1).setData(j).setFiles({mask_thumbnail_file:f});d.subscribe("failure",function(a,b){this.onFailureComplete(b.getResponse())}.bind(this));d.subscribe("success",function(a,c){__p&&__p();a=c.getResponse().payload.effect.id;b("MediaEffectMetadataActionCreators").updateEffectID(a);var d=b("XMediaEffectMaskAsyncUploadController").getURIBuilder().setFBID("effect_id",a).getURI();a=new(b("AsyncUploadRequest"))().setURI(d).setAllowCrossOrigin(!1).setData(j).setFiles({project_file:g,mask_files:h});a.subscribe("complete",function(a,e){__p&&__p();a=e.find(function(a){return!a.isSuccess()});if(a){this.onFailureComplete(a.getResponse());return}if(!i){j.media_effect_save_as_draft=!1;a=new(b("AsyncUploadRequest"))().setURI(d).setAllowCrossOrigin(!1).setData(j);a.subscribe("success",function(a,b){this.onSuccessComplete(b.getResponse())}.bind(this));a.subscribe("failure",function(a,b){this.onFailureComplete(b.getResponse())}.bind(this));a.send()}else this.onSuccessComplete(e.length?e[e.length-1].getResponse():c.getResponse())}.bind(this));a.send()}.bind(this))}return d};e.exports={forARStudioEffect:n,forFrame:d,forTemplate:f,forMetadata:m}}),null);
__d("MediaEffectARStudioSaveUtils",["AsyncResponse","DayPartingGrid","DayPartingUtils","FXEntMediaEffectSubmissionStatus","MediaEffectFBOnlyUtils","MediaEffectRequestBuilder","WebStorage","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("WebStorage").getLocalStorage(),h="media_effects_legal_agreement_indication",i=60*60;a={saveEffectDetails:function(a,c){var d=this.getDetailDialogRequestData(a),e=d.data;d=d.files;this.save(a.contentId,!1,a.submissionStatus===b("FXEntMediaEffectSubmissionStatus").APPROVED,e,d,c)},publishEffect:function(a,b){var c=this.getUploadDialogRequestData(a),d=c.data;c=c.files;this.save(a.contentId,!1,!1,d,c,b)},saveDraftEffect:function(a,b,c){var d=this.getUploadDialogRequestData(a),e=d.data;d=d.files;e.media_effect_save_as_draft=!0;this.save(a.contentId,b,!1,e,d,c)},save:function(a,c,d,e,f,g){b("MediaEffectRequestBuilder").forARStudioEffect.forSave(a,c,d,e,f).setOnSuccessComplete(function(a){g&&g(!0,a)}).setOnFailureComplete(function(a){g&&g(!1,a),b("AsyncResponse").defaultErrorHandler(a)}).genSend()},getUploadDialogRequestData:function(a){a=this.getDialogRequestData(a,a.contentName.value,a.selectedOwner.value?a.selectedOwner.value.id:null);var b=a.data;a=a.files;return{data:b,files:a}},getDetailDialogRequestData:function(a){a=this.getDialogRequestData(a,a.contentName.value,a.selectedOwner.value?a.selectedOwner.value.id:null);var b=a.data;a=a.files;return{data:b,files:a}},getDataFromWrapperTypeArray:function(a,b){if(!a)return undefined;a=a.map(b).filter(function(a){return a!==""});return a.length===0?undefined:a},convertTimingToGrid:function(a){__p&&__p();var c=new(b("DayPartingGrid"))();if(!a||a.length===0)return c;var d=0,e=0;for(var f=0;f<b("DayPartingUtils").DAYS_IN_WEEK;f++)for(var g=0;g<b("DayPartingUtils").HOURS_IN_DAY;g++){var h=a[d];if(!h)return c;c.hours[f][g]=h.start_time<=e&&e<h.end_time;e>=h.end_time&&d++;e+=i}return c},convertTimingFromGrid:function(a){var c=null,d=[];if(!a||a.length===0)return undefined;var e=0;for(var f=0;f<b("DayPartingUtils").DAYS_IN_WEEK;f++)for(var g=0;g<b("DayPartingUtils").HOURS_IN_DAY;g++)c===null?a.hours[f][g]&&(c=e):a.hours[f][g]||(d[d.length]={start_time:c,end_time:e-1},c=null),e+=i;c&&(d[d.length]={start_time:c,end_time:e-1});return d},getDialogRequestData:function(a,c,d){__p&&__p();var e=a.shouldShowFBOnlyMetadata,f=b("MediaEffectFBOnlyUtils").getFBOnlyFields(),g=a.locationPin,h=a.showLocation&&g.value&&g.value.latitude&&g.value.longitude;h=h?{page_id:a.location.value?a.location.value.uniqueID:undefined,location:g.showRadius&&g.value?{latitude:g.value.latitude,longitude:g.value.longitude,radius_km:g.value.radius}:undefined,constrain_eligibility:!!a.locationConstrained.value}:undefined;d={effect_description:a.reviewDescription.value,end_time:a.endTime&&a.endTime.value?Math.floor(a.endTime.value/1e3):undefined,media_effect_owner:d,media_effect_save_as_draft:!1,media_effect_tags:a.keywords.value.map(function(a){return a.title}),multi_location_targeting:{location:a.adsTargeting.value?JSON.stringify(a.adsTargeting.value):undefined,constrain_eligibility:!!a.locationConstrained.value},name:c,vanity_name:(g=a.vanityName)==null?void 0:g.value,start_time:a.startTime&&a.startTime.value?Math.floor(a.startTime.value/1e3):undefined,targeting_place:h,timezone:a.timezone.value};b("gkx")("AT6C3JeMv0iYZDV0XtLxD1k84UZqFnaqhbY2-300YjtqAQ4PdQ2rKlPLXY3Qb8yGi433r5OMammWHPPzcEOAO7s--DW2VIk5cnfEmJ8eBl9kaw")&&(d.effect_destination=a.effectDestination,a.instagramAttributionID&&(d.instagram_attribution_id=a.instagramAttributionID),a.instagramDistributionIDs&&(d.instagram_distribution_ids=a.instagramDistributionIDs));if(e){c=function(a){return a.uniqueID?a.uniqueID:""};d=Object.assign(d,{fb_catalog_gks:this.getDataFromWrapperTypeArray(f.catalogGateKeepers.value,c),fb_eligibility_gks:this.getDataFromWrapperTypeArray(f.eligibilityGateKeepers.value,c),fb_only_media_restriction:f.isFBOnlyVisibility.value,fb_page_liked:f.page.value&&f.page.value.uniqueID?f.page.value.uniqueID:undefined,fb_ranking_boosted:f.selectedRankingType.value==="BOOST",fb_ranking_weight:f.selectedRankingType.value==="MANUAL"?f.rankingCustomValue.value:undefined,fb_whitelisted_user_ids:this.getDataFromWrapperTypeArray(f.whitelistUsers.value,c),fb_whitelist_check_eligibility:f.hasWhitelistUsersEligibility.value,gatelogic:f.instagramGatelogic?f.instagramGatelogic.value:undefined,ig_launch_time_for_badging:f.igLaunchTimeForBadging?f.igLaunchTimeForBadging.value:0,ig_gatekeeper:(this.getDataFromWrapperTypeArray(f.igGatekeeper.value,c)||[])[0],instagram_attribution_id:f.instagramAttribution?f.instagramAttribution.id:undefined,has_text:f.isContentContainLiteralText.value,human_readable_description:f.humanDescription.value,ig_camera_format:f.instagramCameraFormat.value,locales:f.locales.value,meida_effect_instruction:f.selectedInstruction.value,offline_only:f.offlineOnly.value,product_visibility_policy:f.selectedPolicyType.value?{type:f.selectedPolicyType.value,products:this.getDataFromWrapperTypeArray(f.productVisibility.value.filter(function(a){return a.value}),function(a){return a.name?a.name.toLowerCase():""})}:undefined,self_birthday:f.selfBirthdayOnly.value,timing_schedule:this.convertTimingFromGrid(f.timing.value),ads_targeting_spec:f.adsTargeting.value?JSON.stringify(f.adsTargeting.value):undefined,inspiration_category_names:this.getDataFromWrapperTypeArray(f.inspirationCategories.value.filter(function(a){return a.value}),function(a){return a.name?a.name:""}),capture_modes:this.getDataFromWrapperTypeArray(f.captureModes.value.filter(function(a){return a.value}),function(a){return a.name?a.name.toLowerCase():""})});g=f.attributedOwner.value&&f.attributedOwner.value.uniqueID?f.attributedOwner.value.uniqueID:null;g!==null?d.attributed_owner=g:delete d.attributed_owner}h=a.uncompressedArfxFile;e=a.etcArfxFile;c=a.pvrArfxFile;f=[];h&&h.file&&f.push(h.file);e&&e.file&&f.push(e.file);c&&c.file&&f.push(c.file);g=a.screencastFile?a.screencastFile.reviewMaterialID:null;h={data:d,files:{effect_review_material_id:g,thumbnail_file:a.thumbnailFile?a.thumbnailFile.file:null,project_file:a.projectFile?a.projectFile.file:null,mask_files:f}};return h},saveLegalAgreementStateForEffect:function(a,b){if(!g)return!1;!1;var c=this.getEffectsToLegalAgreementMapping();c[a]=b;try{g.setItem(h,JSON.stringify(c)),a=!0}catch(b){a=!1}return a},getEffectsToLegalAgreementMapping:function(){if(!g)return{};var a={},b=g.getItem(h);if(b)try{a=JSON.parse(b)}catch(b){a={}}return a},extendWithFBOnlyData:function(a){__p&&__p();var c=b("MediaEffectFBOnlyUtils").getFBOnlyFields();if(!c)return a;var d=function(a){return a.uniqueID?a.uniqueID:""};return Object.assign({},a,{fb_catalog_gks:this.getDataFromWrapperTypeArray(c.catalogGateKeepers.value,d),fb_eligibility_gks:this.getDataFromWrapperTypeArray(c.eligibilityGateKeepers.value,d),fb_only_media_restriction:c.isFBOnlyVisibility.value,fb_page_liked:c.page.value&&c.page.value.uniqueID?c.page.value.uniqueID:undefined,fb_ranking_boosted:c.selectedRankingType.value==="BOOST",fb_ranking_weight:c.selectedRankingType.value==="MANUAL"?c.rankingCustomValue.value:undefined,fb_whitelisted_user_ids:this.getDataFromWrapperTypeArray(c.whitelistUsers.value,d),fb_whitelist_check_eligibility:c.hasWhitelistUsersEligibility.value,gatelogic:c.instagramGatelogic?c.instagramGatelogic.value:undefined,ig_launch_time_for_badging:c.igLaunchTimeForBadging?c.igLaunchTimeForBadging.value:0,ig_gatekeeper:(this.getDataFromWrapperTypeArray(c.igGatekeeper.value,d)||[])[0],instagram_attribution_id:c.instagramAttribution?c.instagramAttribution.id:undefined,has_text:c.isContentContainLiteralText.value,human_readable_description:c.humanDescription.value,ig_camera_format:c.instagramCameraFormat.value,locales:c.locales.value,meida_effect_instruction:c.selectedInstruction.value,offline_only:c.offlineOnly.value,product_visibility_policy:c.selectedPolicyType.value?{type:c.selectedPolicyType.value,products:this.getDataFromWrapperTypeArray(c.productVisibility.value.filter(function(a){return a.value}),function(a){return a.name?a.name.toLowerCase():""})}:undefined,self_birthday:c.selfBirthdayOnly.value,timing_schedule:this.convertTimingFromGrid(c.timing.value),ads_targeting_spec:c.adsTargeting.value?JSON.stringify(c.adsTargeting.value):undefined,inspiration_category_names:this.getDataFromWrapperTypeArray(c.inspirationCategories.value.filter(function(a){return a.value}),function(a){return a.name?a.name:""}),capture_modes:this.getDataFromWrapperTypeArray(c.captureModes.value.filter(function(a){return a.value}),function(a){return a.name?a.name.toLowerCase():""})})}};e.exports=a}),null);
__d("MediaEffectFBOnlyUtils",["MediaEffectARStudioFileDetailsStore","MediaEffectContentGeneralDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f){"use strict";a={getFBOnlyFields:function(){var a=b("MediaEffectARStudioFileDetailsStore").getState(),c=b("MediaEffectContentGeneralDetailsStore").getState();return{inspirationCategories:c.get("inspirationCategories"),humanDescription:c.get("humanDescription"),isContentContainLiteralText:c.get("isContentContainLiteralText"),isFBOnlyVisibility:c.get("isFBOnlyVisibility"),selectedPolicyType:c.get("selectedPolicyType"),policyTypes:c.get("policyTypes"),productVisibility:c.get("productVisibility"),selectedInstruction:c.get("selectedInstruction"),instructions:c.get("instructions"),offlineOnly:c.get("offlineOnly"),selfBirthdayOnly:c.get("selfBirthdayOnly"),fbExperimentID:c.get("fbExperimentID"),page:c.get("page"),selectedRankingType:c.get("selectedRankingType"),rankingCustomValue:c.get("rankingCustomValue"),locales:c.get("locales"),adsTargeting:c.get("adsTargeting"),hasWhitelistUsersEligibility:c.get("hasWhitelistUsersEligibility"),whitelistUsers:c.get("whitelistUsers"),eligibilityGateKeepers:c.get("eligibilityGateKeepers"),catalogGateKeepers:c.get("catalogGateKeepers"),attributedOwner:c.get("attributedOwner"),instagramAttribution:b("MediaEffectContentGeneralDetailsStore").getInstagramAttribution(),instagramDistribution:b("MediaEffectContentGeneralDetailsStore").getAdditionalInstagramDistributions(),instagramCameraFormat:c.get("instagramCameraFormat"),instagramGatelogic:c.get("instagramGatelogic"),igGatekeeper:c.get("igGatekeeper"),igLaunchTimeForBadging:c.get("igLaunchTimeForBadging"),timing:c.get("timing"),showTiming:c.get("showTiming"),thumbnailFile:a.get("thumbnailFile"),captureModes:c.get("captureModes")}},showFBOnlySection:function(a){b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectGeneralContentDetails/update/fbOnlySection",payload:a})}};e.exports=a}),null);
__d("MediaEffectEnvironmentStore",["ApiClient","FluxReduceStore","MediaEffectDialogsDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c=b("immutable").Record;g=babelHelpers.inherits(i,c({shouldShowFBOnlyMetadata:!1,shouldShowFirstPartySection:!1,isInternalEnv:!1,isNewPublishingFlow:!1,accessToken:null}));g&&g.prototype;function i(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new i()};a.prototype.reduce=function(a,c){switch(c.type){case"MediaEffectEnvironmentStore/init":c.payload.accessToken&&!b("ApiClient").getAccessToken()&&b("ApiClient").setAccessToken(c.payload.accessToken);a=this.getInitialState().set("shouldShowFBOnlyMetadata",c.payload.shouldShowFBOnlyMetadata||!1).set("shouldShowFirstPartySection",c.payload.shouldShowFirstPartySection||!1).set("isInternalEnv",c.payload.isInternalEnv||!1).set("isNewPublishingFlow",c.payload.isNewPublishingFlow||!1).set("accessToken",b("ApiClient").getAccessToken());break;case"MediaEffectARStudioDetailDialog/open":case"ARStudioFileUploadDialog/open":case"MediaEffectARStudioPagesStore/startPageFlow":a=this.getInitialState();break}return a};a.prototype.shouldShowFBOnlyMetadata=function(){return this.getState().get("shouldShowFBOnlyMetadata")};a.prototype.isInternalEnv=function(){return this.getState().get("isInternalEnv")};a.prototype.shouldShowFirstPartySection=function(){return this.getState().get("shouldShowFirstPartySection")};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MediaEffectDialogsDispatcher"))}),null);
__d("MediaEffectManageEffectPages",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UPLOAD:"upload",DETAILS:"details",FILES:"files",PREVIEW:"test",PUBLISH:"publish",AUDIENCE:"audience",REVIEW:"review",SUBMIT:"submit",OVERVIEW:"overview",PERFORMANCE:"performance",PROMOTIONS:"share",INTERNAL_SETTINGS:"internal-settings"})}),null);
__d("XMediaEffectARHubAsyncFetchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/arp/async/load/effects/",{owner_id:{type:"FBID"},delivery_statuses:{type:"EnumSet",enumType:null},review_statuses:{type:"EnumSet",enumType:null},effect_name:{type:"String"}})}),null);
__d("XMediaEffectAsyncMaskDialogDataController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/mask/dialog/data/",{})}),null);
__d("XMediaEffectAsyncMaskDialogFetchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/mask/dialog/fetch/",{media_effect_id:{type:"FBID"}})}),null);
__d("mediaEffectIsTargetingValid",["MediaEffectContentGeneralDetailsStore"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("MediaEffectContentGeneralDetailsStore").getState();return!a.get("location").error&&!a.get("endTime").error};e.exports=a}),null);
__d("mediaEffectIsAudiencePageValid",["mediaEffectIsTargetingValid"],(function(a,b,c,d,e,f){"use strict";a=function(){return b("mediaEffectIsTargetingValid")()};e.exports=a}),null);
__d("mediaEffectIsDetailsPageValid",["MediaEffectContentGeneralDetailsStore"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("MediaEffectContentGeneralDetailsStore").getState();return!a.get("contentName").error&&!a.get("selectedInstagramAttribution").error};e.exports=a}),null);
__d("mediaEffectIsFilesPageValid",["MediaEffectARStudioFileDetailsStore","MediaEffectContentOwnerStore"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("MediaEffectARStudioFileDetailsStore").getState();return!a.get("thumbnailFile").error&&!a.get("projectFile").error&&(b("MediaEffectContentOwnerStore").isSelectedOwnerFirstParty()||!a.get("isAgreedWithLegalAgreement").error)};e.exports=a}),null);
__d("mediaEffectIsInstagramEffect",["MediaEffectContentGeneralDetailsStore","MediaEffectContentOwnerStore"],(function(a,b,c,d,e,f){"use strict";a=function(){return b("MediaEffectContentGeneralDetailsStore").isSelectedDestinationInstagram()||b("MediaEffectContentOwnerStore").isSelectedOwnerInstagram()};e.exports=a}),null);
__d("mediaEffectIsReviewStepValid",["MediaEffectARStudioFileDetailsStore","MediaEffectContentOwnerStore"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("MediaEffectARStudioFileDetailsStore").getState();return b("MediaEffectContentOwnerStore").isSelectedOwnerFirstParty()||!a.get("screencastFile").error&&!a.get("reviewDescription").error};e.exports=a}),null);
__d("mediaEffectValidateLocation",["fbt","MediaEffectContentGeneralDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectContentGeneralDetailsStore").getState();a.get("showLocation")&&(a.get("locationPin").isFetching&&b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectGeneralContentDetails/location/update",payload:{error:g._("\u0110ang t\u1ea3i d\u1eef li\u1ec7u v\u1ecb tr\u00ed")}}))};e.exports=a}),null);
__d("mediaEffectValidateAudiencePage",["mediaEffectValidateLocation"],(function(a,b,c,d,e,f){"use strict";a=function(){b("mediaEffectValidateLocation")()};e.exports=a}),null);
__d("mediaEffectValidateContentInstagramAttribution",["fbt","FXMediaEffectProduct","MediaEffectContentGeneralDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectContentGeneralDetailsStore").getState();if(a.get("effectDestination")!==b("FXMediaEffectProduct").INSTAGRAM)return;a.get("selectedInstagramAttribution").value||b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectGeneralContentDetails/instagramAttribution/update",payload:{error:g._("B\u1ea1n ph\u1ea3i cung c\u1ea5p t\u00e0i kho\u1ea3n Instagram \u0111\u1ec3 ph\u00e2n b\u1ed5 hi\u1ec7u \u1ee9ng n\u00e0y")}})};e.exports=a}),null);
__d("mediaEffectValidateContentName",["fbt","MediaEffectContentGeneralDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectContentGeneralDetailsStore").getState();a.get("contentName").value||b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectGeneralContentDetails/contentName/update",payload:{error:g._("Vui l\u00f2ng nh\u1eadp t\u00ean c\u1ee7a hi\u1ec7u \u1ee9ng n\u00e0y.")}})};e.exports=a}),null);
__d("mediaEffectValidateDetailsPage",["mediaEffectValidateContentInstagramAttribution","mediaEffectValidateContentName"],(function(a,b,c,d,e,f){"use strict";a=function(){b("mediaEffectValidateContentName")(),b("mediaEffectValidateContentInstagramAttribution")()};e.exports=a}),null);
__d("mediaEffectValidateExistenceProjectFile",["fbt","MediaEffectARStudioFileDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectARStudioFileDetailsStore").getState();a=a.get("projectFile");a.isFetching?b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/projectFile/update",payload:{error:g._("Vui l\u00f2ng \u0111\u1ee3i \u0111\u1ebfn khi qu\u00e1 tr\u00ecnh t\u1ea3i file d\u1ef1 \u00e1n l\u00ean ho\u00e0n t\u1ea5t")}}):a.name||b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/projectFile/update",payload:{error:g._("Vui l\u00f2ng t\u1ea3i file hi\u1ec7u \u1ee9ng l\u00ean.")}})};e.exports=a}),null);
__d("mediaEffectValidateExistenceThumbnailFile",["fbt","MediaEffectARStudioFileDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectARStudioFileDetailsStore").getState();a=a.get("thumbnailFile");a.isFetching?b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/thumbnailFile/update",payload:{error:g._("Vui l\u00f2ng \u0111\u1ee3i \u0111\u1ebfn khi qu\u00e1 tr\u00ecnh t\u1ea3i file h\u00ecnh thu nh\u1ecf l\u00ean ho\u00e0n t\u1ea5t")}}):!a.name&&!a.src&&b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/thumbnailFile/update",payload:{error:g._("Vui l\u00f2ng t\u1ea3i bi\u1ec3u t\u01b0\u1ee3ng hi\u1ec7u \u1ee9ng l\u00ean.")}})};e.exports=a}),null);
__d("mediaEffectValidateIsAgreedWithLegalAgreement",["fbt","MediaEffectARStudioFileDetailsStore","MediaEffectContentOwnerStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectARStudioFileDetailsStore").getState();!a.get("isAgreedWithLegalAgreement").value&&!b("MediaEffectContentOwnerStore").isSelectedOwnerFirstParty()&&b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/isAgreedWithLegalAgreement/update",isInit:!1,payload:{error:g._("Vui l\u00f2ng ch\u1ea5p nh\u1eadn th\u1ecfa thu\u1eadn ph\u00e1p l\u00fd.")}})};e.exports=a}),null);
__d("mediaEffectValidateFilesPage",["mediaEffectValidateExistenceProjectFile","mediaEffectValidateExistenceThumbnailFile","mediaEffectValidateIsAgreedWithLegalAgreement"],(function(a,b,c,d,e,f){"use strict";a=function(){b("mediaEffectValidateExistenceThumbnailFile")(),b("mediaEffectValidateExistenceProjectFile")(),b("mediaEffectValidateIsAgreedWithLegalAgreement")()};e.exports=a}),null);
__d("mediaEffectValidateExistenceScreencastFile",["fbt","MediaEffectARStudioFileDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectARStudioFileDetailsStore").getState();a=a.get("screencastFile");a.isFetching?b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/screencastFile/update",payload:{error:g._("Vui l\u00f2ng \u0111\u1ee3i \u0111\u1ebfn khi qu\u00e1 tr\u00ecnh t\u1ea3i file quay m\u00e0n h\u00ecnh l\u00ean ho\u00e0n t\u1ea5t")}}):!a.name&&!a.src&&b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/screencastFile/update",payload:{error:g._("Vui l\u00f2ng t\u1ea3i video v\u1ec1 hi\u1ec7u \u1ee9ng c\u1ee7a b\u1ea1n l\u00ean.")}})};e.exports=a}),null);
__d("mediaEffectValidateReviewDescription",["fbt","MediaEffectARStudioFileDetailsStore","MediaEffectDialogsDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("MediaEffectARStudioFileDetailsStore").getState();a.get("reviewDescription").value||b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/reviewDescription/update",payload:{error:g._("Vui l\u00f2ng nh\u1eadp n\u1ed9i dung m\u00f4 t\u1ea3 cho ph\u1ea7n \u0111\u00e1nh gi\u00e1.")}})};e.exports=a}),null);
__d("mediaEffectValidateReviewPage",["mediaEffectValidateExistenceScreencastFile","mediaEffectValidateReviewDescription"],(function(a,b,c,d,e,f){"use strict";a=function(){b("mediaEffectValidateExistenceScreencastFile")(),b("mediaEffectValidateReviewDescription")()};e.exports=a}),null);
__d("MediaEffectARStudioStoreUtils",["Promise","AsyncRequest","FXEntMediaEffectStatus","FXMediaEffectProduct","MediaEffectARStudioSaveUtils","MediaEffectContentGeneralDetailsStore","MediaEffectContentOwnerStore","MediaEffectDialogsDispatcher","MediaEffectEnvironmentStore","MediaEffectManageEffectPages","URI","XMediaEffectARHubAsyncFetchController","XMediaEffectAsyncMaskDialogDataController","XMediaEffectAsyncMaskDialogFetchController","goURI","immutable","mediaEffectIsAudiencePageValid","mediaEffectIsDetailsPageValid","mediaEffectIsFilesPageValid","mediaEffectIsInstagramEffect","mediaEffectIsReviewStepValid","mediaEffectValidateAudiencePage","mediaEffectValidateDetailsPage","mediaEffectValidateFilesPage","mediaEffectValidateReviewPage","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List;a={setupUploadEnvironment:function(){__p&&__p();var a=[{id:b("MediaEffectManageEffectPages").UPLOAD,bulletNumber:1},{id:b("MediaEffectManageEffectPages").DETAILS,bulletNumber:null,validator:function(){b("mediaEffectValidateDetailsPage")();return b("mediaEffectIsDetailsPageValid")()?null:b("MediaEffectManageEffectPages").DETAILS}},{id:b("MediaEffectManageEffectPages").FILES,bulletNumber:null,validator:function(){b("mediaEffectValidateFilesPage")();return b("mediaEffectIsFilesPageValid")()?null:b("MediaEffectManageEffectPages").FILES},deps:[b("MediaEffectManageEffectPages").DETAILS]},{id:b("MediaEffectManageEffectPages").PREVIEW,bulletNumber:2,deps:[b("MediaEffectManageEffectPages").DETAILS,b("MediaEffectManageEffectPages").FILES]},{id:b("MediaEffectManageEffectPages").PUBLISH,bulletNumber:3,deps:[b("MediaEffectManageEffectPages").DETAILS,b("MediaEffectManageEffectPages").FILES]},{id:b("MediaEffectManageEffectPages").AUDIENCE,bulletNumber:null,validator:function(){b("mediaEffectValidateAudiencePage")();return b("mediaEffectIsAudiencePageValid")()?null:b("MediaEffectManageEffectPages").AUDIENCE},deps:[b("MediaEffectManageEffectPages").DETAILS,b("MediaEffectManageEffectPages").FILES]}],c=b("MediaEffectContentOwnerStore").isSelectedOwnerFirstParty();c||a.push({id:b("MediaEffectManageEffectPages").REVIEW,bulletNumber:null,validator:function(){b("mediaEffectValidateReviewPage")();return b("mediaEffectIsReviewStepValid")()?null:b("MediaEffectManageEffectPages").REVIEW},deps:[b("MediaEffectManageEffectPages").DETAILS,b("MediaEffectManageEffectPages").FILES,b("MediaEffectManageEffectPages").AUDIENCE]});c=b("MediaEffectEnvironmentStore").getState().get("shouldShowFBOnlyMetadata");c&&a.push({id:b("MediaEffectManageEffectPages").INTERNAL_SETTINGS,bulletNumber:null,deps:[b("MediaEffectManageEffectPages").DETAILS,b("MediaEffectManageEffectPages").FILES,b("MediaEffectManageEffectPages").AUDIENCE,b("MediaEffectManageEffectPages").REVIEW]});a.push({id:b("MediaEffectManageEffectPages").SUBMIT,bulletNumber:null,deps:[b("MediaEffectManageEffectPages").DETAILS,b("MediaEffectManageEffectPages").FILES,b("MediaEffectManageEffectPages").AUDIENCE,b("MediaEffectManageEffectPages").REVIEW]});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectARStudioPagesStore/setSteps",payload:{steps:g(a)}})},setupEditEnvironment:function(){var a=b("MediaEffectContentGeneralDetailsStore").isEditDisabled(),c=b("MediaEffectContentOwnerStore").getState().get("showAnalytics"),d=b("MediaEffectContentGeneralDetailsStore").getState().get("reviewStatus"),e=d===b("FXEntMediaEffectStatus").IN_REVIEW;d=d===b("FXEntMediaEffectStatus").NOT_APPROVED;var f=[{id:b("MediaEffectManageEffectPages").OVERVIEW,bulletNumber:null}],h=b("mediaEffectIsInstagramEffect")();!h&&!e&&!d&&c&&f.push({id:b("MediaEffectManageEffectPages").PERFORMANCE,bulletNumber:null});a||(f.push({id:b("MediaEffectManageEffectPages").PREVIEW,bulletNumber:null}),b("MediaEffectContentGeneralDetailsStore").isInactiveBecauseOfSchedule()||f.push({id:b("MediaEffectManageEffectPages").PROMOTIONS,bulletNumber:null}));h=b("MediaEffectEnvironmentStore").getState().get("shouldShowFBOnlyMetadata");h&&f.push({id:b("MediaEffectManageEffectPages").INTERNAL_SETTINGS,bulletNumber:null});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectARStudioPagesStore/setSteps",payload:{steps:g(f)}})},startManageEffect:function(a,b){a?this.startEditFlow(a,b):this.startUploadFlow(b)},startUploadFlow:function(a){a=this.fetchDialogData(!0).then(a);b("promiseDone")(a)},startEditFlow:function(a,c){a=this.fetchDialogData(!0).then(this.fetchARStudioEffectData.bind(this,a)).then(c);b("promiseDone")(a)},openUploadDialog:function(a){this.openDialog(b("FXEntMediaEffectStatus").DRAFT);a=this.fetchDialogData(!1).then(a);b("promiseDone")(a)},openDialog:function(a,c){a===b("FXEntMediaEffectStatus").DRAFT&&(c==null||c===b("FXMediaEffectProduct").FACEBOOK)?b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileUploadDialog/open"}):b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectARStudioDetailDialog/open"})},openDialogForEffect:function(a,c,d,e){if(window.location.pathname.indexOf("/fbcameraeffects/")===0&&b("URI").getRequestURI(!1).getFragment().indexOf("effect_id=")===-1){var f=new(b("URI"))(window.location.href);f.setFragment("effect_id="+a);b("goURI")(f.toString(),!1,!0)}this.openDialog(c,d);f=this.fetchDialogData(!1).then(this.fetchARStudioEffectData.bind(this,a)).then(e);b("promiseDone")(f)},fetchDialogData:function(a){var c=b("XMediaEffectAsyncMaskDialogDataController").getURIBuilder().getURI();return new(b("Promise"))(function(d){new(b("AsyncRequest"))(c).setHandler(function(c){c=c.getPayload();c&&(b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/legalAgreementText/update",payload:{legalAgreementText:c.effectUploadLegalText}}),b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectContentOwner/init",payload:{owners:c.ownersData}}),b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectContentOwner/selectedOwner/update",isInit:!0,payload:{value:c.selectedOwner}}),b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectGeneralContentDetails/initDropdowns",payload:{instructions:c.instructionsData,instagramAttributions:c.instagramAttributions}}),b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectContentApp/init",payload:{apps:c.appsData}}),b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectEnvironmentStore/init",payload:{shouldShowFBOnlyMetadata:c.shouldShowFBOnlyMetadata,shouldShowFirstPartySection:c.shouldShowFirstPartySection,isInternalEnv:c.isInternalEnv,isNewPublishingFlow:a,accessToken:c.accessToken}}))}).setFinallyHandler(function(){d()}).send()})},fetchARStudioEffectData:function(a){__p&&__p();var c=b("XMediaEffectAsyncMaskDialogFetchController").getURIBuilder().setFBID("media_effect_id",a).getURI();return new(b("Promise"))(function(a){__p&&__p();new(b("AsyncRequest"))(c).setHandler(function(a){__p&&__p();a=a.getPayload();if(a){b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/init",payload:a.maskUploadBootstrapData});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectDetailsGallery/init",payload:a.effectUsages});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectGeneralContentDetails/initEffect",payload:{activationData:a.activationData,content:a.effect,metadataData:a.metadataData,instagramData:a.instagramData}});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectContentApp/selectedApp/update",payload:{value:a.metadataData.connectAppID}});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectARStudioDetailDialog/init",payload:Object.assign({},a,{ownerData:a.effect.owner})});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectContentOwner/init",payload:{owners:[a.effect.owner]}});b("MediaEffectDialogsDispatcher").dispatch({type:"MediaEffectContentOwner/selectedOwner/update",isInit:!0,payload:{value:a.effect.owner.id}});a.effect.status!==b("FXEntMediaEffectStatus").DRAFT&&b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/isAgreedWithLegalAgreement/update",isInit:!0,payload:{value:!0}});if(a.effect&&a.effect.id){a=b("MediaEffectARStudioSaveUtils").getEffectsToLegalAgreementMapping()[a.effect.id];a&&b("MediaEffectDialogsDispatcher").dispatch({type:"ARStudioFileDetails/isAgreedWithLegalAgreement/update",isInit:!0,payload:a})}}}).setFinallyHandler(function(){a()}).send()})},fetchARHubEffects:function(a){a=b("XMediaEffectARHubAsyncFetchController").getURIBuilder().setFBID("owner_id",a).getURI();new(b("AsyncRequest"))(a).setHandler(function(a){}).send()}};e.exports=a}),null);
__d("XMediaEffectAsyncRequestEffectNotificationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/async/request_notification/",{effect_id:{type:"FBID"},share_actor_id:{type:"FBID"},share_target_id:{type:"FBID"}})}),null);
__d("XMediaEffectAsyncRequestTryEffectNotificationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/async/request_try_effect_notification/",{request_source:{type:"Enum",defaultValue:"direct",enumType:1},effect_id:{type:"FBID",required:!0},hash:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("XMediaEffectHubEffectArchiveAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/effects/async/archive/",{effect_ids:{type:"FBIDVector",required:!0}})}),null);
__d("XMediaEffectManageEffectViewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/arp/effect/{page_flow}/{?effect_id}/",{page_flow:{type:"Enum",required:!0,enumType:1},effect_id:{type:"FBID"}})}),null);
__d("XMediaEffectRegenerateTestingLinkAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/async/regenerate_testing_link/",{effect_id:{type:"FBID"}})}),null);
__d("XProfilePictureOverlayLandingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profilepicframes/",{overlay_source_object_id:{type:"FBID"},photo_id:{type:"Int"},profile_id:{type:"Int"},query:{type:"String"},selected_page_id:{type:"Int"},selected_overlay_id:{type:"Int"}})}),null);
__d("MediaEffectHubEffectActionConfig",["fbt","AsyncDialog","AsyncRequest","AsyncResponse","FXMediaEffectType","MediaEffectARStudioStoreUtils","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubDispatcher","MediaEffectHubFunnelLogger","MediaEffectManageEffectPages","MediaEffectMetadataDataLoader","MediaEffectPerformanceLogger","MediaEffectShareReferrer","React","SimpleXUIDialog","URI","XMediaEffectAsyncRequestEffectNotificationController","XMediaEffectAsyncRequestTryEffectNotificationController","XMediaEffectCreateDialogController","XMediaEffectHubEffectArchiveAsyncController","XMediaEffectManageEffectViewController","XMediaEffectRegenerateTestingLinkAsyncController","XMediaEffectShareEffectDialogController","XProfilePictureOverlayLandingController","XUIDialogButton.react","XUIDialogCancelButton.react","gkx","goURI","immutable","mediaEffectGKCheck","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Set;function a(a,c,d,e){b("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ACTIVE_STATUS_CHANGE","send:"+(a?"enable":"disable")),b("promiseDone")(b("MediaEffectMetadataDataLoader").changeActiveStatus(a,c).then(function(a){a=a.payload.effects;b("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ACTIVE_STATUS_CHANGE","receive");b("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:a}});d&&d()})["catch"](function(a){b("AsyncResponse").defaultErrorHandler(a),e&&e()}))}function i(a,c,d){__p&&__p();b("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ARCHIVE","send");a=b("XMediaEffectHubEffectArchiveAsyncController").getURIBuilder().setFBIDVector("effect_ids",a.toSeq().map(function(a){return a.id}).toArray()).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){a=a.payload.effects;b("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ARCHIVE","receive");b("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:a}});b("MediaEffectHubDispatcher").dispatch({type:"effects_selected",payload:{effectIDs:h()}});c&&c()}).setErrorHandler(function(a){b("AsyncResponse").defaultErrorHandler(a),d&&d()}).send()}c={getLabel:function(){return g._("B\u1eadt")},onClick:a.bind(null,!0)};d={getLabel:function(){return g._("T\u1eaft")},onClick:a.bind(null,!1)};f={getLabel:function(){return g._("Ch\u1ec9nh s\u1eeda")},onClick:function(a){b("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_OPEN","menu-edit");var c=new(b("MediaEffectPerformanceLogger"))().startRecording().setIdentifier("EditAction.onClick").setEffectID(a.id).setEffectType(a.type),d=function(){c.endRecordingAndLog()};if(a.type===b("FXMediaEffectType").MSQRD_MASK)c.setGKOn(["cep_separated_effect_dialogs"]),b("gkx")("AT679YBF8i91MJ2Uw4KOAIdDQBHmCLIIo2z20L0Q7E7kcYLWR3Tr-hqQRDCltZmliqpwJ1Uckevd1EOmcXVw3eXFxc9DALwtjFmNy0sSthAjxg")?b("goURI")(b("XMediaEffectManageEffectViewController").getURIBuilder().setEnum("page_flow",b("MediaEffectManageEffectPages").UPLOAD).setFBID("effect_id",a.id).getURI().toString()):b("MediaEffectARStudioStoreUtils").openDialogForEffect(a.id,a.status,a.effectDestination,d);else{a=b("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",b("MediaEffectFlowType").BASIC_HUB).setEnum("step",b("MediaEffectCreateStep").EDIT).setFBID("media_effect_id",a.id).setEnum("ref",b("MediaEffectCreationReferrer").HUB).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a),d)}}};var j={getLabel:function(){return g._("Sao ch\u00e9p")},onClick:function(a){b("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_DUPLICATE");a=b("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",b("MediaEffectFlowType").BASIC_HUB).setEnum("step",b("MediaEffectCreateStep").DUPLICATE).setFBID("media_effect_id",a.id).setEnum("ref",b("MediaEffectCreationReferrer").HUB).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a))}},k={getLabel:function(){return g._("S\u1eeda l\u1ed7i")},onClick:function(a){a=a.id.toString();a=new(b("URI"))("/intern/fx/debug/").setQueryData({effectid:a});b("goURI")(a)}},l={getLabel:function(){return g._("L\u01b0u tr\u1eef")},onClick:function(a,c,d){return b("SimpleXUIDialog").showEx(g._("Sau khi b\u1ea1n l\u01b0u tr\u1eef, m\u1ecdi ng\u01b0\u1eddi s\u1ebd kh\u00f4ng th\u1ec3 ph\u00e1t hi\u1ec7n ho\u1eb7c d\u00f9ng th\u1eed hi\u1ec7u \u1ee9ng. B\u1ea1n s\u1ebd kh\u00f4ng th\u1ec3 khi\u1ebfn hi\u1ec7u \u1ee9ng ho\u1ea1t \u0111\u1ed9ng tr\u1edf l\u1ea1i."),g._({"*":"L\u01b0u tr\u1eef hi\u1ec7u \u1ee9ng?","_1":"L\u01b0u tr\u1eef hi\u1ec7u \u1ee9ng?"},[g._plural(a.size)]),b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),{action:"cancel"}),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:g._("L\u01b0u tr\u1eef"),onClick:function(){return i(a,c,d)},use:"confirm"})))}},m={getLabel:function(){return g._("Th\u00eam v\u00e0o \u1ea3nh \u0111\u1ea1i di\u1ec7n")},onClick:function(a){b("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_CHANGE_PROFILE_PICTURE");var c=a.profileFrame&&a.profileFrame.id;if(c){c=b("XProfilePictureOverlayLandingController").getURIBuilder().setInt("selected_overlay_id",c).setInt("profile_id",a.owner.id).getURI();b("goURI")(c)}}},n={getLabel:function(){return g._("Xem tr\u01b0\u1edbc tr\u00ean di \u0111\u1ed9ng")},onClick:function(a){a=b("XMediaEffectAsyncRequestEffectNotificationController").getURIBuilder().setFBID("effect_id",a).getURI();new(b("AsyncRequest"))(a).setMethod("POST").setHandler(function(a){b("SimpleXUIDialog").show(g._("Xem th\u00f4ng b\u00e1o c\u1ee7a b\u1ea1n tr\u00ean di \u0111\u1ed9ng \u0111\u1ec3 xem tr\u01b0\u1edbc khung."))}).setErrorHandler(function(a){b("SimpleXUIDialog").show(g._("\u0110\u00e3 x\u1ea3y ra s\u1ef1 c\u1ed1 khi g\u1eedi th\u00f4ng b\u00e1o."))}).send()}},o={onClick:function(a,c,d,e){a=b("XMediaEffectAsyncRequestTryEffectNotificationController").getURIBuilder().setFBID("effect_id",a).setString("hash",c).getURI();new(b("AsyncRequest"))(a).setMethod("POST").setHandler(function(a){return d&&d()}).setErrorHandler(function(a){return e&&e()}).send()}},p={getLabel:function(){return g._("Chia s\u1ebb trong Trang")},onClick:function(a){var c;if((c=a)!=null?(c=c.owner)!=null?c.isBusinessPage:c:c)return;c=b("XMediaEffectShareEffectDialogController").getURIBuilder().setFBID("effect_id",a.id.toString()).setEnum("ref",b("MediaEffectShareReferrer").HUB_EFFECT_PREVIEW).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(c))}},q={onClick:function(a,c){a=b("XMediaEffectRegenerateTestingLinkAsyncController").getURIBuilder().setFBID("effect_id",a).getURI();new(b("AsyncRequest"))(a).setHandler(function(a){return c&&c(a.payload)}).send()}};e.exports={activate:c,archive:l,debug:k,changeActiveStatus:a,changeProfilePicture:m,deactivate:d,duplicate:j,edit:f,previewOnMobile:n,tryEffectOnMobileAction:o,shareEffect:p,regenerateTestingLinkAction:q}}),null);
__d("MediaEffectGenerationType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTO_GENERATED:"auto_generated",USER_GENERATED:"user_generated",UNKNOWN:""})}),null);
__d("MediaEffectStatusText.react",["MediaEffectHubStrings","React"],(function(a,b,c,d,e,f){"use strict";a=function(a){a=a.status;if(!a)return null;a=b("MediaEffectHubStrings").getStatusText(a);return!a?null:b("React").createElement("span",null,a)};e.exports=a}),null);
__d("MediaEffectContentStatusTitle.react",["cx","FXEntMediaEffectStatus","MediaEffectStatusText.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=(a={},a[b("FXEntMediaEffectStatus").NOT_REVIEWED]="_2l85",a[b("FXEntMediaEffectStatus").IN_REVIEW]="_2l87",a[b("FXEntMediaEffectStatus").NOT_APPROVED]="_2l89",a[b("FXEntMediaEffectStatus").APPROVED]="_2l7j",a[b("FXEntMediaEffectStatus").UPDATE_IN_REVIEW]="_2l87",a[b("FXEntMediaEffectStatus").UPDATE_REJECTED]="_2l89",a);c=function(a){var c=a.className;a=a.status;var d=a?h[a]:null;return b("React").createElement("div",{className:b("joinClasses")("_2l7i",c)},d&&b("React").createElement("span",{className:b("joinClasses")("_3-8_ _4ppg _2l7h",d)}),b("React").createElement("span",{className:"_4ppi"},b("React").createElement(b("MediaEffectStatusText.react"),{status:a})))};e.exports=c}),null);
__d("MediaEffectOwnerHubEffectCard.react",["cx","fbt","AsyncDialog","AsyncRequest","ContextualDialogArrow","ContextualLayerAutoFlip","FXEntMediaEffectStatus","Layout.react","List.react","MediaEffectContentStatusTitle.react","MediaEffectMetadataActionCreators","Link.react","Log","MediaEffectCreateStep","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectReactFrameEditorPreviewCanvasContainer.react","PopoverMenu.react","React","ReactXUIMenu","XMediaEffectCreateDialogController","XUICard.react","XUICardSection.react","XUIText.react","MediaEffectCreationReferrer"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("Layout.react").Column,k=b("Layout.react").FillColumn,l=b("ReactXUIMenu").Item,m="archive",n="toggle";c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.onEffectLinkClick=function(){var a=b("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",this.props.flowType).setEnum("step",b("MediaEffectCreateStep").EDIT).setFBID("media_effect_id",this.props.effectID).setEnum("ref",b("MediaEffectCreationReferrer").HUB).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a),function(a){a.subscribe(["hide","success"],function(a,event){this.props.effectUpdateHandler(this.props.effectID)}.bind(this))}.bind(this))}.bind(this),this.onMenuItemClick=function(event,a){a=a.item.getValue();switch(a){case n:this.isToggleEnabled()&&this.props.toggleEventHandler(this.props.effectID,this.props.effect.effectData.status===b("FXEntMediaEffectStatus").INACTIVE);break;case m:this.props.archiveEventHandler(this.props.effect.effectData);break;default:b("Log").warn("Unexpected action sent to this handler: "+a)}}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectMetadataActionCreators").initFrameData(this.props.effect.effectEditorData)};a.prototype.buildMenu=function(){var a=this.props.effect.effectData.status;a=a===b("FXEntMediaEffectStatus").INACTIVE?h._("B\u1eadt"):h._("T\u1eaft");var c=this.isToggleEnabled();return b("React").createElement(b("ReactXUIMenu"),{onItemClick:this.onMenuItemClick},b("React").createElement(l,{value:n},b("React").createElement("span",{className:(c?"_2ugo":"")+(c?"":" _2ugp")},a)),b("React").createElement(l,{value:m},h._("L\u01b0u tr\u1eef")))};a.prototype.isToggleEnabled=function(){var a=this.props.effect.effectData.status;return a===b("FXEntMediaEffectStatus").INACTIVE||a===b("FXEntMediaEffectStatus").ACTIVE};a.prototype.render=function(){return b("React").createElement(b("XUICard.react"),null,b("React").createElement(b("MediaEffectOwnerHubHeader.react"),{hubLinkTab:b("MediaEffectHubViewTab").MANAGE,title:this.props.title}),b("React").createElement(b("XUICardSection.react"),null,b("React").createElement(b("Layout.react"),{className:"_2ugq"},b("React").createElement(j,null,b("React").createElement(b("MediaEffectReactFrameEditorPreviewCanvasContainer.react"),{previewHeight:80,previewWidth:80})),b("React").createElement(k,{className:"_2ugr"},b("React").createElement(b("List.react"),{border:"none",spacing:"small"},b("React").createElement("li",null,b("React").createElement(b("Link.react"),{href:"#",onClick:this.onEffectLinkClick},b("React").createElement(b("XUIText.react"),null,this.props.effect.effectData.name))),b("React").createElement("li",null,b("React").createElement(b("MediaEffectContentStatusTitle.react"),{className:"_2ugs",status:this.props.effect.effectData.status})),b("React").createElement("li",null,b("React").createElement(b("XUIText.react"),null,h._({"*":{"*":"{activateCount} l\u1ea7n s\u1eed d\u1ee5ng","_1":"{activateCount} l\u1ea7n s\u1eed d\u1ee5ng"}},[h._param("activateCount",this.props.effect.effectData.activateCount,[0]),h._plural(this.props.effect.effectData.activateCount)]))))),b("React").createElement(j,{className:"_2ugt"},b("React").createElement(b("PopoverMenu.react"),{alignh:"right",behaviors:[b("ContextualDialogArrow")],layerBehaviors:[b("ContextualLayerAutoFlip")],menu:this.buildMenu(),position:"below"},b("React").createElement("div",{className:"_2ugu"}))))))};e.exports=a}),null);
__d("MediaEffectOwnerHubNullStateCard.react",["cx","invariant","EventPermalinkCameraFramesCreate.react","EventPermalinkCameraFramesCreateWithDefaultFrame.react","MediaEffectFlowType","MediaEffectGenerationType","MediaEffectOwnerHubHeader.react","React","XUICard.react","XUICardSection.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a;switch(this.props.flowType){case b("MediaEffectFlowType").EVENT:a=(a=this.props)!=null?(a=a.optionalData)!=null?a.eventActionContext:a:a;a||h(0,undefined);var c=this.props.effect;if(c&&c.effectData&&c.effectData.generationType===b("MediaEffectGenerationType").AUTO_GENERATED)return b("React").createElement(b("EventPermalinkCameraFramesCreateWithDefaultFrame.react"),{actionContext:a,effect:c,effectUpdateHandler:this.props.effectUpdateHandler,eventID:this.props.owner,flowType:this.props.flowType,key:"EffectCard"+c.effectData.id,title:this.props.title,toggleEventHandler:this.props.toggleEventHandler});else return b("React").createElement(b("EventPermalinkCameraFramesCreate.react"),{actionContext:a,eventID:this.props.owner,title:this.props.title});default:return b("React").createElement(b("XUICard.react"),{className:"_634s"},b("React").createElement(b("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),b("React").createElement(b("XUICardSection.react"),null,b("React").createElement("div",{className:"_fw6"},"No data!")))}};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MediaEffectStoreSharedDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!1})}),null);
__d("XMediaEffectAsyncFetchEffectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/async_load_effect/",{effect_ids:{type:"FBIDSet"}})}),null);
__d("MediaEffectStore",["AsyncRequest","FluxLoadObjectStore","LoadObject","MediaEffectGenerationType","MediaEffectStoreSharedDispatcher","XMediaEffectAsyncFetchEffectController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxLoadObjectStore"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),a.explicitlyRegisterStore(this)}a.prototype.reduce=function(a,c){__p&&__p();switch(c.action){case"media_effect/add":return this.__handleOne(a,c.key,c.value);case"media_effect_saved":var d=a.filter(function(a,c){c=a.getValue();return((a=c)!=null?(a=a.effectData)!=null?a.generationType:a:a)===b("MediaEffectGenerationType").USER_GENERATED});return this.__handleOne(d,c.effect.effectData.id,c.effect);case"media_effect/bootstrap":c.bootstrapData.forEach(function(c){a.set(c.effect,b("LoadObject").withValue(c.data))});break;case"media_effect/error":return this.__handleOne(a,c.key,c.error);case"media_effect/reload":this.__load(c.key);return a.remove(c.key);case"media_effect/remove":return a.remove(c.key);case"media_effect/update_effect":d=a.get(c.key).getValue();if(d){d=Object.assign({},d);d.effectData=c.effectData;return this.__handleOne(a.remove(c.key),c.key,d)}break}return a};a.prototype.__load=function(a){var c=b("XMediaEffectAsyncFetchEffectController").getURIBuilder().setFBIDSet("effect_ids",[a]).getURI();new(b("AsyncRequest"))(c).setHandler(function(c){b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/add",key:a,value:c.getPayload().effects[0]})}).setErrorHandler(function(c){b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/error",key:a,error:c.getError()})}).send()};a.__moduleID=e.id;e.exports=new a(b("MediaEffectStoreSharedDispatcher"))}),null);
__d("XMediaEffectAsyncFetchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbcameraeffects/async_load/",{owner_ids:{type:"FBIDSet"},creator_ids:{type:"FBIDSet"},statuses:{type:"EnumSet",enumType:null},submission_statuses:{type:"EnumSet",enumType:null},types:{type:"EnumSet",enumType:null},creation_date_range:{type:"StringToIntMap"},effect_id:{type:"FBID"},effect_name:{type:"String"},effect_tag:{type:"String"},whitelisted:{type:"Bool",defaultValue:!1},gatekeeper:{type:"String"}})}),null);
__d("MediaEffectOwnerStore",["AsyncRequest","FluxLoadObjectStore","FXEntMediaEffectStatus","LoadObject","MediaEffectStore","MediaEffectStoreSharedDispatcher","XMediaEffectAsyncFetchController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("FXEntMediaEffectStatus").ACTIVE,b("FXEntMediaEffectStatus").COMPLETED,b("FXEntMediaEffectStatus").DRAFT,b("FXEntMediaEffectStatus").IN_REVIEW,b("FXEntMediaEffectStatus").INACTIVE,b("FXEntMediaEffectStatus").NOT_APPROVED,b("FXEntMediaEffectStatus").SCHEDULED];c=babelHelpers.inherits(a,b("FluxLoadObjectStore"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),a.explicitlyRegisterStore(this)}a.prototype.reduce=function(a,c){__p&&__p();switch(c.action){case"media_effect_owner/add":return this.__handleOne(a,c.key,{ownerID:c.key,effects:c.effects});case"media_effect_owner/bootstrap":c.bootstrapData.forEach(function(c){a.set(c.ownerID,b("LoadObject").withValue(c))});break;case"media_effect_owner/error":return this.__handleOne(a,c.key,c.error);case"media_effect_owner/reload":this.__load(c.key);return a.remove(c.key);case"media_effect_owner/remove":return a.remove(c.key);case"media_effect_owner/update_add_effect":var d=a.get(c.key).getValue();if(d){d.effects.push(c.effect);return this.__handleOne(a,c.key,{ownerID:c.key,effects:d.effects})}break;case"media_effect_saved":d=c.effect.effectData.owner.id;var e=a.get(d).getValue();if(e){this.$MediaEffectOwnerStore1();return this.__handleOne(a,d,{ownerID:d,effects:b("MediaEffectStore").getState().keySeq().toArray()})}break;case"media_effect_owner/update_remove_effect":e=a.get(c.key).getValue();if(e&&e.effects.indexOf(c.effect)>=0){d=e.effects;d.splice(d.indexOf(c.effect),1);return this.__handleOne(a,c.key,{ownerID:c.key,effects:d})}break}return a};a.prototype.$MediaEffectOwnerStore1=function(){b("MediaEffectStoreSharedDispatcher").waitFor([b("MediaEffectStore").getDispatchToken()])};a.prototype.__load=function(a){var c=b("XMediaEffectAsyncFetchController").getURIBuilder().setFBIDSet("owner_ids",[a]).setEnumSet("statuses",h).getURI();new(b("AsyncRequest"))(c).setHandler(function(c){b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/add",key:a,effects:c.payload.effects.map(function(a){return a.id})})}).setErrorHandler(function(c){b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/error",key:a,error:c.getError()})}).send()};a.__moduleID=e.id;e.exports=new a(b("MediaEffectStoreSharedDispatcher"))}),null);
__d("MediaEffectStoresBootstrapper",["MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectOwnerStore","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectStore","MediaEffectStoreSharedDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("MediaEffectReactFrameEditorDataStore"),b("MediaEffectReactFrameEditorCanvasDataStore")],h=[b("MediaEffectStore"),b("MediaEffectOwnerStore")];a={isBootstrapped:!1,getEditorStores:function(){return g},getMediaEffectStores:function(){return h},bootstrap:function(){if(this.isBootstrapped)return;b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.getEditorStores());b("MediaEffectStoreSharedDispatcher").explicitlyRegisterStores(this.getMediaEffectStores());this.bootstrapFontData();this.isBootstrapped=!0},bootstrapWithData:function(a){if(this.isBootstrapped)return;b("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.getEditorStores());b("MediaEffectStoreSharedDispatcher").explicitlyRegisterStores(this.getMediaEffectStores());a.fontData?b("MediaEffectMetadataActionCreators").addFontData(a.fontData):this.bootstrapFontData();a.ownerData&&b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/bootstrap",bootstrapData:a.ownerData});a.effectData&&b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/bootstrap",bootstrapData:a.effectData});this.isBootstrapped=!0},bootstrapFontData:function(){b("MediaEffectMetadataActionCreators").bootstrapFontData()}};e.exports=a}),null);
__d("MediaEffectOwnerHubContainer.react",["cx","AsyncRequest","AsyncResponse","CenteredContainer.react","FluxContainer","MediaEffectFlowType","MediaEffectGenerationType","MediaEffectHubEffectActionConfig","MediaEffectOwnerHubEffectCard.react","MediaEffectOwnerHubHeader.react","MediaEffectOwnerHubNullStateCard.react","MediaEffectOwnerStore","MediaEffectStore","MediaEffectStoresBootstrapper","MediaEffectStoreSharedDispatcher","React","XMediaEffectHubEffectActivationAsyncController","XUICard.react","XUISpinner.react","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k=b("immutable").Set;h=babelHelpers.inherits(l,b("React").PureComponent);h&&h.prototype;l.prototype.render=function(){return b("React").createElement(b("XUICard.react"),null,b("React").createElement(b("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),b("React").createElement(b("XUICard.react"),null,b("React").createElement(b("CenteredContainer.react"),{className:"_60ll"},b("React").createElement(b("XUISpinner.react"),{size:"large"}))))};function l(){h.apply(this,arguments)}i=babelHelpers.inherits(m,b("React").PureComponent);i&&i.prototype;m.prototype.render=function(){return b("React").createElement(b("XUICard.react"),null,b("React").createElement(b("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),b("React").createElement(b("XUICard.react"),null,b("React").createElement("div",{className:"_5-nb"},this.props.errorMessage)))};function m(){i.apply(this,arguments)}a=babelHelpers.inherits(n,b("React").PureComponent);j=a&&a.prototype;n.getStores=function(){return[b("MediaEffectStore"),b("MediaEffectOwnerStore")]};n.calculateState=function(a){__p&&__p();var c={isLoading:!0};if(!a)return c;var d=b("MediaEffectOwnerStore").get(a.ownerID);if(d.hasError()){var e=d.getError();e&&(c={errorMessage:e.message,isError:!0,isLoading:!1})}if(!d.hasValue())return c;e=a.defaultFlowType;d=d.getValueEnforcing().effects;if(d.length===0)c={effectData:null,effectIDs:[],flowType:e,isError:!1,isLoading:!1,selectedEffectIndex:-1};else{a=a.selectedEffectIndex<d.length&&a.selectedEffectIndex>=0?a.selectedEffectIndex:0;var f=b("MediaEffectStore").get(d[a]);if(f.hasError()){var g=f.getError();g&&(c={errorMessage:g.message,isError:!0,isLoading:!1})}else if(f.hasValue()){g=f.getValueEnforcing();e=g.effectData.flowType;c={effectData:g,effectIDs:d,flowType:e,isError:!1,isLoading:!1,selectedEffectIndex:a}}else c={isLoading:!0}}return c};function n(a){__p&&__p();j.constructor.call(this,a);this.effectUpdateHandler=function(a){var c=this.state.effectIDs.length>0&&this.state.selectedEffectIndex>=0?this.state.effectIDs[this.state.selectedEffectIndex]:"";a===c&&this.setState({isLoading:!0});b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/reload",key:a})}.bind(this);this.toggleEventHandler=function(a,c){c=b("XMediaEffectHubEffectActivationAsyncController").getURIBuilder().setBool("activate",c).setFBIDVector("effect_ids",[a]).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(a){a=a.getPayload().effects;a.map(function(a){b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/update_effect",key:a.id,effectData:a})})}).setErrorHandler(function(a){b("AsyncResponse").defaultErrorHandler(a)}).send()};this.archiveEventHandler=function(a){b("MediaEffectHubEffectActionConfig").archive.onClick(k([a]),function(){this.setState({isLoading:!0}),b("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/update_remove_effect",key:this.state.ownerID,effect:a.id})}.bind(this))}.bind(this);a={defaultFlowType:a.flowType?a.flowType:b("MediaEffectFlowType").BASIC_HUB,effectData:null,effectIDs:[],errorMessage:"",flowType:a.flowType?a.flowType:b("MediaEffectFlowType").BASIC_HUB,isError:!1,isLoading:!0,ownerID:a.owner,selectedEffectIndex:-1};var c=n.calculateState(a);this.state=Object.assign({},a,c)}n.prototype.UNSAFE_componentWillMount=function(){b("MediaEffectStoresBootstrapper").bootstrap()};n.prototype.render=function(){__p&&__p();var a=this.props,c=a.title;a=a.optionalData;var d=this.state,e=d.effectData,f=d.effectIDs,g=d.errorMessage,h=d.flowType,i=d.isError,j=d.isLoading;d=d.ownerID;if(i)return b("React").createElement(m,{errorMessage:g,title:c});else if(j)return b("React").createElement(l,{title:c});else if(f.length>0&&e&&e.effectData.generationType===b("MediaEffectGenerationType").USER_GENERATED){i=e;return b("React").createElement(b("MediaEffectOwnerHubEffectCard.react"),{archiveEventHandler:this.archiveEventHandler,effect:i,effectID:i.effectData.id,effectUpdateHandler:this.effectUpdateHandler,flowType:h,key:"EffectCard"+i.effectData.id,title:c,toggleEventHandler:this.toggleEventHandler})}else return b("React").createElement(b("MediaEffectOwnerHubNullStateCard.react"),{effect:e,effectUpdateHandler:this.effectUpdateHandler,flowType:h,optionalData:a,owner:d,title:c,toggleEventHandler:this.toggleEventHandler})};e.exports=b("FluxContainer").create(n)}),null);
__d("MediaEffectOwnerHubWidgetInit",["MediaEffectOwnerHubContainer.react","MediaEffectStoresBootstrapper","React","ReactRenderer"],(function(a,b,c,d,e,f){"use strict";a={init:function(a){a.bootstrapData?b("MediaEffectStoresBootstrapper").bootstrapWithData(a.bootstrapData):b("MediaEffectStoresBootstrapper").bootstrap(),b("ReactRenderer").renderComponent(b("React").createElement(b("MediaEffectOwnerHubContainer.react"),a.ownerWidgetProps),a.root)}};e.exports=a}),null);